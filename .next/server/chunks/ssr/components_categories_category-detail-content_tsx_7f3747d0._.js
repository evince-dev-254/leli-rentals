module.exports=[56117,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(38246),e=a.i(71987),f=a.i(87532),g=a.i(81464),h=a.i(24987),i=a.i(21374),j=a.i(76472),k=a.i(210),l=a.i(9777),m=a.i(67329);let n=(0,a.i(70106).default)("SlidersHorizontal",[["line",{x1:"21",x2:"14",y1:"4",y2:"4",key:"obuewd"}],["line",{x1:"10",x2:"3",y1:"4",y2:"4",key:"1q6298"}],["line",{x1:"21",x2:"12",y1:"12",y2:"12",key:"1iu8h1"}],["line",{x1:"8",x2:"3",y1:"12",y2:"12",key:"ntss68"}],["line",{x1:"21",x2:"16",y1:"20",y2:"20",key:"14d8ph"}],["line",{x1:"12",x2:"3",y1:"20",y2:"20",key:"m0wm8r"}],["line",{x1:"14",x2:"14",y1:"2",y2:"6",key:"14e1ph"}],["line",{x1:"8",x2:"8",y1:"10",y2:"14",key:"1i6ji0"}],["line",{x1:"16",x2:"16",y1:"18",y2:"22",key:"1lctlv"}]]);var o=a.i(96221),p=a.i(5522),q=a.i(40695),r=a.i(54161),s=a.i(87682),t=a.i(53071),u=a.i(41370),v=a.i(78560),w=a.i(88959);function x({categoryId:a}){let x=(0,u.getCategoryById)(a),[y,z]=(0,c.useState)([]),[A,B]=(0,c.useState)(!0),[C,D]=(0,c.useState)(""),[E,F]=(0,c.useState)("featured"),[G,H]=(0,c.useState)("grid"),[I,J]=(0,c.useState)([]);if((0,c.useEffect)(()=>{!async function(){if(x){B(!0);try{let b=(0,w.getCategoryUUID)(a);if(!b){console.error("Category UUID not found for:",a),B(!1);return}let{data:c,error:d}=await v.supabase.from("listings").select(`
            *,
            owner:user_profiles!owner_id(full_name, avatar_url)
          `).eq("category_id",b).eq("status","approved").in("availability_status",["available","rented"]);d?console.error("Error fetching listings:",d):z(c||[])}catch(a){console.error("Error:",a)}finally{B(!1)}}}()},[a,x]),!x)return null;let K=[...y.filter(a=>{let b=a.title.toLowerCase().includes(C.toLowerCase())||a.description?.toLowerCase().includes(C.toLowerCase()),c=0===I.length||a.features?.subcategory&&I.includes(a.features.subcategory);return b&&c})].sort((a,b)=>{switch(E){case"price-low":return Number(a.price_per_day)-Number(b.price_per_day);case"price-high":return Number(b.price_per_day)-Number(a.price_per_day);case"rating":return(b.rating_average||0)-(a.rating_average||0);case"newest":return new Date(b.created_at).getTime()-new Date(a.created_at).getTime();default:return b.is_featured?1:-1}}),L=()=>(0,b.jsxs)("div",{className:"space-y-6",children:[I.length>0&&(0,b.jsxs)("div",{children:[(0,b.jsx)("h4",{className:"font-semibold mb-3",children:"Selected Subcategories"}),(0,b.jsx)("div",{className:"flex flex-wrap gap-2",children:I.map(a=>(0,b.jsxs)(r.Badge,{variant:"secondary",className:"cursor-pointer hover:bg-destructive hover:text-destructive-foreground",onClick:()=>J(I.filter(b=>b!==a)),children:[a," Ã—"]},a))})]}),(0,b.jsx)(q.Button,{variant:"outline",className:"w-full bg-transparent",onClick:()=>J([]),children:"Clear Filters"})]});return(0,b.jsxs)("div",{className:"gradient-mesh min-h-screen",children:[(0,b.jsx)("section",{className:`py-12 px-4 bg-gradient-to-br ${x.color}`,children:(0,b.jsxs)("div",{className:"container mx-auto",children:[(0,b.jsxs)(d.default,{href:"/categories",className:"inline-flex items-center text-muted-foreground hover:text-foreground mb-6 transition-colors",children:[(0,b.jsx)(k.ArrowLeft,{className:"h-4 w-4 mr-2"}),"Back to Categories"]}),(0,b.jsxs)("div",{className:"flex flex-col lg:flex-row lg:items-end lg:justify-between gap-6",children:[(0,b.jsxs)("div",{className:"flex items-start gap-4",children:[(0,b.jsx)("div",{className:"w-16 h-16 rounded-xl bg-background/80 backdrop-blur-sm flex items-center justify-center",children:(0,b.jsx)(x.icon,{className:"h-8 w-8 text-primary"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-3xl sm:text-4xl font-bold mb-2",children:x.name}),(0,b.jsx)("p",{className:"text-muted-foreground max-w-xl",children:x.longDescription})]})]}),(0,b.jsxs)("div",{className:"text-right",children:[(0,b.jsx)("p",{className:"text-4xl font-bold text-primary",children:y.length}),(0,b.jsx)("p",{className:"text-muted-foreground",children:"items available"})]})]}),(0,b.jsxs)("div",{className:"mt-8",children:[(0,b.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Browse Subcategories"}),(0,b.jsx)("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-6 gap-3",children:x.subcategories.slice(0,12).map(a=>(0,b.jsxs)("button",{onClick:()=>{I.includes(a.name)?J(I.filter(b=>b!==a.name)):J([...I,a.name])},className:`group relative rounded-xl overflow-hidden aspect-square transition-all ${I.includes(a.name)?"ring-2 ring-primary ring-offset-2":"hover:ring-2 hover:ring-primary/50"}`,children:[(0,b.jsx)("img",{src:a.image||"/placeholder.svg",alt:a.name,className:"w-full h-full object-cover group-hover:scale-110 transition-transform duration-300"}),(0,b.jsx)("div",{className:"absolute inset-0 bg-gradient-to-t from-black/70 via-black/20 to-transparent"}),(0,b.jsx)("span",{className:"absolute bottom-2 left-2 right-2 text-white text-xs sm:text-sm font-medium truncate",children:a.name}),I.includes(a.name)&&(0,b.jsx)("div",{className:"absolute top-2 right-2 w-5 h-5 bg-primary rounded-full flex items-center justify-center",children:(0,b.jsx)("svg",{className:"w-3 h-3 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M5 13l4 4L19 7"})})})]},a.name))})]})]})}),(0,b.jsx)("section",{className:"sticky top-16 z-30 py-4 px-4 glass-card border-b border-border",children:(0,b.jsx)("div",{className:"container mx-auto",children:(0,b.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4",children:[(0,b.jsxs)("div",{className:"relative flex-1",children:[(0,b.jsx)(f.Search,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),(0,b.jsx)(p.Input,{placeholder:`Search ${x.name.toLowerCase()}...`,className:"pl-10",value:C,onChange:a=>D(a.target.value)})]}),(0,b.jsxs)(s.Select,{value:E,onValueChange:F,children:[(0,b.jsx)(s.SelectTrigger,{className:"w-full sm:w-48",children:(0,b.jsx)(s.SelectValue,{placeholder:"Sort by"})}),(0,b.jsxs)(s.SelectContent,{children:[(0,b.jsx)(s.SelectItem,{value:"featured",children:"Featured"}),(0,b.jsx)(s.SelectItem,{value:"price-low",children:"Price: Low to High"}),(0,b.jsx)(s.SelectItem,{value:"price-high",children:"Price: High to Low"}),(0,b.jsx)(s.SelectItem,{value:"rating",children:"Highest Rated"}),(0,b.jsx)(s.SelectItem,{value:"newest",children:"Newest First"})]})]}),(0,b.jsxs)("div",{className:"hidden sm:flex items-center gap-2",children:[(0,b.jsx)(q.Button,{variant:"grid"===G?"default":"ghost",size:"icon",onClick:()=>H("grid"),children:(0,b.jsx)(l.Grid3X3,{className:"h-4 w-4"})}),(0,b.jsx)(q.Button,{variant:"list"===G?"default":"ghost",size:"icon",onClick:()=>H("list"),children:(0,b.jsx)(m.List,{className:"h-4 w-4"})})]}),(0,b.jsxs)(t.Sheet,{children:[(0,b.jsx)(t.SheetTrigger,{asChild:!0,children:(0,b.jsxs)(q.Button,{variant:"outline",className:"lg:hidden bg-transparent",children:[(0,b.jsx)(n,{className:"h-4 w-4 mr-2"}),"Filters"]})}),(0,b.jsxs)(t.SheetContent,{children:[(0,b.jsx)(t.SheetHeader,{children:(0,b.jsx)(t.SheetTitle,{children:"Filters"})}),(0,b.jsx)("div",{className:"mt-6",children:(0,b.jsx)(L,{})})]})]})]})})}),(0,b.jsx)("section",{className:"py-8 px-4",children:(0,b.jsx)("div",{className:"container mx-auto",children:(0,b.jsxs)("div",{className:"flex gap-8",children:[(0,b.jsx)("aside",{className:"hidden lg:block w-72 shrink-0",children:(0,b.jsxs)("div",{className:"glass-card rounded-2xl p-6 sticky top-36",children:[(0,b.jsxs)("h3",{className:"font-semibold mb-4 flex items-center gap-2",children:[(0,b.jsx)(g.Filter,{className:"h-4 w-4"}),"Filters"]}),(0,b.jsx)(L,{})]})}),(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsxs)("p",{className:"text-muted-foreground mb-6",children:["Showing ",(0,b.jsx)("span",{className:"font-semibold text-foreground",children:K.length})," results",I.length>0&&(0,b.jsxs)("span",{className:"ml-2",children:["in ",(0,b.jsx)("span",{className:"text-primary font-medium",children:I.join(", ")})]})]}),A?(0,b.jsx)("div",{className:"flex justify-center items-center py-20",children:(0,b.jsx)(o.Loader2,{className:"h-8 w-8 animate-spin text-primary"})}):0===K.length?(0,b.jsxs)("div",{className:"text-center py-16 glass-card rounded-2xl",children:[(0,b.jsx)("p",{className:"text-xl font-semibold mb-2",children:"No listings found"}),(0,b.jsx)("p",{className:"text-muted-foreground",children:C||I.length>0?"Try adjusting your filters or search query":"Be the first to list in this category!"})]}):"grid"===G?(0,b.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 xl:grid-cols-3 gap-6",children:K.map(a=>(0,b.jsx)(d.default,{href:`/listings/${a.id}`,className:"group",children:(0,b.jsxs)("div",{className:"glass-card rounded-2xl overflow-hidden hover:shadow-xl transition-all duration-300",children:[(0,b.jsxs)("div",{className:"aspect-[4/3] relative overflow-hidden",children:[a.images&&a.images[0]?(0,b.jsx)(e.default,{src:a.images[0],alt:a.title,fill:!0,className:"object-cover group-hover:scale-105 transition-transform duration-500"}):(0,b.jsx)("div",{className:"w-full h-full bg-muted flex items-center justify-center",children:(0,b.jsx)("span",{className:"text-muted-foreground",children:"No image"})}),(0,b.jsx)(q.Button,{variant:"ghost",size:"icon",className:"absolute top-3 right-3 bg-white/80 backdrop-blur-sm hover:bg-white",onClick:a=>{a.preventDefault()},children:(0,b.jsx)(j.Heart,{className:"h-4 w-4"})}),a.is_featured&&(0,b.jsx)(r.Badge,{className:"absolute top-3 left-3 bg-primary",children:"Featured"})]}),(0,b.jsxs)("div",{className:"p-5",children:[(0,b.jsxs)("div",{className:"flex items-start justify-between mb-2",children:[(0,b.jsx)("h3",{className:"font-semibold line-clamp-1 group-hover:text-primary transition-colors",children:a.title}),a.is_verified&&(0,b.jsx)(r.Badge,{variant:"secondary",className:"text-xs shrink-0 ml-2",children:"Verified"})]}),(0,b.jsxs)("div",{className:"flex items-center text-sm text-muted-foreground mb-3",children:[(0,b.jsx)(h.MapPin,{className:"h-3 w-3 mr-1"}),a.location]}),(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsxs)("span",{className:"text-lg font-bold text-primary",children:[a.currency," ",Number(a.price_per_day).toLocaleString()]}),(0,b.jsx)("span",{className:"text-sm text-muted-foreground",children:"/day"})]}),(0,b.jsxs)("div",{className:"flex items-center",children:[(0,b.jsx)(i.Star,{className:"h-4 w-4 fill-yellow-500 text-yellow-500 mr-1"}),(0,b.jsx)("span",{className:"font-medium",children:a.rating_average||"New"}),a.rating_count>0&&(0,b.jsxs)("span",{className:"text-muted-foreground text-sm ml-1",children:["(",a.rating_count,")"]})]})]})]})]})},a.id))}):(0,b.jsx)("div",{className:"space-y-4",children:K.map(a=>(0,b.jsx)(d.default,{href:`/listings/${a.id}`,className:"group block",children:(0,b.jsx)("div",{className:"glass-card rounded-2xl p-4 hover:shadow-lg transition-all duration-300",children:(0,b.jsxs)("div",{className:"flex gap-6",children:[(0,b.jsx)("div",{className:"w-48 h-36 rounded-xl overflow-hidden shrink-0 relative",children:a.images&&a.images[0]?(0,b.jsx)(e.default,{src:a.images[0],alt:a.title,fill:!0,className:"object-cover group-hover:scale-105 transition-transform duration-500"}):(0,b.jsx)("div",{className:"w-full h-full bg-muted flex items-center justify-center",children:(0,b.jsx)("span",{className:"text-muted-foreground text-sm",children:"No image"})})}),(0,b.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,b.jsxs)("div",{className:"flex items-start justify-between mb-2",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"text-lg font-semibold group-hover:text-primary transition-colors",children:a.title}),(0,b.jsxs)("div",{className:"flex items-center text-sm text-muted-foreground",children:[(0,b.jsx)(h.MapPin,{className:"h-3 w-3 mr-1"}),a.location]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[a.is_featured&&(0,b.jsx)(r.Badge,{className:"bg-primary",children:"Featured"}),a.is_verified&&(0,b.jsx)(r.Badge,{variant:"secondary",children:"Verified"})]})]}),(0,b.jsx)("p",{className:"text-muted-foreground text-sm line-clamp-2 mb-3",children:a.description}),(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)("div",{className:"flex items-center gap-4",children:(0,b.jsxs)("div",{className:"flex items-center",children:[(0,b.jsx)(i.Star,{className:"h-4 w-4 fill-yellow-500 text-yellow-500 mr-1"}),(0,b.jsx)("span",{className:"font-medium",children:a.rating_average||"New"}),a.rating_count>0&&(0,b.jsxs)("span",{className:"text-muted-foreground text-sm ml-1",children:["(",a.rating_count," reviews)"]})]})}),(0,b.jsxs)("div",{className:"text-right",children:[(0,b.jsxs)("span",{className:"text-xl font-bold text-primary",children:[a.currency," ",Number(a.price_per_day).toLocaleString()]}),(0,b.jsx)("span",{className:"text-muted-foreground",children:"/day"})]})]})]})]})})},a.id))})]})]})})})]})}a.s(["CategoryDetailContent",()=>x],56117)}];

//# sourceMappingURL=components_categories_category-detail-content_tsx_7f3747d0._.js.map