module.exports=[87368,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(87532),e=a.i(81464),f=a.i(17755),g=a.i(77156);let h=(0,a.i(70106).default)("Ban",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m4.9 4.9 14.2 14.2",key:"1m5liu"}]]);var i=a.i(16201),j=a.i(92258),k=a.i(84505),l=a.i(17371),m=a.i(3130),n=a.i(5522),o=a.i(40695),p=a.i(54161),q=a.i(7706),r=a.i(76504),s=a.i(87682),t=a.i(88237),u=a.i(65733),v=a.i(78560);function w(){let[a,w]=(0,c.useState)(""),[x,y]=(0,c.useState)("all"),[z,A]=(0,c.useState)("all"),[B,C]=(0,c.useState)(null),[D,E]=(0,c.useState)([]),[F,G]=(0,c.useState)(!0),H=D.filter(b=>{let c=(b.fullName||"").toLowerCase().includes(a.toLowerCase())||(b.email||"").toLowerCase().includes(a.toLowerCase()),d="all"===x||b.role===x,e="all"===z||b.accountStatus===z;return c&&d&&e});(0,c.useEffect)(()=>{let a=!0;return async function(){G(!0);try{let{data:b,error:c}=await v.supabase.from("user_profiles").select("*");if(c)return void console.error("Error fetching user_profiles:",c);if(!a)return;let d=(b||[]).map(a=>({id:a.id,email:a.email,fullName:a.full_name??"",phone:a.phone??"",avatarUrl:a.avatar_url??null,role:a.role??"renter",accountStatus:a.account_status??"active",verificationStatus:a.verification_status??"pending",verificationDeadline:a.verification_deadline?new Date(a.verification_deadline):null,verificationDocuments:[],subscriptionPlan:a.subscription_plan??null,subscriptionExpiresAt:a.subscription_expires_at?new Date(a.subscription_expires_at):null,createdAt:a.created_at?new Date(a.created_at):new Date,updatedAt:a.updated_at?new Date(a.updated_at):new Date,lastLoginAt:a.last_login_at?new Date(a.last_login_at):null,affiliateCode:a.affiliate_code??null,referredBy:a.referred_by??null,totalReferrals:a.total_referrals??0,totalEarnings:a.total_earnings??0}));E(d)}finally{G(!1)}}(),()=>{a=!1}},[]);let I=a=>{switch(a){case"active":return(0,b.jsx)(p.Badge,{className:"bg-green-500/20 text-green-600 border-green-500/30",children:"Active"});case"pending_verification":return(0,b.jsx)(p.Badge,{className:"bg-orange-500/20 text-orange-600 border-orange-500/30",children:"Pending"});case"suspended":return(0,b.jsx)(p.Badge,{className:"bg-red-500/20 text-red-600 border-red-500/30",children:"Suspended"});case"banned":return(0,b.jsx)(p.Badge,{className:"bg-gray-500/20 text-gray-600 border-gray-500/30",children:"Banned"});default:return(0,b.jsx)(p.Badge,{variant:"outline",children:a})}},J=a=>{switch(a){case"admin":return(0,b.jsx)(p.Badge,{className:"bg-purple-500/20 text-purple-600 border-purple-500/30",children:"Admin"});case"owner":return(0,b.jsx)(p.Badge,{className:"bg-blue-500/20 text-blue-600 border-blue-500/30",children:"Owner"});case"affiliate":return(0,b.jsx)(p.Badge,{className:"bg-pink-500/20 text-pink-600 border-pink-500/30",children:"Affiliate"});case"renter":return(0,b.jsx)(p.Badge,{className:"bg-teal-500/20 text-teal-600 border-teal-500/30",children:"Renter"});default:return(0,b.jsx)(p.Badge,{variant:"outline",children:a})}};return(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-3xl font-bold",children:"Users"}),(0,b.jsx)("p",{className:"text-muted-foreground",children:"Manage all platform users"})]}),(0,b.jsxs)(o.Button,{className:"bg-primary text-primary-foreground",children:[(0,b.jsx)(l.UserPlus,{className:"h-4 w-4 mr-2"}),"Add User"]})]}),(0,b.jsx)(m.Card,{className:"glass-card",children:(0,b.jsx)(m.CardContent,{className:"pt-6",children:(0,b.jsxs)("div",{className:"flex flex-col md:flex-row gap-4",children:[(0,b.jsxs)("div",{className:"relative flex-1",children:[(0,b.jsx)(d.Search,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),(0,b.jsx)(n.Input,{placeholder:"Search by name or email...",className:"pl-10",value:a,onChange:a=>w(a.target.value)})]}),(0,b.jsxs)(s.Select,{value:x,onValueChange:y,children:[(0,b.jsx)(s.SelectTrigger,{className:"w-full md:w-40",children:(0,b.jsx)(s.SelectValue,{placeholder:"Role"})}),(0,b.jsxs)(s.SelectContent,{children:[(0,b.jsx)(s.SelectItem,{value:"all",children:"All Roles"}),(0,b.jsx)(s.SelectItem,{value:"renter",children:"Renter"}),(0,b.jsx)(s.SelectItem,{value:"owner",children:"Owner"}),(0,b.jsx)(s.SelectItem,{value:"affiliate",children:"Affiliate"}),(0,b.jsx)(s.SelectItem,{value:"admin",children:"Admin"})]})]}),(0,b.jsxs)(s.Select,{value:z,onValueChange:A,children:[(0,b.jsx)(s.SelectTrigger,{className:"w-full md:w-40",children:(0,b.jsx)(s.SelectValue,{placeholder:"Status"})}),(0,b.jsxs)(s.SelectContent,{children:[(0,b.jsx)(s.SelectItem,{value:"all",children:"All Status"}),(0,b.jsx)(s.SelectItem,{value:"active",children:"Active"}),(0,b.jsx)(s.SelectItem,{value:"pending_verification",children:"Pending"}),(0,b.jsx)(s.SelectItem,{value:"suspended",children:"Suspended"}),(0,b.jsx)(s.SelectItem,{value:"banned",children:"Banned"})]})]}),(0,b.jsxs)(o.Button,{variant:"outline",children:[(0,b.jsx)(e.Filter,{className:"h-4 w-4 mr-2"}),"More Filters"]}),(0,b.jsxs)(o.Button,{variant:"outline",children:[(0,b.jsx)(k.Download,{className:"h-4 w-4 mr-2"}),"Export"]})]})})}),(0,b.jsxs)(m.Card,{className:"glass-card",children:[(0,b.jsxs)(m.CardHeader,{children:[(0,b.jsxs)(m.CardTitle,{children:["All Users (",H.length,")"]}),(0,b.jsx)(m.CardDescription,{children:"Complete list of registered users on the platform"})]}),(0,b.jsx)(m.CardContent,{children:(0,b.jsxs)(t.Table,{children:[(0,b.jsx)(t.TableHeader,{children:(0,b.jsxs)(t.TableRow,{children:[(0,b.jsx)(t.TableHead,{children:"User"}),(0,b.jsx)(t.TableHead,{children:"Role"}),(0,b.jsx)(t.TableHead,{children:"Status"}),(0,b.jsx)(t.TableHead,{children:"Verification"}),(0,b.jsx)(t.TableHead,{children:"Joined"}),(0,b.jsx)(t.TableHead,{children:"Last Login"}),(0,b.jsx)(t.TableHead,{className:"text-right",children:"Actions"})]})}),(0,b.jsx)(t.TableBody,{children:H.map(a=>(0,b.jsxs)(t.TableRow,{children:[(0,b.jsx)(t.TableCell,{children:(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsxs)(q.Avatar,{children:[(0,b.jsx)(q.AvatarImage,{src:a.avatarUrl||void 0}),(0,b.jsx)(q.AvatarFallback,{children:a.fullName.split(" ").map(a=>a[0]).join("")})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"font-medium",children:a.fullName}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:a.email})]})]})}),(0,b.jsx)(t.TableCell,{children:J(a.role)}),(0,b.jsx)(t.TableCell,{children:I(a.accountStatus)}),(0,b.jsx)(t.TableCell,{children:(0,b.jsx)(p.Badge,{variant:"verified"===a.verificationStatus?"default":"submitted"===a.verificationStatus?"secondary":"outline",children:a.verificationStatus})}),(0,b.jsx)(t.TableCell,{className:"text-muted-foreground",children:a.createdAt.toLocaleDateString()}),(0,b.jsx)(t.TableCell,{className:"text-muted-foreground",children:a.lastLoginAt?.toLocaleDateString()||"Never"}),(0,b.jsx)(t.TableCell,{className:"text-right",children:(0,b.jsxs)(r.DropdownMenu,{children:[(0,b.jsx)(r.DropdownMenuTrigger,{asChild:!0,children:(0,b.jsx)(o.Button,{variant:"ghost",size:"icon",children:(0,b.jsx)(f.MoreHorizontal,{className:"h-4 w-4"})})}),(0,b.jsxs)(r.DropdownMenuContent,{align:"end",children:[(0,b.jsx)(r.DropdownMenuLabel,{children:"Actions"}),(0,b.jsx)(r.DropdownMenuSeparator,{}),(0,b.jsxs)(r.DropdownMenuItem,{onClick:()=>C(a),children:[(0,b.jsx)(g.Eye,{className:"h-4 w-4 mr-2"}),"View Details"]}),(0,b.jsxs)(r.DropdownMenuItem,{children:[(0,b.jsx)(j.Mail,{className:"h-4 w-4 mr-2"}),"Send Email"]}),(0,b.jsx)(r.DropdownMenuSeparator,{}),"suspended"===a.accountStatus?(0,b.jsxs)(r.DropdownMenuItem,{className:"text-green-600",children:[(0,b.jsx)(i.CheckCircle,{className:"h-4 w-4 mr-2"}),"Reactivate Account"]}):(0,b.jsxs)(r.DropdownMenuItem,{className:"text-destructive",children:[(0,b.jsx)(h,{className:"h-4 w-4 mr-2"}),"Suspend Account"]})]})]})})]},a.id))})]})})]}),(0,b.jsx)(u.Dialog,{open:!!B,onOpenChange:()=>C(null),children:(0,b.jsxs)(u.DialogContent,{className:"max-w-2xl",children:[(0,b.jsxs)(u.DialogHeader,{children:[(0,b.jsx)(u.DialogTitle,{children:"User Details"}),(0,b.jsx)(u.DialogDescription,{children:"Complete information about this user"})]}),B&&(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsxs)(q.Avatar,{className:"h-20 w-20",children:[(0,b.jsx)(q.AvatarImage,{src:B.avatarUrl||void 0}),(0,b.jsx)(q.AvatarFallback,{className:"text-2xl",children:B.fullName.split(" ").map(a=>a[0]).join("")})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"text-xl font-bold",children:B.fullName}),(0,b.jsx)("p",{className:"text-muted-foreground",children:B.email}),(0,b.jsxs)("div",{className:"flex gap-2 mt-2",children:[J(B.role),I(B.accountStatus)]})]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{className:"p-4 rounded-lg bg-secondary/50",children:[(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Phone"}),(0,b.jsx)("p",{className:"font-medium",children:B.phone})]}),(0,b.jsxs)("div",{className:"p-4 rounded-lg bg-secondary/50",children:[(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Verification Status"}),(0,b.jsx)("p",{className:"font-medium capitalize",children:B.verificationStatus})]}),(0,b.jsxs)("div",{className:"p-4 rounded-lg bg-secondary/50",children:[(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Joined"}),(0,b.jsx)("p",{className:"font-medium",children:B.createdAt.toLocaleDateString()})]}),(0,b.jsxs)("div",{className:"p-4 rounded-lg bg-secondary/50",children:[(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Last Login"}),(0,b.jsx)("p",{className:"font-medium",children:B.lastLoginAt?.toLocaleDateString()||"Never"})]}),"affiliate"===B.role&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("div",{className:"p-4 rounded-lg bg-secondary/50",children:[(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Affiliate Code"}),(0,b.jsx)("p",{className:"font-medium font-mono",children:B.affiliateCode})]}),(0,b.jsxs)("div",{className:"p-4 rounded-lg bg-secondary/50",children:[(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Total Referrals"}),(0,b.jsx)("p",{className:"font-medium",children:B.totalReferrals})]}),(0,b.jsxs)("div",{className:"p-4 rounded-lg bg-secondary/50 col-span-2",children:[(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Total Earnings"}),(0,b.jsxs)("p",{className:"font-medium text-lg",children:["KSh ",B.totalEarnings.toLocaleString()]})]})]}),("owner"===B.role||"affiliate"===B.role)&&B.verificationDeadline&&(0,b.jsxs)("div",{className:"p-4 rounded-lg bg-orange-500/10 border border-orange-500/30 col-span-2",children:[(0,b.jsx)("p",{className:"text-sm text-orange-600",children:"Verification Deadline"}),(0,b.jsx)("p",{className:"font-medium",children:B.verificationDeadline.toLocaleDateString()})]})]}),(0,b.jsxs)("div",{className:"flex gap-2 justify-end",children:[(0,b.jsx)(o.Button,{variant:"outline",children:"Send Email"}),"suspended"===B.accountStatus?(0,b.jsx)(o.Button,{className:"bg-green-600 hover:bg-green-700",children:"Reactivate Account"}):(0,b.jsx)(o.Button,{variant:"destructive",children:"Suspend Account"})]})]})]})})]})}a.s(["UsersManagement",()=>w],87368)}];

//# sourceMappingURL=components_admin_users-management_tsx_811f4951._.js.map