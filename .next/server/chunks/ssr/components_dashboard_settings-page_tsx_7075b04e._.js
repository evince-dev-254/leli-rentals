module.exports=[26754,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(50944),e=a.i(78560),f=a.i(42521),g=a.i(46842),h=a.i(23312),i=a.i(14548),j=a.i(11156),k=a.i(15618),l=a.i(92e3),m=a.i(96221),n=a.i(3130),o=a.i(40695),p=a.i(5522),q=a.i(17171),r=a.i(7379),s=a.i(21958),t=a.i(7706),u=a.i(46893),v=a.i(71294),w=a.i(80281),x=a.i(54161),y=a.i(89512);function z(){let a=(0,d.useRouter)(),[z,A]=(0,c.useState)(null),[B,C]=(0,c.useState)(!0),[D,E]=(0,c.useState)(!1),[F,G]=(0,c.useState)({full_name:"",email:"",phone:"",location:"",bio:""}),[H,I]=(0,c.useState)(""),[J,K]=(0,c.useState)("");(0,c.useEffect)(()=>{(async()=>{try{let{data:{user:a}}=await e.supabase.auth.getUser();if(a){let{data:b}=await e.supabase.from("user_profiles").select("*").eq("id",a.id).single(),c=a.user_metadata||{};A(b||{}),G({full_name:b?.full_name||c.full_name||c.name||"",email:b?.email||a.email||"",phone:b?.phone||a.phone||c.phone||"",location:b?.location||"",bio:b?.bio||""})}}catch(a){console.error("Error fetching profile:",a)}finally{C(!1)}})()},[]);let L=a=>{let{name:b,value:c}=a.target;G(a=>({...a,[b]:c}))},M=async()=>{E(!0);try{let{data:{user:a}}=await e.supabase.auth.getUser();if(!a)return;await (0,f.updateProfile)(a.id,{full_name:F.full_name,phone:F.phone,location:F.location,bio:F.bio}),alert("Profile updated successfully")}catch(a){console.error("Error updating profile:",a),alert("Failed to update profile")}finally{E(!1)}};return B?(0,b.jsx)("div",{className:"flex justify-center p-20",children:(0,b.jsx)(y.LoadingLogo,{size:60})}):(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-3xl font-bold",children:"Settings"}),(0,b.jsx)("p",{className:"text-muted-foreground",children:"Manage your account preferences"})]}),(0,b.jsxs)(s.Tabs,{defaultValue:"profile",className:"space-y-6",children:[(0,b.jsxs)(s.TabsList,{children:[(0,b.jsx)(s.TabsTrigger,{value:"profile",children:"Profile"}),(0,b.jsx)(s.TabsTrigger,{value:"notifications",children:"Notifications"}),(0,b.jsx)(s.TabsTrigger,{value:"security",children:"Security"}),(0,b.jsx)(s.TabsTrigger,{value:"payment",children:"Payment"})]}),(0,b.jsx)(s.TabsContent,{value:"profile",children:(0,b.jsxs)(n.Card,{className:"glass-card",children:[(0,b.jsxs)(n.CardHeader,{children:[(0,b.jsxs)(n.CardTitle,{className:"flex items-center gap-2",children:[(0,b.jsx)(g.User,{className:"h-5 w-5"}),"Profile Information"]}),(0,b.jsx)(n.CardDescription,{children:"Update your personal details"})]}),(0,b.jsxs)(n.CardContent,{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"p-4 rounded-lg bg-secondary/30 border border-border",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"font-semibold mb-1",children:"Account Type"}),(0,b.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Current: ",(0,b.jsx)("span",{className:"text-primary font-medium capitalize",children:z?.role||"Renter"})]})]}),(0,b.jsx)(o.Button,{variant:"outline",className:"bg-background",onClick:()=>a.push("/select-role"),children:"Switch Account Type"})]}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground mt-2",children:"Change your account type to access different features. Owners need an active subscription."})]}),(0,b.jsx)(r.Separator,{}),(0,b.jsxs)("div",{className:"flex items-center gap-6",children:[(0,b.jsxs)(t.Avatar,{className:"h-24 w-24",children:[(0,b.jsx)(t.AvatarImage,{src:z?.avatar_url||"/placeholder.svg"}),(0,b.jsx)(t.AvatarFallback,{children:z?.full_name?.[0]||"U"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("div",{className:"max-w-xs",children:(0,b.jsx)(v.ImageUpload,{folder:"/avatars",onSuccess:async a=>{try{let{data:{user:b}}=await e.supabase.auth.getUser();b&&(await (0,f.updateProfile)(b.id,{avatar_url:a.url}),A(b=>({...b||{},avatar_url:a.url})),alert("Profile photo updated!"))}catch(a){console.error("Error updating avatar",a)}},onError:a=>console.error(a),buttonText:"Change Photo",className:"w-full"})}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"JPG, PNG. Max 10MB"})]})]}),(0,b.jsx)(r.Separator,{}),(0,b.jsxs)("div",{className:"grid gap-4 md:grid-cols-2",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(q.Label,{children:"Full Name"}),(0,b.jsx)(p.Input,{name:"full_name",value:F.full_name,onChange:L})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(q.Label,{children:"Email"}),(0,b.jsx)(p.Input,{name:"email",value:F.email,disabled:!0,className:"bg-muted"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(q.Label,{children:"Phone"}),(0,b.jsx)(p.Input,{name:"phone",value:F.phone,onChange:L,placeholder:"+254..."})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(q.Label,{children:"Location"}),(0,b.jsx)(p.Input,{name:"location",value:F.location,onChange:L,placeholder:"City, Country"})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(q.Label,{children:"Bio"}),(0,b.jsx)(u.Textarea,{name:"bio",value:F.bio,onChange:L,placeholder:"Tell renters about yourself..."})]}),(0,b.jsxs)(o.Button,{className:"bg-primary text-primary-foreground",onClick:M,disabled:D,children:[D?(0,b.jsx)(m.Loader2,{className:"animate-spin mr-2 h-4 w-4"}):(0,b.jsx)(i.Save,{className:"h-4 w-4 mr-2"}),"Save Changes"]})]})]})}),(0,b.jsx)(s.TabsContent,{value:"notifications",children:(0,b.jsxs)(n.Card,{className:"glass-card",children:[(0,b.jsxs)(n.CardHeader,{children:[(0,b.jsxs)(n.CardTitle,{className:"flex items-center gap-2",children:[(0,b.jsx)(h.Bell,{className:"h-5 w-5"}),"Notifications"]}),(0,b.jsx)(n.CardDescription,{children:"Manage your notification preferences"})]}),(0,b.jsxs)(n.CardContent,{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"space-y-0.5",children:[(0,b.jsx)(q.Label,{className:"text-base",children:"Email Notifications"}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Receive emails about your bookings and account activity."})]}),(0,b.jsx)(w.Switch,{checked:!0,onCheckedChange:()=>{}})]}),(0,b.jsx)(r.Separator,{}),(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"space-y-0.5",children:[(0,b.jsx)(q.Label,{className:"text-base",children:"SMS Notifications"}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Receive text messages for urgent updates."})]}),(0,b.jsx)(w.Switch,{checked:!1,onCheckedChange:()=>{}})]}),(0,b.jsx)(r.Separator,{}),(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"space-y-0.5",children:[(0,b.jsx)(q.Label,{className:"text-base",children:"Marketing Emails"}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Receive news and special offers from Leli Rentals."})]}),(0,b.jsx)(w.Switch,{checked:!0,onCheckedChange:()=>{}})]})]})]})}),(0,b.jsx)(s.TabsContent,{value:"security",children:(0,b.jsxs)(n.Card,{className:"glass-card",children:[(0,b.jsxs)(n.CardHeader,{children:[(0,b.jsx)(n.CardTitle,{children:"Security"}),(0,b.jsx)(n.CardDescription,{children:"Manage your security settings"})]}),(0,b.jsxs)(n.CardContent,{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsx)("h3",{className:"font-medium",children:"Password"}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Ensure your account is using a long, random password to stay secure."}),(0,b.jsxs)("div",{className:"space-y-4 pt-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(q.Label,{htmlFor:"new-password",children:"New Password"}),(0,b.jsx)(p.Input,{id:"new-password",type:"password",placeholder:"Enter new password",value:H,onChange:a=>I(a.target.value)})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(q.Label,{htmlFor:"confirm-password",children:"Confirm Password"}),(0,b.jsx)(p.Input,{id:"confirm-password",type:"password",placeholder:"Confirm new password",value:J,onChange:a=>K(a.target.value)})]}),(0,b.jsx)(o.Button,{variant:"outline",onClick:async()=>{if(!H||H.length<6)return void alert("Password must be at least 6 characters");if(H!==J)return void alert("Passwords do not match");try{let{error:a}=await e.supabase.auth.updateUser({password:H});if(a)throw a;alert("Password updated successfully"),I(""),K("")}catch(a){console.error("Error updating password:",a),alert(a.message||"Failed to update password")}},disabled:!H||!J,children:"Update Password"})]})]}),(0,b.jsx)(r.Separator,{}),(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsx)("h3",{className:"font-medium",children:"Recent Activity"}),(0,b.jsx)("div",{className:"rounded-md border border-border",children:(0,b.jsxs)("div",{className:"p-4 flex items-center justify-between border-b border-border last:border-0",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"font-medium text-sm",children:"Login from Chrome on Linux"}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"Nairobi, Kenya • Just now"})]}),(0,b.jsx)(x.Badge,{variant:"outline",className:"text-green-600 bg-green-500/10 border-green-200",children:"Current Session"})]})})]})]})]})}),(0,b.jsx)(s.TabsContent,{value:"payment",children:(0,b.jsxs)(n.Card,{className:"glass-card",children:[(0,b.jsxs)(n.CardHeader,{children:[(0,b.jsx)(n.CardTitle,{children:"Payment Methods"}),(0,b.jsx)(n.CardDescription,{children:"Manage your saved payment methods"})]}),(0,b.jsxs)(n.CardContent,{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"grid gap-4 md:grid-cols-2",children:[(0,b.jsx)(n.Card,{className:"border border-primary bg-primary/5",children:(0,b.jsxs)(n.CardContent,{className:"p-4 flex flex-col justify-between h-32",children:[(0,b.jsxs)("div",{className:"flex justify-between items-start",children:[(0,b.jsx)(x.Badge,{variant:"outline",children:"Default"}),(0,b.jsx)(j.CreditCard,{className:"h-5 w-5 text-primary"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"font-medium",children:"•••• •••• •••• 4242"}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"Expires 12/28"})]})]})}),(0,b.jsx)(n.Card,{className:"border border-dashed border-muted-foreground/30 flex items-center justify-center h-32 hover:bg-muted/20 cursor-pointer transition-colors",children:(0,b.jsxs)("div",{className:"flex flex-col items-center gap-2 text-muted-foreground",children:[(0,b.jsx)(k.Plus,{className:"h-6 w-6"}),(0,b.jsx)("span",{className:"text-sm font-medium",children:"Add Payment Method"})]})})]}),(0,b.jsxs)("div",{className:"bg-blue-500/10 p-4 rounded-lg flex gap-3 text-sm text-blue-600",children:[(0,b.jsx)(l.AlertCircle,{className:"h-5 w-5 shrink-0"}),(0,b.jsx)("p",{children:"Your payment information is securely stored with Paystack. Leli Rentals does not store your full card details."})]})]})]})})]})]})}a.s(["SettingsPage",()=>z])}];

//# sourceMappingURL=components_dashboard_settings-page_tsx_7075b04e._.js.map