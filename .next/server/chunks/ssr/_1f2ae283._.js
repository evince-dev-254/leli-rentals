module.exports=[3130,a=>{"use strict";var b=a.i(87924),c=a.i(97895);function d({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"card",className:(0,c.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",a),...d})}function e({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"card-header",className:(0,c.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-2 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",a),...d})}function f({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"card-title",className:(0,c.cn)("leading-none font-semibold",a),...d})}function g({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"card-description",className:(0,c.cn)("text-muted-foreground text-sm",a),...d})}function h({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"card-content",className:(0,c.cn)("px-6",a),...d})}a.s(["Card",()=>d,"CardContent",()=>h,"CardDescription",()=>g,"CardHeader",()=>e,"CardTitle",()=>f])},16201,a=>{"use strict";let b=(0,a.i(70106).default)("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);a.s(["CheckCircle",()=>b],16201)},41710,a=>{"use strict";let b=(0,a.i(70106).default)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);a.s(["Clock",()=>b],41710)},90166,a=>{"use strict";let b=(0,a.i(70106).default)("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);a.s(["DollarSign",()=>b],90166)},88237,a=>{"use strict";var b=a.i(87924),c=a.i(97895);function d({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"table-container",className:"relative w-full overflow-x-auto",children:(0,b.jsx)("table",{"data-slot":"table",className:(0,c.cn)("w-full caption-bottom text-sm",a),...d})})}function e({className:a,...d}){return(0,b.jsx)("thead",{"data-slot":"table-header",className:(0,c.cn)("[&_tr]:border-b",a),...d})}function f({className:a,...d}){return(0,b.jsx)("tbody",{"data-slot":"table-body",className:(0,c.cn)("[&_tr:last-child]:border-0",a),...d})}function g({className:a,...d}){return(0,b.jsx)("tr",{"data-slot":"table-row",className:(0,c.cn)("hover:bg-muted/50 data-[state=selected]:bg-muted border-b transition-colors",a),...d})}function h({className:a,...d}){return(0,b.jsx)("th",{"data-slot":"table-head",className:(0,c.cn)("text-foreground h-10 px-2 text-left align-middle font-medium whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",a),...d})}function i({className:a,...d}){return(0,b.jsx)("td",{"data-slot":"table-cell",className:(0,c.cn)("p-2 align-middle whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",a),...d})}a.s(["Table",()=>d,"TableBody",()=>f,"TableCell",()=>i,"TableHead",()=>h,"TableHeader",()=>e,"TableRow",()=>g])},27087,a=>{"use strict";var b=a.i(87924),c=a.i(27999),d=a.i(90166),e=a.i(41710),f=a.i(16201),g=a.i(3130),h=a.i(54161),i=a.i(88237),j=a.i(72131),k=a.i(78560);function l(){let[a,l]=(0,j.useState)([]),[m,n]=(0,j.useState)([]),[o,p]=(0,j.useState)([]);(0,j.useEffect)(()=>{let a=!0;return async function(){try{let{data:b,error:c}=await k.supabase.from("bookings").select("*");if(c)return void console.error("Error fetching bookings:",c);let d=Array.from(new Set((b||[]).map(a=>a.listing_id).filter(Boolean))),e=Array.from(new Set((b||[]).map(a=>a.renter_id).concat((b||[]).map(a=>a.owner_id)).filter(Boolean))),f=[],g=[];if(d.length>0||e.length>0){let a=[];d.length>0?a.push(k.supabase.from("listings").select("*").in("id",d)):a.push(Promise.resolve({data:[],error:null})),e.length>0?a.push(k.supabase.from("user_profiles").select("*").in("id",e)):a.push(Promise.resolve({data:[],error:null}));let[b,c]=await Promise.all(a);b.error&&console.error("Error fetching listings for bookings:",b.error),c.error&&console.error("Error fetching users for bookings:",c.error),f=b.data||[],g=c.data||[]}if(!a)return;l(b||[]),n(f||[]),p(g||[])}catch(a){console.error(a)}}(),()=>{a=!1}},[]);let q=a=>o.find(b=>b.id===a);return(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-3xl font-bold",children:"Bookings"}),(0,b.jsx)("p",{className:"text-muted-foreground",children:"Monitor and manage all rental bookings"})]}),(0,b.jsxs)("div",{className:"grid gap-4 md:grid-cols-4",children:[(0,b.jsx)(g.Card,{className:"glass-card",children:(0,b.jsx)(g.CardContent,{className:"pt-6",children:(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsx)("div",{className:"p-3 rounded-full bg-blue-500/20",children:(0,b.jsx)(c.CalendarCheck,{className:"h-6 w-6 text-blue-500"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-2xl font-bold",children:a.length}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Total Bookings"})]})]})})}),(0,b.jsx)(g.Card,{className:"glass-card",children:(0,b.jsx)(g.CardContent,{className:"pt-6",children:(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsx)("div",{className:"p-3 rounded-full bg-green-500/20",children:(0,b.jsx)(f.CheckCircle,{className:"h-6 w-6 text-green-500"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-2xl font-bold",children:a.filter(a=>"confirmed"===a.status).length}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Confirmed"})]})]})})}),(0,b.jsx)(g.Card,{className:"glass-card",children:(0,b.jsx)(g.CardContent,{className:"pt-6",children:(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsx)("div",{className:"p-3 rounded-full bg-orange-500/20",children:(0,b.jsx)(e.Clock,{className:"h-6 w-6 text-orange-500"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-2xl font-bold",children:a.filter(a=>"pending"===a.status).length}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Pending"})]})]})})}),(0,b.jsx)(g.Card,{className:"glass-card",children:(0,b.jsx)(g.CardContent,{className:"pt-6",children:(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsx)("div",{className:"p-3 rounded-full bg-primary/20",children:(0,b.jsx)(d.DollarSign,{className:"h-6 w-6 text-primary"})}),(0,b.jsxs)("div",{children:[(0,b.jsxs)("p",{className:"text-2xl font-bold",children:["KSh ",a.reduce((a,b)=>a+Number(b.total_amount||0),0).toLocaleString()]}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Total Revenue"})]})]})})})]}),(0,b.jsxs)(g.Card,{className:"glass-card",children:[(0,b.jsxs)(g.CardHeader,{children:[(0,b.jsx)(g.CardTitle,{children:"All Bookings"}),(0,b.jsx)(g.CardDescription,{children:"Complete list of all rental bookings"})]}),(0,b.jsx)(g.CardContent,{children:(0,b.jsxs)(i.Table,{children:[(0,b.jsx)(i.TableHeader,{children:(0,b.jsxs)(i.TableRow,{children:[(0,b.jsx)(i.TableHead,{children:"Booking ID"}),(0,b.jsx)(i.TableHead,{children:"Listing"}),(0,b.jsx)(i.TableHead,{children:"Renter"}),(0,b.jsx)(i.TableHead,{children:"Owner"}),(0,b.jsx)(i.TableHead,{children:"Dates"}),(0,b.jsx)(i.TableHead,{children:"Amount"}),(0,b.jsx)(i.TableHead,{children:"Status"}),(0,b.jsx)(i.TableHead,{children:"Payment"})]})}),(0,b.jsx)(i.TableBody,{children:a.map(a=>{let c,d=(c=a.listing_id,m.find(a=>a.id===c)),e=q(a.renter_id),f=q(a.owner_id),g=a.start_date?new Date(a.start_date):null,j=a.end_date?new Date(a.end_date):null;return(0,b.jsxs)(i.TableRow,{children:[(0,b.jsxs)(i.TableCell,{className:"font-mono text-sm",children:[a.id.substring(0,8),"..."]}),(0,b.jsx)(i.TableCell,{className:"font-medium",children:d?.title||"N/A"}),(0,b.jsx)(i.TableCell,{children:e?.full_name||"N/A"}),(0,b.jsx)(i.TableCell,{children:f?.full_name||"N/A"}),(0,b.jsx)(i.TableCell,{className:"text-sm",children:g&&j?`${g.toLocaleDateString()} - ${j.toLocaleDateString()}`:"N/A"}),(0,b.jsxs)(i.TableCell,{children:["KSh ",Number(a.total_amount||0).toLocaleString()]}),(0,b.jsx)(i.TableCell,{children:(0,b.jsx)(h.Badge,{className:"confirmed"===a.status?"bg-green-500/20 text-green-600":"pending"===a.status?"bg-orange-500/20 text-orange-600":"bg-blue-500/20 text-blue-600",children:a.status})}),(0,b.jsx)(i.TableCell,{children:(0,b.jsx)(h.Badge,{className:"paid"===a.payment_status?"bg-green-500/20 text-green-600":"bg-orange-500/20 text-orange-600",children:a.payment_status||"pending"})})]},a.id)})})]})})]})]})}a.s(["BookingsManagement",()=>l])}];

//# sourceMappingURL=_1f2ae283._.js.map