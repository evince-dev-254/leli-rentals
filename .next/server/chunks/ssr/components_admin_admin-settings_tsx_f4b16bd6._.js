module.exports=[90923,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(14548),e=a.i(23312),f=a.i(3314),g=a.i(11156),h=a.i(44494);let i=(0,a.i(70106).default)("UserCog",[["circle",{cx:"18",cy:"15",r:"3",key:"gjjjvw"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M10 15H6a4 4 0 0 0-4 4v2",key:"1nfge6"}],["path",{d:"m21.7 16.4-.9-.3",key:"12j9ji"}],["path",{d:"m15.2 13.9-.9-.3",key:"1fdjdi"}],["path",{d:"m16.6 18.7.3-.9",key:"heedtr"}],["path",{d:"m19.1 12.2.3-.9",key:"1af3ki"}],["path",{d:"m19.6 18.7-.4-1",key:"1x9vze"}],["path",{d:"m16.8 12.3-.4-1",key:"vqeiwj"}],["path",{d:"m14.3 16.6 1-.4",key:"1qlj63"}],["path",{d:"m20.7 13.8 1-.4",key:"1v5t8k"}]]);var j=a.i(15618),k=a.i(81560),l=a.i(87532),m=a.i(77156),n=a.i(41379),o=a.i(96221),p=a.i(3130),q=a.i(5522),r=a.i(40695),s=a.i(17171),t=a.i(80281),u=a.i(7379),v=a.i(21958),w=a.i(7706),x=a.i(42521),y=a.i(23292),z=a.i(78560);function A(){let[a,A]=(0,c.useState)([]),[B,C]=(0,c.useState)(""),[D,E]=(0,c.useState)(!0),[F,G]=(0,c.useState)(null),[H,I]=(0,c.useState)({}),[J,K]=(0,c.useState)(!0),[L,M]=(0,c.useState)(!1),[N,O]=(0,c.useState)(!1),[P,Q]=(0,c.useState)(!1),[R,S]=(0,c.useState)(""),[T,U]=(0,c.useState)("");(0,c.useEffect)(()=>{X(),V(),Y()},[]);let V=async()=>{let{data:{user:a}}=await z.supabase.auth.getUser();a&&G(a.email??null)},W=async()=>{if(!R||R.length<6)return void y.toast.error("Password must be at least 6 characters");if(R!==T)return void y.toast.error("Passwords do not match");try{let{error:a}=await z.supabase.auth.updateUser({password:R});if(a)throw a;y.toast.success("Password updated successfully"),S(""),U("")}catch(a){console.error("Error updating password:",a),y.toast.error(a.message||"Failed to update password")}},X=async()=>{try{let a=await (0,x.getAdmins)();A(a||[])}catch(a){console.error("Error loading admins:",a),y.toast.error("Failed to load admins")}finally{E(!1)}},Y=async()=>{try{K(!0);let{data:a,error:b}=await z.supabase.from("admin_settings").select("*");if(b)throw b;let c={};a?.forEach(a=>{c[a.key]=a.value}),I(c)}catch(a){console.error("Error loading settings:",a)}finally{K(!1)}},Z=(a,b)=>{I(c=>({...c,[a]:b}))},$=async()=>{try{M(!0);let a=Object.entries(H).map(([a,b])=>({key:a,value:b,updated_at:new Date().toISOString()})),{error:b}=await z.supabase.from("admin_settings").upsert(a);if(b)throw b;y.toast.success("Settings saved successfully")}catch(a){console.error("Error saving settings:",a),y.toast.error("Failed to save settings")}finally{M(!1)}},_=async()=>{if(B)try{let a=await (0,x.getUserByEmail)(B);if(!a)return void y.toast.error("User with this email not found");if(a.is_admin||"admin"===a.role){y.toast.info("User is already an admin"),C("");return}await (0,x.updateProfile)(a.id,{is_admin:!0}),y.toast.success(`${a.email} promoted to admin`),C(""),X()}catch(a){console.error("Error adding admin:",a),y.toast.error("Failed to add admin")}},aa=async(b,c)=>{if(c===F)return void y.toast.error("You cannot remove yourself from admins");if(confirm(`Are you sure you want to remove admin rights from ${c}?`))try{let d=a.find(a=>a.id===b),e={is_admin:!1};d?.role==="admin"&&(e.role="renter"),await (0,x.updateProfile)(b,e),y.toast.success(`${c} removed from admins`),X()}catch(a){console.error("Error removing admin:",a),y.toast.error("Failed to remove admin")}};return(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-3xl font-bold",children:"Settings"}),(0,b.jsx)("p",{className:"text-muted-foreground",children:"Configure platform settings and preferences"})]}),(0,b.jsxs)(v.Tabs,{defaultValue:"general",className:"space-y-4",children:[(0,b.jsxs)(v.TabsList,{children:[(0,b.jsx)(v.TabsTrigger,{value:"general",children:"General"}),(0,b.jsx)(v.TabsTrigger,{value:"security",children:"Security"}),(0,b.jsx)(v.TabsTrigger,{value:"admins",children:"Admins"}),(0,b.jsx)(v.TabsTrigger,{value:"verification",children:"Verification"}),(0,b.jsx)(v.TabsTrigger,{value:"notifications",children:"Notifications"}),(0,b.jsx)(v.TabsTrigger,{value:"payments",children:"Payments"})]}),(0,b.jsx)(v.TabsContent,{value:"security",children:(0,b.jsxs)(p.Card,{className:"glass-card",children:[(0,b.jsxs)(p.CardHeader,{children:[(0,b.jsxs)(p.CardTitle,{className:"flex items-center gap-2",children:[(0,b.jsx)(f.Shield,{className:"h-5 w-5"}),"Security"]}),(0,b.jsx)(p.CardDescription,{children:"Manage your account security"})]}),(0,b.jsx)(p.CardContent,{className:"space-y-6",children:(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsx)("h3",{className:"font-medium",children:"Change Password"}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Update your password to keep your account secure."}),(0,b.jsxs)("div",{className:"grid gap-4 max-w-md",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(s.Label,{htmlFor:"admin-new-password",children:"New Password"}),(0,b.jsx)(q.Input,{id:"admin-new-password",type:"password",placeholder:"Enter new password",value:R,onChange:a=>S(a.target.value)})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(s.Label,{htmlFor:"admin-confirm-password",children:"Confirm Password"}),(0,b.jsx)(q.Input,{id:"admin-confirm-password",type:"password",placeholder:"Confirm new password",value:T,onChange:a=>U(a.target.value)})]}),(0,b.jsx)(r.Button,{onClick:W,disabled:!R||!T,children:"Update Password"})]})]})})]})}),(0,b.jsx)(v.TabsContent,{value:"general",children:(0,b.jsxs)(p.Card,{className:"glass-card",children:[(0,b.jsxs)(p.CardHeader,{children:[(0,b.jsxs)(p.CardTitle,{className:"flex items-center gap-2",children:[(0,b.jsx)(h.Globe,{className:"h-5 w-5"}),"General Settings"]}),(0,b.jsx)(p.CardDescription,{children:"Basic platform configuration"})]}),(0,b.jsxs)(p.CardContent,{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"grid gap-4 md:grid-cols-2",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(s.Label,{htmlFor:"site-name",children:"Site Name"}),(0,b.jsx)(q.Input,{id:"site-name",value:H.site_name||"",onChange:a=>Z("site_name",a.target.value),placeholder:"Leli Rentals"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(s.Label,{htmlFor:"support-email",children:"Support Email"}),(0,b.jsx)(q.Input,{id:"support-email",value:H.support_email||"",onChange:a=>Z("support_email",a.target.value),placeholder:"support@lelirentals.com"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(s.Label,{htmlFor:"support-phone",children:"Support Phone"}),(0,b.jsx)(q.Input,{id:"support-phone",value:H.support_phone||"",onChange:a=>Z("support_phone",a.target.value),placeholder:"+254..."})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(s.Label,{htmlFor:"default-currency",children:"Default Currency"}),(0,b.jsx)(q.Input,{id:"default-currency",value:H.default_currency||"",onChange:a=>Z("default_currency",a.target.value),placeholder:"KSh"})]})]}),(0,b.jsxs)(r.Button,{onClick:$,disabled:L,className:"bg-primary text-primary-foreground",children:[L?(0,b.jsx)(o.Loader2,{className:"h-4 w-4 mr-2 animate-spin"}):(0,b.jsx)(d.Save,{className:"h-4 w-4 mr-2"}),"Save Changes"]})]})]})}),(0,b.jsx)(v.TabsContent,{value:"admins",children:(0,b.jsxs)(p.Card,{className:"glass-card",children:[(0,b.jsxs)(p.CardHeader,{children:[(0,b.jsxs)(p.CardTitle,{className:"flex items-center gap-2",children:[(0,b.jsx)(i,{className:"h-5 w-5"}),"Manage Admins"]}),(0,b.jsx)(p.CardDescription,{children:"View and manage administrators with access to this dashboard"})]}),(0,b.jsxs)(p.CardContent,{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"flex gap-4 items-end",children:[(0,b.jsxs)("div",{className:"flex-1 space-y-2",children:[(0,b.jsx)(s.Label,{htmlFor:"new-admin-email",children:"Add New Admin"}),(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)(l.Search,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),(0,b.jsx)(q.Input,{id:"new-admin-email",placeholder:"Enter user email address...",className:"pl-10",value:B,onChange:a=>C(a.target.value)})]})]}),(0,b.jsxs)(r.Button,{onClick:_,disabled:!B,children:[(0,b.jsx)(j.Plus,{className:"h-4 w-4 mr-2"}),"Add Admin"]})]}),(0,b.jsx)(u.Separator,{}),(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsx)("h4",{className:"font-medium",children:"Current Admins"}),D?(0,b.jsx)("p",{className:"text-muted-foreground",children:"Loading admins..."}):(0,b.jsx)("div",{className:"grid gap-4",children:a.map(a=>(0,b.jsxs)("div",{className:"flex items-center justify-between p-4 rounded-lg border border-border bg-card/50",children:[(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsxs)(w.Avatar,{children:[(0,b.jsx)(w.AvatarImage,{src:a.avatar_url||void 0}),(0,b.jsx)(w.AvatarFallback,{children:a.full_name?.split(" ").map(a=>a[0]).join("")||"U"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"font-medium",children:a.full_name||"Unknown Name"}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:a.email})]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[a.email===F&&(0,b.jsx)("span",{className:"text-xs text-muted-foreground bg-secondary px-2 py-1 rounded",children:"You"}),(0,b.jsx)(r.Button,{variant:"ghost",size:"icon",className:"text-destructive hover:text-destructive hover:bg-destructive/10",onClick:()=>aa(a.id,a.email),disabled:a.email===F,children:(0,b.jsx)(k.Trash2,{className:"h-4 w-4"})})]})]},a.id))})]})]})]})}),(0,b.jsx)(v.TabsContent,{value:"verification",children:(0,b.jsxs)(p.Card,{className:"glass-card",children:[(0,b.jsxs)(p.CardHeader,{children:[(0,b.jsxs)(p.CardTitle,{className:"flex items-center gap-2",children:[(0,b.jsx)(f.Shield,{className:"h-5 w-5"}),"Verification Settings"]}),(0,b.jsx)(p.CardDescription,{children:"Configure user verification requirements"})]}),(0,b.jsxs)(p.CardContent,{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"font-medium",children:"Require Owner Verification"}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Owners must submit documents before listing items"})]}),(0,b.jsx)(t.Switch,{defaultChecked:!0})]}),(0,b.jsx)(u.Separator,{}),(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"font-medium",children:"Require Affiliate Verification"}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Affiliates must verify identity before earning commissions"})]}),(0,b.jsx)(t.Switch,{defaultChecked:!0})]}),(0,b.jsx)(u.Separator,{}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(s.Label,{htmlFor:"verification-deadline",children:"Verification Deadline (Days)"}),(0,b.jsx)(q.Input,{id:"verification-deadline",type:"number",defaultValue:"5",className:"w-32"}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Days allowed for document submission before account suspension"})]}),(0,b.jsx)(u.Separator,{}),(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"font-medium",children:"Auto-suspend on Deadline"}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Automatically suspend accounts that miss verification deadline"})]}),(0,b.jsx)(t.Switch,{defaultChecked:!0})]})]}),(0,b.jsxs)(r.Button,{onClick:()=>y.toast.success("Verification settings saved"),className:"bg-primary text-primary-foreground",children:[(0,b.jsx)(d.Save,{className:"h-4 w-4 mr-2"}),"Save Changes"]})]})]})}),(0,b.jsx)(v.TabsContent,{value:"notifications",children:(0,b.jsxs)(p.Card,{className:"glass-card",children:[(0,b.jsxs)(p.CardHeader,{children:[(0,b.jsxs)(p.CardTitle,{className:"flex items-center gap-2",children:[(0,b.jsx)(e.Bell,{className:"h-5 w-5"}),"Notification Settings"]}),(0,b.jsx)(p.CardDescription,{children:"Configure email and system notifications"})]}),(0,b.jsxs)(p.CardContent,{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"font-medium",children:"New User Registration"}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Notify admin when new users register"})]}),(0,b.jsx)(t.Switch,{defaultChecked:!0})]}),(0,b.jsx)(u.Separator,{}),(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"font-medium",children:"Verification Document Submitted"}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Notify when documents are uploaded"})]}),(0,b.jsx)(t.Switch,{defaultChecked:!0})]}),(0,b.jsx)(u.Separator,{}),(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"font-medium",children:"Verification Deadline Warning"}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Send reminder emails before deadline"})]}),(0,b.jsx)(t.Switch,{defaultChecked:!0})]}),(0,b.jsx)(u.Separator,{}),(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"font-medium",children:"Account Suspension"}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Notify when accounts are suspended"})]}),(0,b.jsx)(t.Switch,{defaultChecked:!0})]})]}),(0,b.jsxs)(r.Button,{onClick:()=>y.toast.success("Notification settings saved"),className:"bg-primary text-primary-foreground",children:[(0,b.jsx)(d.Save,{className:"h-4 w-4 mr-2"}),"Save Changes"]})]})]})}),(0,b.jsx)(v.TabsContent,{value:"payments",children:(0,b.jsxs)(p.Card,{className:"glass-card",children:[(0,b.jsxs)(p.CardHeader,{children:[(0,b.jsxs)(p.CardTitle,{className:"flex items-center gap-2",children:[(0,b.jsx)(g.CreditCard,{className:"h-5 w-5"}),"Payment Settings"]}),(0,b.jsx)(p.CardDescription,{children:"Configure Paystack and subscription plans"})]}),(0,b.jsxs)(p.CardContent,{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(s.Label,{htmlFor:"paystack-public",children:"Paystack Public Key"}),(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)(q.Input,{id:"paystack-public",type:N?"text":"password",value:H.paystack_public_key||"",onChange:a=>Z("paystack_public_key",a.target.value),placeholder:"pk_live_...",className:"pr-10"}),(0,b.jsxs)(r.Button,{type:"button",variant:"ghost",size:"icon",className:"absolute right-0 top-0 h-full px-3 py-2 hover:bg-transparent",onClick:()=>O(!N),children:[N?(0,b.jsx)(n.EyeOff,{className:"h-4 w-4 text-muted-foreground"}):(0,b.jsx)(m.Eye,{className:"h-4 w-4 text-muted-foreground"}),(0,b.jsx)("span",{className:"sr-only",children:"Toggle public key visibility"})]})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(s.Label,{htmlFor:"paystack-secret",children:"Paystack Secret Key"}),(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)(q.Input,{id:"paystack-secret",type:P?"text":"password",value:H.paystack_secret_key||"",onChange:a=>Z("paystack_secret_key",a.target.value),placeholder:"sk_live_...",className:"pr-10"}),(0,b.jsxs)(r.Button,{type:"button",variant:"ghost",size:"icon",className:"absolute right-0 top-0 h-full px-3 py-2 hover:bg-transparent",onClick:()=>Q(!P),children:[P?(0,b.jsx)(n.EyeOff,{className:"h-4 w-4 text-muted-foreground"}):(0,b.jsx)(m.Eye,{className:"h-4 w-4 text-muted-foreground"}),(0,b.jsx)("span",{className:"sr-only",children:"Toggle secret key visibility"})]})]})]})]}),(0,b.jsx)(u.Separator,{}),(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsx)("h4",{className:"font-medium",children:"Subscription Plans"}),(0,b.jsxs)("div",{className:"grid gap-4 md:grid-cols-2",children:[(0,b.jsxs)("div",{className:"p-4 rounded-lg border border-border space-y-3",children:[(0,b.jsx)("p",{className:"font-medium",children:"Weekly Plan"}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(s.Label,{htmlFor:"weekly-price",children:"Price (KSh)"}),(0,b.jsx)(q.Input,{id:"weekly-price",type:"number",value:H.weekly_plan_price||"500",onChange:a=>Z("weekly_plan_price",a.target.value)})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(s.Label,{htmlFor:"weekly-listings",children:"Listing Limit"}),(0,b.jsx)(q.Input,{id:"weekly-listings",type:"number",value:H.weekly_plan_limit||"10",onChange:a=>Z("weekly_plan_limit",a.target.value)})]})]}),(0,b.jsxs)("div",{className:"p-4 rounded-lg border border-border space-y-3",children:[(0,b.jsx)("p",{className:"font-medium",children:"Monthly Plan"}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(s.Label,{htmlFor:"monthly-price",children:"Price (KSh)"}),(0,b.jsx)(q.Input,{id:"monthly-price",type:"number",value:H.monthly_plan_price||"1000",onChange:a=>Z("monthly_plan_price",a.target.value)})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(s.Label,{htmlFor:"monthly-listings",children:"Listing Limit"}),(0,b.jsx)(q.Input,{id:"monthly-listings",value:H.monthly_plan_limit||"Unlimited",onChange:a=>Z("monthly_plan_limit",a.target.value)})]})]})]})]}),(0,b.jsx)(u.Separator,{}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(s.Label,{htmlFor:"affiliate-commission",children:"Affiliate Commission Rate (%)"}),(0,b.jsx)(q.Input,{id:"affiliate-commission",type:"number",value:H.affiliate_commission_rate||"15",onChange:a=>Z("affiliate_commission_rate",a.target.value),className:"w-32"})]}),(0,b.jsxs)(r.Button,{onClick:$,disabled:L,className:"bg-primary text-primary-foreground",children:[L?(0,b.jsx)(o.Loader2,{className:"h-4 w-4 mr-2 animate-spin"}):(0,b.jsx)(d.Save,{className:"h-4 w-4 mr-2"}),"Save Changes"]})]})]})})]})]})}a.s(["AdminSettings",()=>A],90923)}];

//# sourceMappingURL=components_admin_admin-settings_tsx_f4b16bd6._.js.map