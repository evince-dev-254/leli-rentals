module.exports=[97942,22262,a=>{"use strict";let b,c,d;var e=a.i(72131),f=a.i(7554),g=a.i(70121),h=a.i(50104),i=a.i(92843),j=a.i(25152),k=a.i(96743),l=a.i(22297),m=a.i(92616),n=a.i(77192),o=a.i(30553),p=a.i(86228),q=a.i(52081),r=a.i(41852),s=a.i(87924),t=Symbol("radix.slottable");function u(a){return e.isValidElement(a)&&"function"==typeof a.type&&"__radixId"in a.type&&a.type.__radixId===t}var v="Dialog",[w,x]=(0,h.createContextScope)(v),[y,z]=w(v),A=a=>{let{__scopeDialog:b,children:c,open:d,defaultOpen:f,onOpenChange:g,modal:h=!0}=a,k=e.useRef(null),l=e.useRef(null),[m,n]=(0,j.useControllableState)({prop:d,defaultProp:f??!1,onChange:g,caller:v});return(0,s.jsx)(y,{scope:b,triggerRef:k,contentRef:l,contentId:(0,i.useId)(),titleId:(0,i.useId)(),descriptionId:(0,i.useId)(),open:m,onOpenChange:n,onOpenToggle:e.useCallback(()=>n(a=>!a),[n]),modal:h,children:c})};A.displayName=v;var B="DialogTrigger",C=e.forwardRef((a,b)=>{let{__scopeDialog:c,...d}=a,e=z(B,c),h=(0,g.useComposedRefs)(b,e.triggerRef);return(0,s.jsx)(o.Primitive.button,{type:"button","aria-haspopup":"dialog","aria-expanded":e.open,"aria-controls":e.contentId,"data-state":W(e.open),...d,ref:h,onClick:(0,f.composeEventHandlers)(a.onClick,e.onOpenToggle)})});C.displayName=B;var D="DialogPortal",[E,F]=w(D,{forceMount:void 0}),G=a=>{let{__scopeDialog:b,forceMount:c,children:d,container:f}=a,g=z(D,b);return(0,s.jsx)(E,{scope:b,forceMount:c,children:e.Children.map(d,a=>(0,s.jsx)(n.Presence,{present:c||g.open,children:(0,s.jsx)(m.Portal,{asChild:!0,container:f,children:a})}))})};G.displayName=D;var H="DialogOverlay",I=e.forwardRef((a,b)=>{let c=F(H,a.__scopeDialog),{forceMount:d=c.forceMount,...e}=a,f=z(H,a.__scopeDialog);return f.modal?(0,s.jsx)(n.Presence,{present:d||f.open,children:(0,s.jsx)(K,{...e,ref:b})}):null});I.displayName=H;var J=((d=e.forwardRef((a,b)=>{let{children:c,...d}=a;if(e.isValidElement(c)){var f;let a,h,i=(f=c,(h=(a=Object.getOwnPropertyDescriptor(f.props,"ref")?.get)&&"isReactWarning"in a&&a.isReactWarning)?f.ref:(h=(a=Object.getOwnPropertyDescriptor(f,"ref")?.get)&&"isReactWarning"in a&&a.isReactWarning)?f.props.ref:f.props.ref||f.ref),j=function(a,b){let c={...b};for(let d in b){let e=a[d],f=b[d];/^on[A-Z]/.test(d)?e&&f?c[d]=(...a)=>{let b=f(...a);return e(...a),b}:e&&(c[d]=e):"style"===d?c[d]={...e,...f}:"className"===d&&(c[d]=[e,f].filter(Boolean).join(" "))}return{...a,...c}}(d,c.props);return c.type!==e.Fragment&&(j.ref=b?(0,g.composeRefs)(b,i):i),e.cloneElement(c,j)}return e.Children.count(c)>1?e.Children.only(null):null})).displayName="DialogOverlay.RemoveScroll.SlotClone",b=d,(c=e.forwardRef((a,c)=>{let{children:d,...f}=a,g=e.Children.toArray(d),h=g.find(u);if(h){let a=h.props.children,d=g.map(b=>b!==h?b:e.Children.count(a)>1?e.Children.only(null):e.isValidElement(a)?a.props.children:null);return(0,s.jsx)(b,{...f,ref:c,children:e.isValidElement(a)?e.cloneElement(a,void 0,d):null})}return(0,s.jsx)(b,{...f,ref:c,children:d})})).displayName="DialogOverlay.RemoveScroll.Slot",c),K=e.forwardRef((a,b)=>{let{__scopeDialog:c,...d}=a,e=z(H,c);return(0,s.jsx)(q.RemoveScroll,{as:J,allowPinchZoom:!0,shards:[e.contentRef],children:(0,s.jsx)(o.Primitive.div,{"data-state":W(e.open),...d,ref:b,style:{pointerEvents:"auto",...d.style}})})}),L="DialogContent",M=e.forwardRef((a,b)=>{let c=F(L,a.__scopeDialog),{forceMount:d=c.forceMount,...e}=a,f=z(L,a.__scopeDialog);return(0,s.jsx)(n.Presence,{present:d||f.open,children:f.modal?(0,s.jsx)(N,{...e,ref:b}):(0,s.jsx)(O,{...e,ref:b})})});M.displayName=L;var N=e.forwardRef((a,b)=>{let c=z(L,a.__scopeDialog),d=e.useRef(null),h=(0,g.useComposedRefs)(b,c.contentRef,d);return e.useEffect(()=>{let a=d.current;if(a)return(0,r.hideOthers)(a)},[]),(0,s.jsx)(P,{...a,ref:h,trapFocus:c.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:(0,f.composeEventHandlers)(a.onCloseAutoFocus,a=>{a.preventDefault(),c.triggerRef.current?.focus()}),onPointerDownOutside:(0,f.composeEventHandlers)(a.onPointerDownOutside,a=>{let b=a.detail.originalEvent,c=0===b.button&&!0===b.ctrlKey;(2===b.button||c)&&a.preventDefault()}),onFocusOutside:(0,f.composeEventHandlers)(a.onFocusOutside,a=>a.preventDefault())})}),O=e.forwardRef((a,b)=>{let c=z(L,a.__scopeDialog),d=e.useRef(!1),f=e.useRef(!1);return(0,s.jsx)(P,{...a,ref:b,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:b=>{a.onCloseAutoFocus?.(b),b.defaultPrevented||(d.current||c.triggerRef.current?.focus(),b.preventDefault()),d.current=!1,f.current=!1},onInteractOutside:b=>{a.onInteractOutside?.(b),b.defaultPrevented||(d.current=!0,"pointerdown"===b.detail.originalEvent.type&&(f.current=!0));let e=b.target;c.triggerRef.current?.contains(e)&&b.preventDefault(),"focusin"===b.detail.originalEvent.type&&f.current&&b.preventDefault()}})}),P=e.forwardRef((a,b)=>{let{__scopeDialog:c,trapFocus:d,onOpenAutoFocus:f,onCloseAutoFocus:h,...i}=a,j=z(L,c),m=e.useRef(null),n=(0,g.useComposedRefs)(b,m);return(0,p.useFocusGuards)(),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(l.FocusScope,{asChild:!0,loop:!0,trapped:d,onMountAutoFocus:f,onUnmountAutoFocus:h,children:(0,s.jsx)(k.DismissableLayer,{role:"dialog",id:j.contentId,"aria-describedby":j.descriptionId,"aria-labelledby":j.titleId,"data-state":W(j.open),...i,ref:n,onDismiss:()=>j.onOpenChange(!1)})}),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)($,{titleId:j.titleId}),(0,s.jsx)(_,{contentRef:m,descriptionId:j.descriptionId})]})]})}),Q="DialogTitle",R=e.forwardRef((a,b)=>{let{__scopeDialog:c,...d}=a,e=z(Q,c);return(0,s.jsx)(o.Primitive.h2,{id:e.titleId,...d,ref:b})});R.displayName=Q;var S="DialogDescription",T=e.forwardRef((a,b)=>{let{__scopeDialog:c,...d}=a,e=z(S,c);return(0,s.jsx)(o.Primitive.p,{id:e.descriptionId,...d,ref:b})});T.displayName=S;var U="DialogClose",V=e.forwardRef((a,b)=>{let{__scopeDialog:c,...d}=a,e=z(U,c);return(0,s.jsx)(o.Primitive.button,{type:"button",...d,ref:b,onClick:(0,f.composeEventHandlers)(a.onClick,()=>e.onOpenChange(!1))})});function W(a){return a?"open":"closed"}V.displayName=U;var X="DialogTitleWarning",[Y,Z]=(0,h.createContext)(X,{contentName:L,titleName:Q,docsSlug:"dialog"}),$=({titleId:a})=>{let b=Z(X),c=`\`${b.contentName}\` requires a \`${b.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${b.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${b.docsSlug}`;return e.useEffect(()=>{a&&(document.getElementById(a)||console.error(c))},[c,a]),null},_=({contentRef:a,descriptionId:b})=>{let c=Z("DialogDescriptionWarning"),d=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${c.contentName}}.`;return e.useEffect(()=>{let c=a.current?.getAttribute("aria-describedby");b&&c&&(document.getElementById(b)||console.warn(d))},[d,a,b]),null};a.s(["Close",()=>V,"Content",()=>M,"Description",()=>T,"Overlay",()=>I,"Portal",()=>G,"Root",()=>A,"Title",()=>R,"Trigger",()=>C],97942);var aa=a.i(62213);a.s(["XIcon",()=>aa.default],22262)},46842,a=>{"use strict";let b=(0,a.i(70106).default)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);a.s(["User",()=>b],46842)},3130,a=>{"use strict";var b=a.i(87924),c=a.i(97895);function d({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"card",className:(0,c.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",a),...d})}function e({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"card-header",className:(0,c.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-2 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",a),...d})}function f({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"card-title",className:(0,c.cn)("leading-none font-semibold",a),...d})}function g({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"card-description",className:(0,c.cn)("text-muted-foreground text-sm",a),...d})}function h({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"card-content",className:(0,c.cn)("px-6",a),...d})}a.s(["Card",()=>d,"CardContent",()=>h,"CardDescription",()=>g,"CardHeader",()=>e,"CardTitle",()=>f])},5050,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d={callServer:function(){return f.callServer},createServerReference:function(){return h.createServerReference},findSourceMapURL:function(){return g.findSourceMapURL}};for(var e in d)Object.defineProperty(c,e,{enumerable:!0,get:d[e]});let f=a.r(20611),g=a.r(1722),h=a.r(38783)},42521,a=>{"use strict";var b=a.i(78560),c=a.i(5050),d=(0,c.createServerReference)("7836f6554c113775f9349130d57af469f4e9914fb6",c.callServer,void 0,c.findSourceMapURL,"sendNewListingEmail");async function e(a){let{data:c,error:d}=await b.supabase.from("listings").select("*").eq("owner_id",a);if(d)throw d;return c}async function f(a){let{count:c,error:d}=await b.supabase.from("listings").select("*",{count:"exact",head:!0}).eq("owner_id",a);if(d)throw d;let{count:e,error:f}=await b.supabase.from("bookings").select("*",{count:"exact",head:!0}).eq("owner_id",a).in("status",["active","confirmed"]);if(f)throw f;let{data:g,error:h}=await b.supabase.from("bookings").select("total_amount").eq("owner_id",a).eq("status","completed");if(h)throw h;let i=g?.reduce((a,b)=>a+(Number(b.total_amount)||0),0)||0,{data:j,error:k}=await b.supabase.from("listings").select("views_count").eq("owner_id",a);if(k)throw k;return{listingsCount:c||0,activeBookingsCount:e||0,totalEarnings:i,totalViews:j?.reduce((a,b)=>a+(Number(b.views_count)||0),0)||0}}async function g(a,c="owner"){let d=b.supabase.from("bookings").select(`
            *,
            listing:listings(title, images),
            renter:user_profiles!bookings_renter_id_fkey(full_name, avatar_url),
            owner:user_profiles!bookings_owner_id_fkey(full_name, avatar_url)
        `).order("created_at",{ascending:!1});d="owner"===c?d.eq("owner_id",a):d.eq("renter_id",a);let{data:e,error:f}=await d;if(f)throw f;return e}async function h(a){let{data:c,error:d}=await b.supabase.from("conversations").select(`
            *,
            listing:listings(title),
            participant1:user_profiles!participant_1_id(full_name, avatar_url),
            participant2:user_profiles!participant_2_id(full_name, avatar_url),
            last_message:messages(content, created_at, is_read, sender_id)
        `).or(`participant_1_id.eq.${a},participant_2_id.eq.${a}`).order("last_message_at",{ascending:!1});if(d)throw d;return c.map(b=>{let c=b.participant_1_id===a?b.participant2:b.participant1,d=b.last_message?.[0]||null;return{...b,otherUser:c,lastMessage:d}})}async function i(a){let{data:c,error:d}=await b.supabase.from("messages").select("*").eq("conversation_id",a).order("created_at",{ascending:!0});if(d)throw d;return c}async function j(a,c,d){let{data:e,error:f}=await b.supabase.from("messages").insert({conversation_id:a,sender_id:c,content:d}).select().single();if(f)throw f;return e}async function k(a){let{data:c,error:d}=await b.supabase.from("verification_documents").select("*").eq("user_id",a);if(d)throw d;return c}async function l(a,c,d,e,f,g){let{data:h,error:i}=await b.supabase.from("verification_documents").insert({user_id:a,document_url:c,back_image_url:d,selfie_image_url:e,document_type:f,document_number:g,status:"pending"}).select().single();if(i)throw i;return h}async function m(a,c){let{data:d,error:e}=await b.supabase.from("user_profiles").update(c).eq("id",a).select().single();if(e)throw e;return d}async function n(a){let{data:c,error:d}=await b.supabase.from("affiliates").select("*").eq("user_id",a).single();if(d&&"PGRST116"!==d.code)throw d;return c||null}async function o(a){let{data:c,error:d}=await b.supabase.from("affiliates").select("id").eq("user_id",a).single();if(d||!c)return[];let{data:e,error:f}=await b.supabase.from("affiliate_referrals").select(`
            id,
            commission_amount,
            commission_status,
            created_at,
            referred_user:user_profiles!referred_user_id(full_name, avatar_url, email)
        `).eq("affiliate_id",c.id).order("created_at",{ascending:!1});if(f)throw f;return e}async function p(a){let{data:c,error:d}=await b.supabase.from("notifications").select("*").eq("user_id",a).order("created_at",{ascending:!1}).limit(10);if(d)throw d;return c}async function q(a){let{error:c}=await b.supabase.from("notifications").update({is_read:!0,read_at:new Date().toISOString()}).eq("id",a);if(c)throw c}async function r(a,c){console.log("Creating listing with data:",c);let{data:e,error:f}=await b.supabase.from("listings").insert({...c,owner_id:a,views_count:0,favorites_count:0,rating_average:0,rating_count:0,is_featured:!1,is_verified:!1,status:"pending"}).select().single();if(f)throw console.error("Supabase error creating listing:",f),f;console.log("Listing created successfully:",e);try{let{data:c}=await b.supabase.from("user_profiles").select("email, full_name").eq("id",a).single();c?.email&&await d(c.email,c.full_name?.split(" ")[0]||"User",e.title,e.id)}catch(a){console.error("Failed to send listing creation email:",a)}return e}async function s(a){let{data:c,error:d}=await b.supabase.from("bookings").select(`
            id,
            total_amount,
            end_date,
            listing:listings(title)
        `).eq("owner_id",a).eq("status","completed").order("end_date",{ascending:!1});if(d)throw d;return c.map(a=>({id:a.id,type:"earning",desc:a.listing?.title||"Rental",date:new Date(a.end_date).toLocaleDateString(),amount:a.total_amount}))}async function t(a,c,d){let e={status:c};d&&(e.rejection_reason=d);let{error:f}=await b.supabase.from("verification_documents").update(e).eq("id",a);if(f)throw f}async function u(){let{data:a,error:c}=await b.supabase.from("user_profiles").select("*").or("role.eq.admin,is_admin.eq.true");if(c)throw c;return a}async function v(a){let{data:c,error:d}=await b.supabase.from("user_profiles").select("*").eq("email",a).single();if(d)throw d;return c}a.s(["createListing",()=>r,"getAdmins",()=>u,"getAffiliateData",()=>n,"getAffiliateReferrals",()=>o,"getBookings",()=>g,"getConversations",()=>h,"getEarnings",()=>s,"getMessages",()=>i,"getNotifications",()=>p,"getOwnerData",()=>e,"getOwnerStats",()=>f,"getUserByEmail",()=>v,"getVerifications",()=>k,"markNotificationAsRead",()=>q,"sendMessage",()=>j,"updateDocumentStatus",()=>t,"updateProfile",()=>m,"uploadVerification",()=>l],42521)},16201,a=>{"use strict";let b=(0,a.i(70106).default)("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);a.s(["CheckCircle",()=>b],16201)},7379,a=>{"use strict";var b=a.i(87924),c=a.i(72131);a.i(35112);var d=a.i(11011),e=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((a,e)=>{let f=(0,d.createSlot)(`Primitive.${e}`),g=c.forwardRef((a,c)=>{let{asChild:d,...g}=a;return(0,b.jsx)(d?f:e,{...g,ref:c})});return g.displayName=`Primitive.${e}`,{...a,[e]:g}},{}),f="horizontal",g=["horizontal","vertical"],h=c.forwardRef((a,c)=>{var d;let{decorative:h,orientation:i=f,...j}=a,k=(d=i,g.includes(d))?i:f;return(0,b.jsx)(e.div,{"data-orientation":k,...h?{role:"none"}:{"aria-orientation":"vertical"===k?k:void 0,role:"separator"},...j,ref:c})});h.displayName="Separator";var i=a.i(97895);function j({className:a,orientation:c="horizontal",decorative:d=!0,...e}){return(0,b.jsx)(h,{"data-slot":"separator",decorative:d,orientation:c,className:(0,i.cn)("bg-border shrink-0 data-[orientation=horizontal]:h-px data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-px",a),...e})}a.s(["Separator",()=>j],7379)},17171,a=>{"use strict";var b=a.i(87924),c=a.i(72131);a.i(35112);var d=a.i(11011),e=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((a,e)=>{let f=(0,d.createSlot)(`Primitive.${e}`),g=c.forwardRef((a,c)=>{let{asChild:d,...g}=a;return(0,b.jsx)(d?f:e,{...g,ref:c})});return g.displayName=`Primitive.${e}`,{...a,[e]:g}},{}),f=c.forwardRef((a,c)=>(0,b.jsx)(e.label,{...a,ref:c,onMouseDown:b=>{b.target.closest("button, input, select, textarea")||(a.onMouseDown?.(b),!b.defaultPrevented&&b.detail>1&&b.preventDefault())}}));f.displayName="Label";var g=a.i(97895);function h({className:a,...c}){return(0,b.jsx)(f,{"data-slot":"label",className:(0,g.cn)("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",a),...c})}a.s(["Label",()=>h],17171)},46893,a=>{"use strict";var b=a.i(87924),c=a.i(97895);function d({className:a,...d}){return(0,b.jsx)("textarea",{"data-slot":"textarea",className:(0,c.cn)("border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",a),...d})}a.s(["Textarea",()=>d])},65733,a=>{"use strict";var b=a.i(87924),c=a.i(97942),d=a.i(22262),e=a.i(97895);function f({...a}){return(0,b.jsx)(c.Root,{"data-slot":"dialog",...a})}function g({...a}){return(0,b.jsx)(c.Trigger,{"data-slot":"dialog-trigger",...a})}function h({...a}){return(0,b.jsx)(c.Portal,{"data-slot":"dialog-portal",...a})}function i({className:a,...d}){return(0,b.jsx)(c.Overlay,{"data-slot":"dialog-overlay",className:(0,e.cn)("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",a),...d})}function j({className:a,children:f,showCloseButton:g=!0,...j}){return(0,b.jsxs)(h,{"data-slot":"dialog-portal",children:[(0,b.jsx)(i,{}),(0,b.jsxs)(c.Content,{"data-slot":"dialog-content",className:(0,e.cn)("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",a),...j,children:[f,g&&(0,b.jsxs)(c.Close,{"data-slot":"dialog-close",className:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",children:[(0,b.jsx)(d.XIcon,{}),(0,b.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})}function k({className:a,...c}){return(0,b.jsx)("div",{"data-slot":"dialog-header",className:(0,e.cn)("flex flex-col gap-2 text-center sm:text-left",a),...c})}function l({className:a,...c}){return(0,b.jsx)("div",{"data-slot":"dialog-footer",className:(0,e.cn)("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",a),...c})}function m({className:a,...d}){return(0,b.jsx)(c.Title,{"data-slot":"dialog-title",className:(0,e.cn)("text-lg leading-none font-semibold",a),...d})}function n({className:a,...d}){return(0,b.jsx)(c.Description,{"data-slot":"dialog-description",className:(0,e.cn)("text-muted-foreground text-sm",a),...d})}a.s(["Dialog",()=>f,"DialogContent",()=>j,"DialogDescription",()=>n,"DialogFooter",()=>l,"DialogHeader",()=>k,"DialogTitle",()=>m,"DialogTrigger",()=>g])},210,a=>{"use strict";let b=(0,a.i(70106).default)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);a.s(["ArrowLeft",()=>b],210)},3314,a=>{"use strict";let b=(0,a.i(70106).default)("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);a.s(["Shield",()=>b],3314)},92258,a=>{"use strict";let b=(0,a.i(70106).default)("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);a.s(["Mail",()=>b],92258)},62722,a=>{"use strict";let b=(0,a.i(70106).default)("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);a.s(["XCircle",()=>b],62722)},84505,a=>{"use strict";let b=(0,a.i(70106).default)("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);a.s(["Download",()=>b],84505)},41675,a=>{"use strict";let b=(0,a.i(70106).default)("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);a.s(["Calendar",()=>b],41675)},63519,a=>{"use strict";let b=(0,a.i(70106).default)("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);a.s(["Phone",()=>b],63519)},40114,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(50944),e=a.i(210),f=a.i(16201),g=a.i(62722),h=a.i(84505),i=a.i(46842),j=a.i(41675),k=a.i(3314),l=a.i(96221),m=a.i(63519),n=a.i(92258),o=a.i(3130),p=a.i(40695),q=a.i(54161),r=a.i(7706),s=a.i(7379),t=a.i(17171),u=a.i(46893),v=a.i(65733),w=a.i(23292),x=a.i(78560),y=a.i(42521);function z({verificationId:a}){let z=(0,d.useRouter)(),[A,B]=(0,c.useState)(null),[C,D]=(0,c.useState)(!0),[E,F]=(0,c.useState)(!1),[G,H]=(0,c.useState)(""),[I,J]=(0,c.useState)(!1);(0,c.useEffect)(()=>{K()},[a]);let K=async()=>{try{D(!0);let{data:b,error:c}=await x.supabase.from("verification_documents").select("*").eq("id",a).single();if(c)throw c;if(!b)throw Error("Document not found");let{data:d,error:e}=await x.supabase.from("user_profiles").select("*").eq("id",b.user_id).single();if(e)throw e;let f={id:d.id,email:d.email,fullName:d.full_name??"",phone:d.phone??"",avatarUrl:d.avatar_url??null,role:d.role??"renter",accountStatus:d.account_status??"active",verificationStatus:d.verification_status??"pending",verificationDeadline:d.verification_deadline?new Date(d.verification_deadline):null,verificationDocuments:[],subscriptionPlan:d.subscription_plan??null,subscriptionExpiresAt:d.subscription_expires_at?new Date(d.subscription_expires_at):null,createdAt:d.created_at?new Date(d.created_at):new Date,updatedAt:d.updated_at?new Date(d.updated_at):new Date,lastLoginAt:d.last_login_at?new Date(d.last_login_at):null,affiliateCode:d.affiliate_code??null,referredBy:d.referred_by??null,totalReferrals:d.total_referrals??0,totalEarnings:d.total_earnings??0,dateOfBirth:d.date_of_birth,nextOfKinName:d.next_of_kin_name,nextOfKinPhone:d.next_of_kin_phone,nextOfKinRelationship:d.next_of_kin_relationship},g={id:b.id,userId:b.user_id,type:b.document_type,fileUrl:b.document_url,fileName:b.document_url?.split("/").pop()||"document",backImageUrl:b.back_image_url,selfieImageUrl:b.selfie_image_url,uploadedAt:b.created_at?new Date(b.created_at):new Date,status:b.status,reviewedBy:b.verified_by,reviewedAt:b.verified_at?new Date(b.verified_at):null,rejectionReason:b.rejection_reason,user:f,document_number:b.document_number};B(g)}catch(a){console.error("Error loading verification detail:",a),w.toast.error("Failed to load verification document"),z.push("/admin/verifications")}finally{D(!1)}},L=async(a,b)=>{if(A)try{J(!0),await (0,y.updateDocumentStatus)(A.id,a,b),w.toast.success(`Document ${a}`),F(!1),z.push("/admin/verifications")}catch(a){console.error(a),w.toast.error("Failed to update status")}finally{J(!1)}};return C?(0,b.jsx)("div",{className:"flex items-center justify-center p-12",children:(0,b.jsx)(l.Loader2,{className:"h-8 w-8 animate-spin text-primary"})}):A?(0,b.jsxs)("div",{className:"space-y-6 max-w-5xl mx-auto pb-10",children:[(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsx)(p.Button,{variant:"ghost",size:"icon",onClick:()=>z.push("/admin/verifications"),children:(0,b.jsx)(e.ArrowLeft,{className:"h-5 w-5"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-2xl font-bold",children:"Review Verification"}),(0,b.jsx)("p",{className:"text-muted-foreground",children:"Review document and approve or reject user verification"})]})]}),(0,b.jsxs)("div",{className:"grid gap-6 md:grid-cols-3",children:[(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)(o.Card,{className:"glass-card",children:[(0,b.jsx)(o.CardHeader,{children:(0,b.jsxs)(o.CardTitle,{className:"flex items-center gap-2 text-base",children:[(0,b.jsx)(i.User,{className:"h-5 w-5 text-primary"}),"User Details"]})}),(0,b.jsxs)(o.CardContent,{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsxs)(r.Avatar,{className:"h-12 w-12",children:[(0,b.jsx)(r.AvatarImage,{src:A.user.avatarUrl||void 0}),(0,b.jsx)(r.AvatarFallback,{children:A.user.fullName[0]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"font-medium",children:A.user.fullName}),(0,b.jsx)(q.Badge,{variant:"outline",className:"mt-1 capitalize",children:A.user.role})]})]}),(0,b.jsx)(s.Separator,{}),(0,b.jsxs)("div",{className:"space-y-3 text-sm",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(n.Mail,{className:"h-4 w-4 text-muted-foreground"}),(0,b.jsx)("span",{children:A.user.email})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(m.Phone,{className:"h-4 w-4 text-muted-foreground"}),(0,b.jsx)("span",{children:A.user.phone||"No phone"})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(j.Calendar,{className:"h-4 w-4 text-muted-foreground"}),(0,b.jsxs)("span",{children:["Joined ",A.user.createdAt.toLocaleDateString()]})]})]})]})]}),(0,b.jsxs)(o.Card,{className:"glass-card",children:[(0,b.jsx)(o.CardHeader,{children:(0,b.jsxs)(o.CardTitle,{className:"flex items-center gap-2 text-base",children:[(0,b.jsx)(k.Shield,{className:"h-5 w-5 text-primary"}),"Document Info"]})}),(0,b.jsxs)(o.CardContent,{className:"space-y-4 text-sm",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{className:"text-muted-foreground block mb-1",children:"Type"}),(0,b.jsx)("p",{className:"font-medium capitalize",children:(A.type||"").replace("_"," ")})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{className:"text-muted-foreground block mb-1",children:"Status"}),(0,b.jsx)(q.Badge,{variant:"approved"===A.status?"default":"rejected"===A.status?"destructive":"secondary",children:A.status})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{className:"text-muted-foreground block mb-1",children:"Document Number"}),(0,b.jsx)("p",{className:"font-medium",children:A.document_number||"N/A"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{className:"text-muted-foreground block mb-1",children:"Next of Kin"}),(0,b.jsx)("p",{className:"font-medium",children:A.user.nextOfKinName||"N/A"}),(0,b.jsxs)("p",{className:"text-xs text-muted-foreground",children:[A.user.nextOfKinRelationship," â€¢ ",A.user.nextOfKinPhone]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{className:"text-muted-foreground block mb-1",children:"Uploaded"}),(0,b.jsx)("p",{className:"font-medium",children:A.uploadedAt.toLocaleString()})]})]})]}),(0,b.jsxs)(o.Card,{className:"glass-card",children:[(0,b.jsx)(o.CardHeader,{children:(0,b.jsx)(o.CardTitle,{className:"text-base",children:"Actions"})}),(0,b.jsxs)(o.CardContent,{className:"space-y-3",children:[(0,b.jsxs)(p.Button,{className:"w-full bg-green-600 hover:bg-green-700",onClick:()=>L("approved"),disabled:I||"approved"===A.status,children:[(0,b.jsx)(f.CheckCircle,{className:"h-4 w-4 mr-2"}),"Approve Document"]}),(0,b.jsxs)(p.Button,{variant:"outline",className:"w-full text-red-600 border-red-200 hover:bg-red-50",onClick:()=>F(!0),disabled:I||"approved"===A.status,children:[(0,b.jsx)(g.XCircle,{className:"h-4 w-4 mr-2"}),"Reject Document"]})]})]})]}),(0,b.jsxs)("div",{className:"md:col-span-2 space-y-6",children:[(0,b.jsxs)(o.Card,{className:"glass-card",children:[(0,b.jsxs)(o.CardHeader,{className:"flex flex-row items-center justify-between pb-2",children:[(0,b.jsx)(o.CardTitle,{children:"Front Side"}),(0,b.jsx)(p.Button,{variant:"outline",size:"sm",asChild:!0,children:(0,b.jsxs)("a",{href:A.fileUrl,target:"_blank",rel:"noopener noreferrer",children:[(0,b.jsx)(h.Download,{className:"h-4 w-4 mr-2"}),"Download"]})})]}),(0,b.jsx)(o.CardContent,{children:(0,b.jsx)("div",{className:"bg-muted/30 rounded-lg p-4 min-h-[300px] flex items-center justify-center border border-border overflow-hidden relative",children:A.fileUrl?.toLowerCase().endsWith(".pdf")?(0,b.jsx)("iframe",{src:A.fileUrl,className:"w-full h-[500px] rounded-md"}):(0,b.jsx)("img",{src:A.fileUrl,alt:"Front Preview",className:"max-w-full max-h-[500px] object-contain rounded-md shadow-lg"})})})]}),A.backImageUrl&&(0,b.jsxs)(o.Card,{className:"glass-card",children:[(0,b.jsxs)(o.CardHeader,{className:"flex flex-row items-center justify-between pb-2",children:[(0,b.jsx)(o.CardTitle,{children:"Back Side"}),(0,b.jsx)(p.Button,{variant:"outline",size:"sm",asChild:!0,children:(0,b.jsxs)("a",{href:A.backImageUrl,target:"_blank",rel:"noopener noreferrer",children:[(0,b.jsx)(h.Download,{className:"h-4 w-4 mr-2"}),"Download"]})})]}),(0,b.jsx)(o.CardContent,{children:(0,b.jsx)("div",{className:"bg-muted/30 rounded-lg p-4 min-h-[300px] flex items-center justify-center border border-border overflow-hidden relative",children:(0,b.jsx)("img",{src:A.backImageUrl,alt:"Back Preview",className:"max-w-full max-h-[500px] object-contain rounded-md shadow-lg"})})})]}),A.selfieImageUrl&&(0,b.jsxs)(o.Card,{className:"glass-card",children:[(0,b.jsxs)(o.CardHeader,{className:"flex flex-row items-center justify-between pb-2",children:[(0,b.jsx)(o.CardTitle,{children:"Selfie"}),(0,b.jsx)(p.Button,{variant:"outline",size:"sm",asChild:!0,children:(0,b.jsxs)("a",{href:A.selfieImageUrl,target:"_blank",rel:"noopener noreferrer",children:[(0,b.jsx)(h.Download,{className:"h-4 w-4 mr-2"}),"Download"]})})]}),(0,b.jsx)(o.CardContent,{children:(0,b.jsx)("div",{className:"bg-muted/30 rounded-lg p-4 min-h-[300px] flex items-center justify-center border border-border overflow-hidden relative",children:(0,b.jsx)("img",{src:A.selfieImageUrl,alt:"Selfie Preview",className:"max-w-full max-h-[500px] object-contain rounded-md shadow-lg"})})})]})]})]}),(0,b.jsx)(v.Dialog,{open:E,onOpenChange:F,children:(0,b.jsxs)(v.DialogContent,{children:[(0,b.jsxs)(v.DialogHeader,{children:[(0,b.jsx)(v.DialogTitle,{children:"Reject Document"}),(0,b.jsx)(v.DialogDescription,{children:"Please provide a reason for rejecting this document. The user will be notified."})]}),(0,b.jsx)("div",{className:"space-y-4",children:(0,b.jsxs)("div",{children:[(0,b.jsx)(t.Label,{htmlFor:"rejection-reason",children:"Rejection Reason"}),(0,b.jsx)(u.Textarea,{id:"rejection-reason",placeholder:"Enter the reason for rejection...",value:G,onChange:a=>H(a.target.value),className:"mt-2"})]})}),(0,b.jsxs)(v.DialogFooter,{children:[(0,b.jsx)(p.Button,{variant:"outline",onClick:()=>F(!1),children:"Cancel"}),(0,b.jsxs)(p.Button,{variant:"destructive",onClick:()=>L("rejected",G),disabled:I,children:[I&&(0,b.jsx)(l.Loader2,{className:"h-4 w-4 mr-2 animate-spin"}),"Confirm Rejection"]})]})]})})]}):null}a.s(["VerificationDetail",()=>z])}];

//# sourceMappingURL=_f52608ee._.js.map