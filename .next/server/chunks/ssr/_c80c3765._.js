module.exports=[3130,a=>{"use strict";var b=a.i(87924),c=a.i(97895);function d({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"card",className:(0,c.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",a),...d})}function e({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"card-header",className:(0,c.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-2 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",a),...d})}function f({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"card-title",className:(0,c.cn)("leading-none font-semibold",a),...d})}function g({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"card-description",className:(0,c.cn)("text-muted-foreground text-sm",a),...d})}function h({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"card-content",className:(0,c.cn)("px-6",a),...d})}a.s(["Card",()=>d,"CardContent",()=>h,"CardDescription",()=>g,"CardHeader",()=>e,"CardTitle",()=>f])},5050,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d={callServer:function(){return f.callServer},createServerReference:function(){return h.createServerReference},findSourceMapURL:function(){return g.findSourceMapURL}};for(var e in d)Object.defineProperty(c,e,{enumerable:!0,get:d[e]});let f=a.r(20611),g=a.r(1722),h=a.r(38783)},42521,a=>{"use strict";var b=a.i(78560),c=a.i(5050),d=(0,c.createServerReference)("7836f6554c113775f9349130d57af469f4e9914fb6",c.callServer,void 0,c.findSourceMapURL,"sendNewListingEmail");async function e(a){let{data:c,error:d}=await b.supabase.from("listings").select("*").eq("owner_id",a);if(d)throw d;return c}async function f(a){let{count:c,error:d}=await b.supabase.from("listings").select("*",{count:"exact",head:!0}).eq("owner_id",a);if(d)throw d;let{count:e,error:f}=await b.supabase.from("bookings").select("*",{count:"exact",head:!0}).eq("owner_id",a).in("status",["active","confirmed"]);if(f)throw f;let{data:g,error:h}=await b.supabase.from("bookings").select("total_amount").eq("owner_id",a).eq("status","completed");if(h)throw h;let i=g?.reduce((a,b)=>a+(Number(b.total_amount)||0),0)||0,{data:j,error:k}=await b.supabase.from("listings").select("views_count").eq("owner_id",a);if(k)throw k;return{listingsCount:c||0,activeBookingsCount:e||0,totalEarnings:i,totalViews:j?.reduce((a,b)=>a+(Number(b.views_count)||0),0)||0}}async function g(a,c="owner"){let d=b.supabase.from("bookings").select(`
            *,
            listing:listings(title, images),
            renter:user_profiles!bookings_renter_id_fkey(full_name, avatar_url),
            owner:user_profiles!bookings_owner_id_fkey(full_name, avatar_url)
        `).order("created_at",{ascending:!1});d="owner"===c?d.eq("owner_id",a):d.eq("renter_id",a);let{data:e,error:f}=await d;if(f)throw f;return e}async function h(a){let{data:c,error:d}=await b.supabase.from("conversations").select(`
            *,
            listing:listings(title),
            participant1:user_profiles!participant_1_id(full_name, avatar_url),
            participant2:user_profiles!participant_2_id(full_name, avatar_url),
            last_message:messages(content, created_at, is_read, sender_id)
        `).or(`participant_1_id.eq.${a},participant_2_id.eq.${a}`).order("last_message_at",{ascending:!1});if(d)throw d;return c.map(b=>{let c=b.participant_1_id===a?b.participant2:b.participant1,d=b.last_message?.[0]||null;return{...b,otherUser:c,lastMessage:d}})}async function i(a){let{data:c,error:d}=await b.supabase.from("messages").select("*").eq("conversation_id",a).order("created_at",{ascending:!0});if(d)throw d;return c}async function j(a,c,d){let{data:e,error:f}=await b.supabase.from("messages").insert({conversation_id:a,sender_id:c,content:d}).select().single();if(f)throw f;return e}async function k(a){let{data:c,error:d}=await b.supabase.from("verification_documents").select("*").eq("user_id",a);if(d)throw d;return c}async function l(a,c,d,e,f,g){let{data:h,error:i}=await b.supabase.from("verification_documents").insert({user_id:a,document_url:c,back_image_url:d,selfie_image_url:e,document_type:f,document_number:g,status:"pending"}).select().single();if(i)throw i;return h}async function m(a,c){let{data:d,error:e}=await b.supabase.from("user_profiles").update(c).eq("id",a).select().single();if(e)throw e;return d}async function n(a){let{data:c,error:d}=await b.supabase.from("affiliates").select("*").eq("user_id",a).single();if(d&&"PGRST116"!==d.code)throw d;return c||null}async function o(a){let{data:c,error:d}=await b.supabase.from("affiliates").select("id").eq("user_id",a).single();if(d||!c)return[];let{data:e,error:f}=await b.supabase.from("affiliate_referrals").select(`
            id,
            commission_amount,
            commission_status,
            created_at,
            referred_user:user_profiles!referred_user_id(full_name, avatar_url, email)
        `).eq("affiliate_id",c.id).order("created_at",{ascending:!1});if(f)throw f;return e}async function p(a){let{data:c,error:d}=await b.supabase.from("notifications").select("*").eq("user_id",a).order("created_at",{ascending:!1}).limit(10);if(d)throw d;return c}async function q(a){let{error:c}=await b.supabase.from("notifications").update({is_read:!0,read_at:new Date().toISOString()}).eq("id",a);if(c)throw c}async function r(a,c){console.log("Creating listing with data:",c);let{data:e,error:f}=await b.supabase.from("listings").insert({...c,owner_id:a,views_count:0,favorites_count:0,rating_average:0,rating_count:0,is_featured:!1,is_verified:!1,status:"pending"}).select().single();if(f)throw console.error("Supabase error creating listing:",f),f;console.log("Listing created successfully:",e);try{let{data:c}=await b.supabase.from("user_profiles").select("email, full_name").eq("id",a).single();c?.email&&await d(c.email,c.full_name?.split(" ")[0]||"User",e.title,e.id)}catch(a){console.error("Failed to send listing creation email:",a)}return e}async function s(a){let{data:c,error:d}=await b.supabase.from("bookings").select(`
            id,
            total_amount,
            end_date,
            listing:listings(title)
        `).eq("owner_id",a).eq("status","completed").order("end_date",{ascending:!1});if(d)throw d;return c.map(a=>({id:a.id,type:"earning",desc:a.listing?.title||"Rental",date:new Date(a.end_date).toLocaleDateString(),amount:a.total_amount}))}async function t(a,c,d){let e={status:c};d&&(e.rejection_reason=d);let{error:f}=await b.supabase.from("verification_documents").update(e).eq("id",a);if(f)throw f}async function u(){let{data:a,error:c}=await b.supabase.from("user_profiles").select("*").or("role.eq.admin,is_admin.eq.true");if(c)throw c;return a}async function v(a){let{data:c,error:d}=await b.supabase.from("user_profiles").select("*").eq("email",a).single();if(d)throw d;return c}a.s(["createListing",()=>r,"getAdmins",()=>u,"getAffiliateData",()=>n,"getAffiliateReferrals",()=>o,"getBookings",()=>g,"getConversations",()=>h,"getEarnings",()=>s,"getMessages",()=>i,"getNotifications",()=>p,"getOwnerData",()=>e,"getOwnerStats",()=>f,"getUserByEmail",()=>v,"getVerifications",()=>k,"markNotificationAsRead",()=>q,"sendMessage",()=>j,"updateDocumentStatus",()=>t,"updateProfile",()=>m,"uploadVerification",()=>l],42521)},77994,a=>{"use strict";var b=a.i(72131);function c(a){let c=b.useRef({value:a,previous:a});return b.useMemo(()=>(c.current.value!==a&&(c.current.previous=c.current.value,c.current.value=a),c.current.previous),[a])}a.s(["usePrevious",()=>c])},17171,a=>{"use strict";var b=a.i(87924),c=a.i(72131);a.i(35112);var d=a.i(11011),e=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((a,e)=>{let f=(0,d.createSlot)(`Primitive.${e}`),g=c.forwardRef((a,c)=>{let{asChild:d,...g}=a;return(0,b.jsx)(d?f:e,{...g,ref:c})});return g.displayName=`Primitive.${e}`,{...a,[e]:g}},{}),f=c.forwardRef((a,c)=>(0,b.jsx)(e.label,{...a,ref:c,onMouseDown:b=>{b.target.closest("button, input, select, textarea")||(a.onMouseDown?.(b),!b.defaultPrevented&&b.detail>1&&b.preventDefault())}}));f.displayName="Label";var g=a.i(97895);function h({className:a,...c}){return(0,b.jsx)(f,{"data-slot":"label",className:(0,g.cn)("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",a),...c})}a.s(["Label",()=>h],17171)},21958,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(7554),e=a.i(50104),f=a.i(24050),g=a.i(77192),h=a.i(30553),i=a.i(7827),j=a.i(25152),k=a.i(92843),l="Tabs",[m,n]=(0,e.createContextScope)(l,[f.createRovingFocusGroupScope]),o=(0,f.createRovingFocusGroupScope)(),[p,q]=m(l),r=c.forwardRef((a,c)=>{let{__scopeTabs:d,value:e,onValueChange:f,defaultValue:g,orientation:m="horizontal",dir:n,activationMode:o="automatic",...q}=a,r=(0,i.useDirection)(n),[s,t]=(0,j.useControllableState)({prop:e,onChange:f,defaultProp:g??"",caller:l});return(0,b.jsx)(p,{scope:d,baseId:(0,k.useId)(),value:s,onValueChange:t,orientation:m,dir:r,activationMode:o,children:(0,b.jsx)(h.Primitive.div,{dir:r,"data-orientation":m,...q,ref:c})})});r.displayName=l;var s="TabsList",t=c.forwardRef((a,c)=>{let{__scopeTabs:d,loop:e=!0,...g}=a,i=q(s,d),j=o(d);return(0,b.jsx)(f.Root,{asChild:!0,...j,orientation:i.orientation,dir:i.dir,loop:e,children:(0,b.jsx)(h.Primitive.div,{role:"tablist","aria-orientation":i.orientation,...g,ref:c})})});t.displayName=s;var u="TabsTrigger",v=c.forwardRef((a,c)=>{let{__scopeTabs:e,value:g,disabled:i=!1,...j}=a,k=q(u,e),l=o(e),m=y(k.baseId,g),n=z(k.baseId,g),p=g===k.value;return(0,b.jsx)(f.Item,{asChild:!0,...l,focusable:!i,active:p,children:(0,b.jsx)(h.Primitive.button,{type:"button",role:"tab","aria-selected":p,"aria-controls":n,"data-state":p?"active":"inactive","data-disabled":i?"":void 0,disabled:i,id:m,...j,ref:c,onMouseDown:(0,d.composeEventHandlers)(a.onMouseDown,a=>{i||0!==a.button||!1!==a.ctrlKey?a.preventDefault():k.onValueChange(g)}),onKeyDown:(0,d.composeEventHandlers)(a.onKeyDown,a=>{[" ","Enter"].includes(a.key)&&k.onValueChange(g)}),onFocus:(0,d.composeEventHandlers)(a.onFocus,()=>{let a="manual"!==k.activationMode;p||i||!a||k.onValueChange(g)})})})});v.displayName=u;var w="TabsContent",x=c.forwardRef((a,d)=>{let{__scopeTabs:e,value:f,forceMount:i,children:j,...k}=a,l=q(w,e),m=y(l.baseId,f),n=z(l.baseId,f),o=f===l.value,p=c.useRef(o);return c.useEffect(()=>{let a=requestAnimationFrame(()=>p.current=!1);return()=>cancelAnimationFrame(a)},[]),(0,b.jsx)(g.Presence,{present:i||o,children:({present:c})=>(0,b.jsx)(h.Primitive.div,{"data-state":o?"active":"inactive","data-orientation":l.orientation,role:"tabpanel","aria-labelledby":m,hidden:!c,id:n,tabIndex:0,...k,ref:d,style:{...a.style,animationDuration:p.current?"0s":void 0},children:c&&j})})});function y(a,b){return`${a}-trigger-${b}`}function z(a,b){return`${a}-content-${b}`}x.displayName=w;var A=a.i(97895);function B({className:a,...c}){return(0,b.jsx)(r,{"data-slot":"tabs",className:(0,A.cn)("flex flex-col gap-2",a),...c})}function C({className:a,...c}){return(0,b.jsx)(t,{"data-slot":"tabs-list",className:(0,A.cn)("bg-muted text-muted-foreground inline-flex h-9 w-fit items-center justify-center rounded-lg p-[3px]",a),...c})}function D({className:a,...c}){return(0,b.jsx)(v,{"data-slot":"tabs-trigger",className:(0,A.cn)("data-[state=active]:bg-background dark:data-[state=active]:text-foreground focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:outline-ring dark:data-[state=active]:border-input dark:data-[state=active]:bg-input/30 text-foreground dark:text-muted-foreground inline-flex h-[calc(100%-1px)] flex-1 items-center justify-center gap-1.5 rounded-md border border-transparent px-2 py-1 text-sm font-medium whitespace-nowrap transition-[color,box-shadow] focus-visible:ring-[3px] focus-visible:outline-1 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:shadow-sm [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",a),...c})}function E({className:a,...c}){return(0,b.jsx)(x,{"data-slot":"tabs-content",className:(0,A.cn)("flex-1 outline-none",a),...c})}a.s(["Tabs",()=>B,"TabsContent",()=>E,"TabsList",()=>C,"TabsTrigger",()=>D],21958)},11156,a=>{"use strict";let b=(0,a.i(70106).default)("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);a.s(["CreditCard",()=>b],11156)},3314,a=>{"use strict";let b=(0,a.i(70106).default)("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);a.s(["Shield",()=>b],3314)},15618,a=>{"use strict";let b=(0,a.i(70106).default)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);a.s(["Plus",()=>b],15618)},81560,a=>{"use strict";let b=(0,a.i(70106).default)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);a.s(["Trash2",()=>b],81560)},7379,a=>{"use strict";var b=a.i(87924),c=a.i(72131);a.i(35112);var d=a.i(11011),e=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((a,e)=>{let f=(0,d.createSlot)(`Primitive.${e}`),g=c.forwardRef((a,c)=>{let{asChild:d,...g}=a;return(0,b.jsx)(d?f:e,{...g,ref:c})});return g.displayName=`Primitive.${e}`,{...a,[e]:g}},{}),f="horizontal",g=["horizontal","vertical"],h=c.forwardRef((a,c)=>{var d;let{decorative:h,orientation:i=f,...j}=a,k=(d=i,g.includes(d))?i:f;return(0,b.jsx)(e.div,{"data-orientation":k,...h?{role:"none"}:{"aria-orientation":"vertical"===k?k:void 0,role:"separator"},...j,ref:c})});h.displayName="Separator";var i=a.i(97895);function j({className:a,orientation:c="horizontal",decorative:d=!0,...e}){return(0,b.jsx)(h,{"data-slot":"separator",decorative:d,orientation:c,className:(0,i.cn)("bg-border shrink-0 data-[orientation=horizontal]:h-px data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-px",a),...e})}a.s(["Separator",()=>j],7379)},77156,a=>{"use strict";let b=(0,a.i(70106).default)("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);a.s(["Eye",()=>b],77156)},41379,a=>{"use strict";let b=(0,a.i(70106).default)("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);a.s(["EyeOff",()=>b],41379)},44494,a=>{"use strict";let b=(0,a.i(70106).default)("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);a.s(["Globe",()=>b],44494)},14548,80281,a=>{"use strict";let b=(0,a.i(70106).default)("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);a.s(["Save",()=>b],14548);var c=a.i(87924),d=a.i(72131),e=a.i(7554),f=a.i(70121),g=a.i(50104),h=a.i(25152),i=a.i(77994),j=a.i(3688),k=a.i(30553),l="Switch",[m,n]=(0,g.createContextScope)(l),[o,p]=m(l),q=d.forwardRef((a,b)=>{let{__scopeSwitch:g,name:i,checked:j,defaultChecked:m,required:n,disabled:p,value:q="on",onCheckedChange:r,form:s,...v}=a,[w,x]=d.useState(null),y=(0,f.useComposedRefs)(b,a=>x(a)),z=d.useRef(!1),A=!w||s||!!w.closest("form"),[B,C]=(0,h.useControllableState)({prop:j,defaultProp:m??!1,onChange:r,caller:l});return(0,c.jsxs)(o,{scope:g,checked:B,disabled:p,children:[(0,c.jsx)(k.Primitive.button,{type:"button",role:"switch","aria-checked":B,"aria-required":n,"data-state":u(B),"data-disabled":p?"":void 0,disabled:p,value:q,...v,ref:y,onClick:(0,e.composeEventHandlers)(a.onClick,a=>{C(a=>!a),A&&(z.current=a.isPropagationStopped(),z.current||a.stopPropagation())})}),A&&(0,c.jsx)(t,{control:w,bubbles:!z.current,name:i,value:q,checked:B,required:n,disabled:p,form:s,style:{transform:"translateX(-100%)"}})]})});q.displayName=l;var r="SwitchThumb",s=d.forwardRef((a,b)=>{let{__scopeSwitch:d,...e}=a,f=p(r,d);return(0,c.jsx)(k.Primitive.span,{"data-state":u(f.checked),"data-disabled":f.disabled?"":void 0,...e,ref:b})});s.displayName=r;var t=d.forwardRef(({__scopeSwitch:a,control:b,checked:e,bubbles:g=!0,...h},k)=>{let l=d.useRef(null),m=(0,f.useComposedRefs)(l,k),n=(0,i.usePrevious)(e),o=(0,j.useSize)(b);return d.useEffect(()=>{let a=l.current;if(!a)return;let b=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"checked").set;if(n!==e&&b){let c=new Event("click",{bubbles:g});b.call(a,e),a.dispatchEvent(c)}},[n,e,g]),(0,c.jsx)("input",{type:"checkbox","aria-hidden":!0,defaultChecked:e,...h,tabIndex:-1,ref:m,style:{...h.style,...o,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});function u(a){return a?"checked":"unchecked"}t.displayName="SwitchBubbleInput";var v=a.i(97895);function w({className:a,...b}){return(0,c.jsx)(q,{"data-slot":"switch",className:(0,v.cn)("peer data-[state=checked]:bg-primary data-[state=unchecked]:bg-input focus-visible:border-ring focus-visible:ring-ring/50 dark:data-[state=unchecked]:bg-input/80 inline-flex h-[1.15rem] w-8 shrink-0 items-center rounded-full border border-transparent shadow-xs transition-all outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",a),...b,children:(0,c.jsx)(s,{"data-slot":"switch-thumb",className:"bg-background dark:data-[state=unchecked]:bg-foreground dark:data-[state=checked]:bg-primary-foreground pointer-events-none block size-4 rounded-full ring-0 transition-transform data-[state=checked]:translate-x-[calc(100%-2px)] data-[state=unchecked]:translate-x-0"})})}a.s(["Switch",()=>w],80281)}];

//# sourceMappingURL=_c80c3765._.js.map