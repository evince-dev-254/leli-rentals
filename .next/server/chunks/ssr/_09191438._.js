module.exports=[3130,a=>{"use strict";var b=a.i(87924),c=a.i(97895);function d({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"card",className:(0,c.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",a),...d})}function e({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"card-header",className:(0,c.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-2 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",a),...d})}function f({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"card-title",className:(0,c.cn)("leading-none font-semibold",a),...d})}function g({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"card-description",className:(0,c.cn)("text-muted-foreground text-sm",a),...d})}function h({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"card-content",className:(0,c.cn)("px-6",a),...d})}a.s(["Card",()=>d,"CardContent",()=>h,"CardDescription",()=>g,"CardHeader",()=>e,"CardTitle",()=>f])},16201,a=>{"use strict";let b=(0,a.i(70106).default)("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);a.s(["CheckCircle",()=>b],16201)},30656,a=>{"use strict";function b(a,[b,c]){return Math.min(c,Math.max(b,a))}a.s(["clamp",()=>b])},4699,a=>{"use strict";let b=(0,a.i(70106).default)("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);a.s(["default",()=>b])},77994,a=>{"use strict";var b=a.i(72131);function c(a){let c=b.useRef({value:a,previous:a});return b.useMemo(()=>(c.current.value!==a&&(c.current.previous=c.current.value,c.current.value=a),c.current.previous),[a])}a.s(["usePrevious",()=>c])},77991,a=>{"use strict";var b=a.i(4699);a.s(["ChevronDownIcon",()=>b.default])},77156,a=>{"use strict";let b=(0,a.i(70106).default)("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);a.s(["Eye",()=>b],77156)},88237,a=>{"use strict";var b=a.i(87924),c=a.i(97895);function d({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"table-container",className:"relative w-full overflow-x-auto",children:(0,b.jsx)("table",{"data-slot":"table",className:(0,c.cn)("w-full caption-bottom text-sm",a),...d})})}function e({className:a,...d}){return(0,b.jsx)("thead",{"data-slot":"table-header",className:(0,c.cn)("[&_tr]:border-b",a),...d})}function f({className:a,...d}){return(0,b.jsx)("tbody",{"data-slot":"table-body",className:(0,c.cn)("[&_tr:last-child]:border-0",a),...d})}function g({className:a,...d}){return(0,b.jsx)("tr",{"data-slot":"table-row",className:(0,c.cn)("hover:bg-muted/50 data-[state=selected]:bg-muted border-b transition-colors",a),...d})}function h({className:a,...d}){return(0,b.jsx)("th",{"data-slot":"table-head",className:(0,c.cn)("text-foreground h-10 px-2 text-left align-middle font-medium whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",a),...d})}function i({className:a,...d}){return(0,b.jsx)("td",{"data-slot":"table-cell",className:(0,c.cn)("p-2 align-middle whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",a),...d})}a.s(["Table",()=>d,"TableBody",()=>f,"TableCell",()=>i,"TableHead",()=>h,"TableHeader",()=>e,"TableRow",()=>g])},62722,a=>{"use strict";let b=(0,a.i(70106).default)("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);a.s(["XCircle",()=>b],62722)},81464,a=>{"use strict";let b=(0,a.i(70106).default)("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);a.s(["Filter",()=>b],81464)},17755,a=>{"use strict";let b=(0,a.i(70106).default)("Ellipsis",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]]);a.s(["MoreHorizontal",()=>b],17755)},8730,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(87532),e=a.i(81464),f=a.i(17755),g=a.i(77156),h=a.i(16201),i=a.i(62722),j=a.i(83497),k=a.i(3130),l=a.i(5522),m=a.i(40695),n=a.i(54161),o=a.i(76504),p=a.i(87682),q=a.i(88237),r=a.i(78560);function s(){let[a,s]=(0,c.useState)(""),[t,u]=(0,c.useState)("all"),[v,w]=(0,c.useState)("all"),[x,y]=(0,c.useState)([]),[z,A]=(0,c.useState)([]),[B,C]=(0,c.useState)(!0);(0,c.useEffect)(()=>{let a=!0;return async function(){C(!0);try{let{data:b,error:c}=await r.supabase.from("listings").select("*");if(c)return void console.error("Error fetching listings:",c);let d=Array.from(new Set((b||[]).map(a=>a.owner_id))),{data:e,error:f}=await r.supabase.from("user_profiles").select("*").in("id",d.length?d:["null"]);if(f&&console.error("Error fetching listing owners:",f),!a)return;y(b||[]),A(e||[])}finally{C(!1)}}(),()=>{a=!1}},[]);let D=x.map(a=>({id:a.id,ownerId:a.owner_id,title:a.title,description:a.description,category:a.category??a.category_id??"",pricePerDay:Number(a.price_per_day||0),images:a.images||[],location:a.location||"",isActive:a.is_active??!0,isApproved:a.status&&"approved"===a.status||!!a.is_verified,createdAt:a.created_at?new Date(a.created_at):new Date})),E=D.filter(b=>{let c=b.title.toLowerCase().includes(a.toLowerCase()),d="all"===t||b.category===t,e="all"===v||"approved"===v&&b.isApproved||"pending"===v&&!b.isApproved;return c&&d&&e});return(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-3xl font-bold",children:"Listings"}),(0,b.jsx)("p",{className:"text-muted-foreground",children:"Manage all rental listings on the platform"})]}),(0,b.jsxs)("div",{className:"grid gap-4 md:grid-cols-3",children:[(0,b.jsx)(k.Card,{className:"glass-card",children:(0,b.jsx)(k.CardContent,{className:"pt-6",children:(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsx)("div",{className:"p-3 rounded-full bg-blue-500/20",children:(0,b.jsx)(j.Package,{className:"h-6 w-6 text-blue-500"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-2xl font-bold",children:D.length}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Total Listings"})]})]})})}),(0,b.jsx)(k.Card,{className:"glass-card",children:(0,b.jsx)(k.CardContent,{className:"pt-6",children:(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsx)("div",{className:"p-3 rounded-full bg-green-500/20",children:(0,b.jsx)(h.CheckCircle,{className:"h-6 w-6 text-green-500"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-2xl font-bold",children:D.filter(a=>a.isApproved).length}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Approved"})]})]})})}),(0,b.jsx)(k.Card,{className:"glass-card",children:(0,b.jsx)(k.CardContent,{className:"pt-6",children:(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsx)("div",{className:"p-3 rounded-full bg-orange-500/20",children:(0,b.jsx)(i.XCircle,{className:"h-6 w-6 text-orange-500"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-2xl font-bold",children:D.filter(a=>!a.isApproved).length}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Pending Approval"})]})]})})})]}),(0,b.jsx)(k.Card,{className:"glass-card",children:(0,b.jsx)(k.CardContent,{className:"pt-6",children:(0,b.jsxs)("div",{className:"flex flex-col md:flex-row gap-4",children:[(0,b.jsxs)("div",{className:"relative flex-1",children:[(0,b.jsx)(d.Search,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),(0,b.jsx)(l.Input,{placeholder:"Search listings...",className:"pl-10",value:a,onChange:a=>s(a.target.value)})]}),(0,b.jsxs)(p.Select,{value:t,onValueChange:u,children:[(0,b.jsx)(p.SelectTrigger,{className:"w-full md:w-40",children:(0,b.jsx)(p.SelectValue,{placeholder:"Category"})}),(0,b.jsxs)(p.SelectContent,{children:[(0,b.jsx)(p.SelectItem,{value:"all",children:"All Categories"}),(0,b.jsx)(p.SelectItem,{value:"vehicles",children:"Vehicles"}),(0,b.jsx)(p.SelectItem,{value:"homes",children:"Homes"}),(0,b.jsx)(p.SelectItem,{value:"equipment",children:"Equipment"}),(0,b.jsx)(p.SelectItem,{value:"electronics",children:"Electronics"})]})]}),(0,b.jsxs)(p.Select,{value:v,onValueChange:w,children:[(0,b.jsx)(p.SelectTrigger,{className:"w-full md:w-40",children:(0,b.jsx)(p.SelectValue,{placeholder:"Status"})}),(0,b.jsxs)(p.SelectContent,{children:[(0,b.jsx)(p.SelectItem,{value:"all",children:"All Status"}),(0,b.jsx)(p.SelectItem,{value:"approved",children:"Approved"}),(0,b.jsx)(p.SelectItem,{value:"pending",children:"Pending"})]})]}),(0,b.jsxs)(m.Button,{variant:"outline",children:[(0,b.jsx)(e.Filter,{className:"h-4 w-4 mr-2"}),"More Filters"]})]})})}),(0,b.jsxs)(k.Card,{className:"glass-card",children:[(0,b.jsxs)(k.CardHeader,{children:[(0,b.jsxs)(k.CardTitle,{children:["All Listings (",E.length,")"]}),(0,b.jsx)(k.CardDescription,{children:"Review and manage rental listings"})]}),(0,b.jsx)(k.CardContent,{children:(0,b.jsxs)(q.Table,{children:[(0,b.jsx)(q.TableHeader,{children:(0,b.jsxs)(q.TableRow,{children:[(0,b.jsx)(q.TableHead,{children:"Listing"}),(0,b.jsx)(q.TableHead,{children:"Owner"}),(0,b.jsx)(q.TableHead,{children:"Category"}),(0,b.jsx)(q.TableHead,{children:"Price/Day"}),(0,b.jsx)(q.TableHead,{children:"Status"}),(0,b.jsx)(q.TableHead,{children:"Created"}),(0,b.jsx)(q.TableHead,{className:"text-right",children:"Actions"})]})}),(0,b.jsx)(q.TableBody,{children:E.map(a=>{let c,d=(c=a.ownerId,z.find(a=>a.id===c));return(0,b.jsxs)(q.TableRow,{children:[(0,b.jsx)(q.TableCell,{children:(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("img",{src:a.images[0]||"/placeholder.svg",alt:a.title,className:"h-12 w-16 object-cover rounded-lg"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"font-medium",children:a.title}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:a.location})]})]})}),(0,b.jsx)(q.TableCell,{children:(0,b.jsx)("p",{className:"font-medium",children:d?.fullName})}),(0,b.jsx)(q.TableCell,{children:(0,b.jsx)(n.Badge,{variant:"outline",className:"capitalize",children:a.category})}),(0,b.jsxs)(q.TableCell,{children:["KSh ",a.pricePerDay.toLocaleString()]}),(0,b.jsx)(q.TableCell,{children:a.isApproved?(0,b.jsx)(n.Badge,{className:"bg-green-500/20 text-green-600",children:"Approved"}):(0,b.jsx)(n.Badge,{className:"bg-orange-500/20 text-orange-600",children:"Pending"})}),(0,b.jsx)(q.TableCell,{className:"text-muted-foreground",children:a.createdAt.toLocaleDateString()}),(0,b.jsx)(q.TableCell,{className:"text-right",children:(0,b.jsxs)(o.DropdownMenu,{children:[(0,b.jsx)(o.DropdownMenuTrigger,{asChild:!0,children:(0,b.jsx)(m.Button,{variant:"ghost",size:"icon",children:(0,b.jsx)(f.MoreHorizontal,{className:"h-4 w-4"})})}),(0,b.jsxs)(o.DropdownMenuContent,{align:"end",children:[(0,b.jsx)(o.DropdownMenuLabel,{children:"Actions"}),(0,b.jsx)(o.DropdownMenuSeparator,{}),(0,b.jsxs)(o.DropdownMenuItem,{children:[(0,b.jsx)(g.Eye,{className:"h-4 w-4 mr-2"}),"View Details"]}),!a.isApproved&&(0,b.jsxs)(o.DropdownMenuItem,{className:"text-green-600",children:[(0,b.jsx)(h.CheckCircle,{className:"h-4 w-4 mr-2"}),"Approve"]}),(0,b.jsxs)(o.DropdownMenuItem,{className:"text-destructive",children:[(0,b.jsx)(i.XCircle,{className:"h-4 w-4 mr-2"}),"Remove"]})]})]})})]},a.id)})})]})})]})]})}a.s(["ListingsManagement",()=>s])}];

//# sourceMappingURL=_09191438._.js.map