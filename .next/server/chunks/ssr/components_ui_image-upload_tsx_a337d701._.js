module.exports=[71294,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(41212);function e(a){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a})(a)}function f(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}function g(a,b){var c=Object.keys(a);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(a);b&&(d=d.filter(function(b){return Object.getOwnPropertyDescriptor(a,b).enumerable})),c.push.apply(c,d)}return c}function h(a){for(var b=1;b<arguments.length;b++){var c=null!=arguments[b]?arguments[b]:{};b%2?g(Object(c),!0).forEach(function(b){f(a,b,c[b])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(c)):g(Object(c)).forEach(function(b){Object.defineProperty(a,b,Object.getOwnPropertyDescriptor(c,b))})}return a}function i(a,b){(null==b||b>a.length)&&(b=a.length);for(var c=0,d=Array(b);c<b;c++)d[c]=a[c];return d}var j={message:"Missing urlEndpoint during SDK initialization",help:""},k={message:"Invalid transformationPosition parameter",help:""},l={message:"Missing file parameter for upload",help:""},m={message:"Missing fileName parameter for upload",help:""},n={message:"Missing public key for upload",help:""},o={message:"Request to ImageKit upload endpoint failed due to network error",help:""},p={message:"Invalid uploadOptions parameter",help:""},q={message:"Missing signature for upload. The SDK expects token, signature and expire for authentication.",help:""},r={message:"Missing token for upload. The SDK expects token, signature and expire for authentication.",help:""},s={message:"Missing expire for upload. The SDK expects token, signature and expire for authentication.",help:""},t={message:"Invalid transformation parameter. Please include at least pre, post, or both.",help:""},u={message:"Invalid pre transformation parameter.",help:""},v={message:"Invalid post transformation parameter.",help:""};function w(a,b,c){"function"==typeof c&&(a?c(b,null):c(null,b))}var x=function(a,b){var c,d,e=h({},a);return Object.defineProperty(e,"$ResponseMetadata",{value:{statusCode:b.status,headers:(c={},Object.keys(d=b.getAllResponseHeaders()).length&&d.trim().split(/[\r\n]+/).map(function(a){return a.split(/: /)}).forEach(function(a){c[a[0].trim()]=a[1].trim()}),c)},enumerable:!1,writable:!1}),e},y=function(a,b,c){z(a,b).then(function(a){return w(!1,a,c)},function(a){return w(!0,a,c)})},z=function(a,b){return new Promise(function(c,d){a.open("POST","https://upload.imagekit.io/api/v1/files/upload"),a.onerror=function(a){return d(o)},a.onload=function(){if(200===a.status)try{var b=JSON.parse(a.responseText),e=x(b,a);return c(e)}catch(a){return d(a)}try{var b=JSON.parse(a.responseText),f=x(b,a);return d(f)}catch(a){return d(a)}},a.send(b)})},A=function(a,b,c,d){if(!b.file)return void w(!0,l,d);if(!b.fileName)return void w(!0,m,d);if(!c.publicKey)return void w(!0,n,d);if(!b.token)return void w(!0,r,d);if(!b.signature)return void w(!0,q,d);if(!b.expire)return void w(!0,s,d);if(b.transformation){if(!(Object.keys(b.transformation).includes("pre")||Object.keys(b.transformation).includes("post")))return void w(!0,t,d);if(Object.keys(b.transformation).includes("pre")&&!b.transformation.pre)return void w(!0,u,d);if(Object.keys(b.transformation).includes("post"))if(!Array.isArray(b.transformation.post))return void w(!0,v,d);else{var f,g,h=function(a,b){if("undefined"==typeof Symbol||null==a[Symbol.iterator]){if(Array.isArray(a)||(e=function(a,b){if(a){if("string"==typeof a)return i(a,void 0);var c=Object.prototype.toString.call(a).slice(8,-1);if("Object"===c&&a.constructor&&(c=a.constructor.name),"Map"===c||"Set"===c)return Array.from(a);if("Arguments"===c||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(c))return i(a,void 0)}}(a))){e&&(a=e);var c=0,d=function(){};return{s:d,n:function(){return c>=a.length?{done:!0}:{done:!1,value:a[c++]}},e:function(a){throw a},f:d}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var e,f,g=!0,h=!1;return{s:function(){e=a[Symbol.iterator]()},n:function(){var a=e.next();return g=a.done,a},e:function(a){h=!0,f=a},f:function(){try{g||null==e.return||e.return()}finally{if(h)throw f}}}}(b.transformation.post);try{for(h.s();!(g=h.n()).done;){var j=g.value;if("abs"===j.type&&!(j.protocol||j.value)||"transformation"===j.type&&!j.value)return void w(!0,v,d)}}catch(a){h.e(a)}finally{h.f()}}}var k=new FormData;for(f in b)f&&("file"===f&&"string"!=typeof b.file?k.append("file",b.file,String(b.fileName)):"tags"===f&&Array.isArray(b.tags)?k.append("tags",b.tags.join(",")):"signature"===f?k.append("signature",b.signature):"expire"===f?k.append("expire",String(b.expire)):"token"===f?k.append("token",b.token):"responseFields"===f&&Array.isArray(b.responseFields)?k.append("responseFields",b.responseFields.join(",")):"extensions"===f&&Array.isArray(b.extensions)?k.append("extensions",JSON.stringify(b.extensions)):"customMetadata"!==f||"object"!==e(b.customMetadata)||Array.isArray(b.customMetadata)||null===b.customMetadata?"transformation"===f&&"object"===e(b.transformation)&&null!==b.transformation?k.append(f,JSON.stringify(b.transformation)):"checks"===f&&b.checks?k.append("checks",b.checks):void 0!==b[f]&&k.append(f,String(b[f])):k.append("customMetadata",JSON.stringify(b.customMetadata)));k.append("publicKey",c.publicKey),y(a,k,d)},B={width:"w",height:"h",aspectRatio:"ar",quality:"q",crop:"c",cropMode:"cm",focus:"fo",x:"x",y:"y",format:"f",radius:"r",background:"bg",border:"b",rotation:"rt",rotate:"rt",blur:"bl",named:"n",progressive:"pr",lossless:"lo",trim:"t",metadata:"md",colorProfile:"cp",defaultImage:"di",dpr:"dpr",effectSharpen:"e-sharpen",effectUSM:"e-usm",effectContrast:"e-contrast",effectGray:"e-grayscale",original:"orig",effectShadow:"e-shadow",effectGradient:"e-gradient",raw:"raw"},C="path",D="query",E=[C,D],F=function(){return":"};function G(a,b){var c=b||"/",d=RegExp(c+"{1,}","g");return a.join(c).replace(d,c)}var H=function(a){if(!a.path&&!a.src)return"";try{a.path?(e=new URL(a.urlEndpoint).pathname,c=new URL(G([a.urlEndpoint.replace(e,""),a.path]))):(c=new URL(a.src),d=!0)}catch(a){return console.error(a),""}for(var b in a.queryParameters)c.searchParams.append(b,String(a.queryParameters[b]));var c,d,e,f=function(a){if(!Array.isArray(a))return"";for(var b=[],c=0,d=a.length;c<d;c++){var e=[];for(var f in a[c])if(void 0!==a[c][f]&&null!==a[c][f]){var g=(h=f)&&(B[h]||B[h.toLowerCase()])||"";if(g||(g=f),"-"===a[c][f])e.push(g);else if("raw"===f)e.push(a[c][f]);else{var h,i,j,k=a[c][f];"di"===g&&("string"==typeof("string"==typeof(i=k||"")&&"/"==i[0]&&(i=i.slice(1)),j=i)&&"/"==j[j.length-1]&&(j=j.substring(0,j.length-1)),k=(k=j).replace(/\//g,"@@")),e.push([g,k].join("-"))}}b.push(e.join(","))}return b.join(F())}(a.transformation);return f&&f.length&&(a.transformationPosition===D||d?c.searchParams.append("tr",f):c.pathname=G(["tr"+F()+f,c.pathname])),e?c.pathname=G([e,c.pathname]):c.pathname=G([c.pathname]),c.href},I=function(){var a;function b(a){var c;if(!(this instanceof b))throw TypeError("Cannot call a class as a function");if(f(this,"options",{sdkVersion:"javascript-".concat("3.0.2"),publicKey:"",urlEndpoint:"",transformationPosition:C}),this.options=h(h({},this.options),a||{}),!this.options.urlEndpoint)throw j;if(void 0===(c=this.options).transformationPosition||-1==E.indexOf(c.transformationPosition))throw k}return a=[{key:"url",value:function(a){return H(h(h({},this.options),a))}},{key:"upload",value:function(a,b,c){if("function"==typeof b?f=b:c=b||{},!a||"object"!==e(a))return w(!0,p,f);var d,f,g=h(h({},this.options),c),i=(a||{}).xhr;delete a.xhr;var j=i||new XMLHttpRequest;return(d=this,function(){for(var a=arguments.length,b=Array(a),c=0;c<a;c++)b[c]=arguments[c];if(b.length!==A.length||void 0===b[b.length-1])return new Promise(function(a,c){b.pop(),b.push(function(b){if(b)return c(b);for(var d=arguments.length,e=Array(d>1?d-1:0),f=1;f<d;f++)e[f-1]=arguments[f];a(e.length>1?e:e[0])}),A.call.apply(A,[d].concat(b))});if("function"!=typeof b[b.length-1])throw Error("Callback must be a function.");A.call.apply(A,[d].concat(b))})(j,a,g,f)}}],function(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}(b.prototype,a),b}();function J(a,b){var c=Object.keys(a);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(a);b&&(d=d.filter(function(b){return Object.getOwnPropertyDescriptor(a,b).enumerable})),c.push.apply(c,d)}return c}function K(a){for(var b=1;b<arguments.length;b++){var c=null!=arguments[b]?arguments[b]:{};b%2?J(Object(c),!0).forEach(function(b){!function(a,b,c){var d;(b="symbol"==typeof(d=function(a,b){if("object"!=typeof a||!a)return a;var c=a[Symbol.toPrimitive];if(void 0!==c){var d=c.call(a,b||"default");if("object"!=typeof d)return d;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===b?String:Number)(a)}(b,"string"))?d:String(d))in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c}(a,b,c[b])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(c)):J(Object(c)).forEach(function(b){Object.defineProperty(a,b,Object.getOwnPropertyDescriptor(c,b))})}return a}function L(a){return(L="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a})(a)}function M(){return(M=Object.assign.bind()).apply(this,arguments)}function N(a,b){if(a){if("string"==typeof a)return O(a,b);var c=Object.prototype.toString.call(a).slice(8,-1);if("Object"===c&&a.constructor&&(c=a.constructor.name),"Map"===c||"Set"===c)return Array.from(a);if("Arguments"===c||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(c))return O(a,b)}}function O(a,b){(null==b||b>a.length)&&(b=a.length);for(var c=0,d=Array(b);c<b;c++)d[c]=a[c];return d}var P={publicKey:d.default.string,urlEndpoint:d.default.string,authenticator:d.default.func},Q=K(K({},P),{},{transformationPosition:d.default.oneOf(["path","query"])}),R=K(K({},Q),{},{ikClient:d.default.instanceOf(I)}),S=(0,c.createContext)({}),T=function(a){var b=function(a){for(var b={},c=Object.keys(R),d=0;d<c.length;d++){var e=c[d],f=a[e];f&&(b[e]=f)}return b}(K({},a));return b.urlEndpoint&&""!==b.urlEndpoint.trim()&&(b.ikClient=new I({urlEndpoint:b.urlEndpoint,sdkVersion:""})),c.default.createElement(S.Provider,{value:b},a.children)},U={loading:d.default.oneOf(["lazy"]),lqip:d.default.shape({active:d.default.bool,quality:d.default.number,threshold:d.default.number,blur:d.default.number,raw:d.default.string}),path:d.default.string,src:d.default.string,queryParameters:d.default.objectOf(d.default.oneOfType([d.default.string,d.default.number]).isRequired),transformation:d.default.arrayOf(d.default.object.isRequired),transformationPosition:d.default.oneOf(["path","query"])},V=(K(K({},P),U),function(a){var b=(0,c.useContext)(S);return{getIKClient:function(){if(b&&b.ikClient)return b.ikClient;var c=a.urlEndpoint;if(!(c=c||b&&b.urlEndpoint)||""===c.trim())throw Error("Missing urlEndpoint during initialization");return new I({urlEndpoint:c,sdkVersion:""})}}}),W={path:d.default.string,src:d.default.string,queryParameters:d.default.objectOf(d.default.oneOfType([d.default.string,d.default.number]).isRequired),transformation:d.default.arrayOf(d.default.object.isRequired),transformationPosition:d.default.oneOf(["path","query"])};K(K({},P),W);var X=["publicKey","urlEndpoint","authenticator","fileName","useUniqueFileName","tags","folder","isPrivateFile","customCoordinates","responseFields","onError","onSuccess","onUploadStart","onUploadProgress","validateFile","webhookUrl","overwriteFile","overwriteAITags","overwriteTags","overwriteCustomMetadata","extensions","customMetadata","transformation","checks","overrideParameters"],Y=(0,c.forwardRef)(function(a,b){var d,e,f=(d=(0,c.useState)({}),e=2,function(a){if(Array.isArray(a))return a}(d)||function(a,b){var c=null==a?null:"undefined"!=typeof Symbol&&a[Symbol.iterator]||a["@@iterator"];if(null!=c){var d,e,f,g,h=[],i=!0,j=!1;try{if(f=(c=c.call(a)).next,0===b){if(Object(c)!==c)return;i=!1}else for(;!(i=(d=f.call(c)).done)&&(h.push(d.value),h.length!==b);i=!0);}catch(a){j=!0,e=a}finally{try{if(!i&&null!=c.return&&(g=c.return(),Object(g)!==g))return}finally{if(j)throw e}}return h}}(d,2)||N(d,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),g=f[0],h=f[1],i=(0,c.useContext)(S),j=V(K({},a)).getIKClient;(0,c.useEffect)(function(){b&&"object"===L(b)&&b.hasOwnProperty("current")&&(b.current.abort=function(){g.xhr&&g.xhr.abort()})},[g.xhr,b]),a.publicKey,a.urlEndpoint,a.authenticator;var k=a.fileName,l=a.useUniqueFileName,m=a.tags,n=a.folder,o=a.isPrivateFile,p=a.customCoordinates,q=a.responseFields,r=a.onError,s=a.onSuccess;a.onUploadStart,a.onUploadProgress,a.validateFile;var t=a.webhookUrl,u=a.overwriteFile,v=a.overwriteAITags,w=a.overwriteTags,x=a.overwriteCustomMetadata,y=a.extensions,z=a.customMetadata,A=a.transformation,B=a.checks;a.overrideParameters;var C=function(a,b){if(null==a)return{};var c,d,e=function(a,b){if(null==a)return{};var c,d,e={},f=Object.keys(a);for(d=0;d<f.length;d++)c=f[d],b.indexOf(c)>=0||(e[c]=a[c]);return e}(a,b);if(Object.getOwnPropertySymbols){var f=Object.getOwnPropertySymbols(a);for(d=0;d<f.length;d++)c=f[d],!(b.indexOf(c)>=0)&&Object.prototype.propertyIsEnumerable.call(a,c)&&(e[c]=a[c])}return e}(a,X),D=function(b){var c,d=a.publicKey||i.publicKey,e=a.authenticator||i.authenticator,f=a.urlEndpoint||i.urlEndpoint;if(!d||""===d.trim()){console.error("Missing publicKey"),r&&"function"==typeof r&&r({message:"Missing publicKey"});return}if(!e){console.error("The authenticator function is not provided."),r&&"function"==typeof r&&r({message:"The authenticator function is not provided."});return}if("function"!=typeof e){console.error("The provided authenticator is not a function."),r&&"function"==typeof r&&r({message:"The provided authenticator is not a function."});return}if(!f||""===f.trim()){console.error("Missing urlEndpoint"),r&&"function"==typeof r&&r({message:"Missing urlEndpoint"});return}var g=j(),C=null==(c=b.target.files)?void 0:c[0];if(C&&(!a.validateFile||a.validateFile(C))){a.onUploadStart&&"function"==typeof a.onUploadStart&&a.onUploadStart(b);var D={};a.overrideParameters&&"function"==typeof a.overrideParameters&&(D=a.overrideParameters(C)||{});var E=new XMLHttpRequest,F=function(b){a.onUploadProgress&&"function"==typeof a.onUploadProgress&&a.onUploadProgress(b)};E.upload.addEventListener("progress",F);var G={file:C,fileName:D.fileName||k||C.name,useUniqueFileName:D.useUniqueFileName||l,tags:D.tags||m,folder:D.folder||n,isPrivateFile:D.isPrivateFile||o,customCoordinates:D.customCoordinates||p,responseFields:q,extensions:D.extensions||y,webhookUrl:D.webhookUrl||t,overwriteFile:D.overwriteFile||u,overwriteAITags:D.overwriteAITags||v,overwriteTags:D.overwriteTags||w,overwriteCustomMetadata:D.overwriteCustomMetadata||x,customMetadata:D.customMetadata||z,signature:"",expire:0,token:"",xhr:E,transformation:D.transformation||A,checks:D.checks||B},H=e();if(!(H instanceof Promise)){r&&"function"==typeof r&&r({message:"The authenticator function is expected to return a Promise instance."});return}H.then(function(a){var b=a.signature,c=a.token,e=a.expire;G.signature=b,G.expire=e,G.token=c,g.upload(G,function(a,b){a?r&&"function"==typeof r&&(console.log(a),r(a)):s&&"function"==typeof s&&s(b),E.upload.removeEventListener("progress",F)},{publicKey:d}),h({xhr:E})}).catch(function(a){var b;b=a instanceof Array?a[0]:a,r&&"function"==typeof r&&r({message:String(b)})})}};return c.default.createElement("input",M({},C,{ref:b,type:"file",onChange:function(b){a.onChange&&"function"==typeof a.onChange&&a.onChange(b),D(b)}}))}),Z=a.i(96221);let $=(0,a.i(70106).default)("CloudUpload",[["path",{d:"M12 13v8",key:"1l5pq0"}],["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"m8 17 4-4 4 4",key:"1quai1"}]]),_=async()=>{try{let a=await fetch("/api/imagekit/auth");if(!a.ok){let b=await a.text();throw Error(`Request failed with status ${a.status}: ${b}`)}let{signature:b,expire:c,token:d}=await a.json();return{signature:b,expire:c,token:d}}catch(a){throw Error(`Authentication request failed: ${a.message}`)}};function aa({onSuccess:a,onError:d,folder:e="/uploads",className:f="",buttonText:g="Upload Image",variant:h="outline",maxSizeMB:i=10}){let[j,k]=(0,c.useState)(!1),l=(0,c.useId)(),m=`imagekit-upload-${l}`;return(0,b.jsx)(T,{publicKey:"public_qvHAZC5VBwvFfMvF6CxulrvgOlM=",urlEndpoint:"https://ik.imagekit.io/jsmasterypaul",authenticator:_,children:(0,b.jsxs)("div",{className:`relative flex items-center gap-2 ${f}`,children:[j&&(0,b.jsx)(Z.Loader2,{className:"h-4 w-4 animate-spin text-muted-foreground"}),(0,b.jsx)("div",{className:"hidden",children:(0,b.jsx)(Y,{id:m,fileName:"upload.png",folder:e,validateFile:a=>a.size<1024*i*1024,onUploadStart:()=>{k(!0)},onSuccess:b=>{k(!1),a(b)},onError:a=>{console.error("Upload Error:",a),k(!1),d(a)}})}),(0,b.jsx)("label",{htmlFor:m,children:(0,b.jsxs)("div",{className:`inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 h-10 px-4 py-2 cursor-pointer ${"outline"===h?"border border-input bg-background hover:bg-accent hover:text-accent-foreground":"default"===h?"bg-primary text-primary-foreground hover:bg-primary/90":"bg-secondary text-secondary-foreground hover:bg-secondary/80"}`,children:[(0,b.jsx)($,{className:"mr-2 h-4 w-4"}),j?"Uploading...":g]})})]})})}a.s(["ImageUpload",()=>aa],71294)}];

//# sourceMappingURL=components_ui_image-upload_tsx_a337d701._.js.map