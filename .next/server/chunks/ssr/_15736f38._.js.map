{"version":3,"sources":["../../../../components/ui/card.tsx","../../../../node_modules/lucide-react/src/icons/loader-circle.ts","../../../../components/dashboard/payments-page.tsx"],"sourcesContent":["import * as React from 'react'\r\n\r\nimport { cn } from '@/lib/utils'\r\n\r\nfunction Card({ className, ...props }: React.ComponentProps<'div'>) {\r\n  return (\r\n    <div\r\n      data-slot=\"card\"\r\n      className={cn(\r\n        'bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm',\r\n        className,\r\n      )}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nfunction CardHeader({ className, ...props }: React.ComponentProps<'div'>) {\r\n  return (\r\n    <div\r\n      data-slot=\"card-header\"\r\n      className={cn(\r\n        '@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-2 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6',\r\n        className,\r\n      )}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nfunction CardTitle({ className, ...props }: React.ComponentProps<'div'>) {\r\n  return (\r\n    <div\r\n      data-slot=\"card-title\"\r\n      className={cn('leading-none font-semibold', className)}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nfunction CardDescription({ className, ...props }: React.ComponentProps<'div'>) {\r\n  return (\r\n    <div\r\n      data-slot=\"card-description\"\r\n      className={cn('text-muted-foreground text-sm', className)}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nfunction CardAction({ className, ...props }: React.ComponentProps<'div'>) {\r\n  return (\r\n    <div\r\n      data-slot=\"card-action\"\r\n      className={cn(\r\n        'col-start-2 row-span-2 row-start-1 self-start justify-self-end',\r\n        className,\r\n      )}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nfunction CardContent({ className, ...props }: React.ComponentProps<'div'>) {\r\n  return (\r\n    <div\r\n      data-slot=\"card-content\"\r\n      className={cn('px-6', className)}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nfunction CardFooter({ className, ...props }: React.ComponentProps<'div'>) {\r\n  return (\r\n    <div\r\n      data-slot=\"card-footer\"\r\n      className={cn('flex items-center px-6 [.border-t]:pt-6', className)}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nexport {\r\n  Card,\r\n  CardHeader,\r\n  CardFooter,\r\n  CardTitle,\r\n  CardAction,\r\n  CardDescription,\r\n  CardContent,\r\n}\r\n","import createLucideIcon from '../createLucideIcon';\n\n/**\n * @component @name LoaderCircle\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNMjEgMTJhOSA5IDAgMSAxLTYuMjE5LTguNTYiIC8+Cjwvc3ZnPgo=) - https://lucide.dev/icons/loader-circle\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst LoaderCircle = createLucideIcon('LoaderCircle', [\n  ['path', { d: 'M21 12a9 9 0 1 1-6.219-8.56', key: '13zald' }],\n]);\n\nexport default LoaderCircle;\n","\"use client\"\r\n\r\nimport { useState, useEffect } from \"react\"\r\nimport { supabase } from \"@/lib/supabase\"\r\nimport { getBookings } from \"@/lib/actions/dashboard-actions\"\r\nimport { Card, CardContent, CardHeader, CardTitle, CardDescription } from \"@/components/ui/card\"\r\nimport { Badge } from \"@/components/ui/badge\"\r\nimport { Loader2, Receipt, Search } from \"lucide-react\"\r\nimport { Input } from \"@/components/ui/input\"\r\n\r\nexport function PaymentsPage() {\r\n    const [loading, setLoading] = useState(true)\r\n    const [bookings, setBookings] = useState<any[]>([])\r\n    const [searchTerm, setSearchTerm] = useState(\"\")\r\n\r\n    useEffect(() => {\r\n        async function fetchPayments() {\r\n            const { data: { user } } = await supabase.auth.getUser()\r\n            if (user) {\r\n                // Fetch bookings as renter to see what they paid for\r\n                const data = await getBookings(user.id, 'renter')\r\n                setBookings(data || [])\r\n            }\r\n            setLoading(false)\r\n        }\r\n        fetchPayments()\r\n    }, [])\r\n\r\n    const filteredBookings = bookings.filter(b =>\r\n        b.listing?.title?.toLowerCase().includes(searchTerm.toLowerCase())\r\n    )\r\n\r\n    const getTotalSpent = () => {\r\n        return filteredBookings\r\n            .filter(b => b.status === \"completed\" || b.status === \"confirmed\")\r\n            .reduce((acc, curr) => acc + (Number(curr.total_amount) || 0), 0)\r\n    }\r\n\r\n    if (loading) return <div className=\"flex justify-center p-20\"><Loader2 className=\"animate-spin h-8 w-8 text-primary\" /></div>\r\n\r\n    return (\r\n        <div className=\"space-y-6\">\r\n            <div>\r\n                <h1 className=\"text-3xl font-bold\">Payments Record</h1>\r\n                <p className=\"text-muted-foreground\">Track all payments made for your rentals</p>\r\n            </div>\r\n\r\n            <div className=\"grid gap-6 md:grid-cols-2 lg:grid-cols-4\">\r\n                <Card className=\"glass-card\">\r\n                    <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\r\n                        <CardTitle className=\"text-sm font-medium\">Total Spent</CardTitle>\r\n                        <Receipt className=\"h-4 w-4 text-muted-foreground\" />\r\n                    </CardHeader>\r\n                    <CardContent>\r\n                        <div className=\"text-2xl font-bold\">KSh {getTotalSpent().toLocaleString()}</div>\r\n                        <p className=\"text-xs text-muted-foreground\">On confirmed/completed bookings</p>\r\n                    </CardContent>\r\n                </Card>\r\n                <Card className=\"glass-card\">\r\n                    <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\r\n                        <CardTitle className=\"text-sm font-medium\">Total Transactions</CardTitle>\r\n                        <Receipt className=\"h-4 w-4 text-muted-foreground\" />\r\n                    </CardHeader>\r\n                    <CardContent>\r\n                        <div className=\"text-2xl font-bold\">{bookings.length}</div>\r\n                        <p className=\"text-xs text-muted-foreground\">Lifetime bookings</p>\r\n                    </CardContent>\r\n                </Card>\r\n            </div>\r\n\r\n            <Card className=\"glass-card\">\r\n                <CardHeader>\r\n                    <div className=\"flex items-center justify-between\">\r\n                        <div>\r\n                            <CardTitle>Transaction History</CardTitle>\r\n                            <CardDescription>Detailed list of your rental payments</CardDescription>\r\n                        </div>\r\n                        <div className=\"relative w-64\">\r\n                            <Search className=\"absolute left-2 top-2.5 h-4 w-4 text-muted-foreground\" />\r\n                            <Input\r\n                                placeholder=\"Search rentals...\"\r\n                                className=\"pl-8\"\r\n                                value={searchTerm}\r\n                                onChange={(e) => setSearchTerm(e.target.value)}\r\n                            />\r\n                        </div>\r\n                    </div>\r\n                </CardHeader>\r\n                <CardContent>\r\n                    {filteredBookings.length === 0 ? (\r\n                        <div className=\"text-center py-12 text-muted-foreground\">No payment records found.</div>\r\n                    ) : (\r\n                        <div className=\"space-y-4\">\r\n                            <div className=\"grid grid-cols-5 font-medium text-sm text-muted-foreground border-b pb-2\">\r\n                                <div className=\"col-span-2\">Item / Service</div>\r\n                                <div>Date</div>\r\n                                <div>Status</div>\r\n                                <div className=\"text-right\">Amount</div>\r\n                            </div>\r\n                            {filteredBookings.map((booking) => (\r\n                                <div key={booking.id} className=\"grid grid-cols-5 items-center py-4 border-b last:border-0 hover:bg-muted/10 transition-colors\">\r\n                                    <div className=\"col-span-2 flex items-center gap-3\">\r\n                                        <div className=\"h-10 w-10 rounded-md bg-muted overflow-hidden\">\r\n                                            <img\r\n                                                src={booking.listing?.images?.[0] || '/placeholder.svg'}\r\n                                                alt={booking.listing?.title}\r\n                                                className=\"h-full w-full object-cover\"\r\n                                            />\r\n                                        </div>\r\n                                        <div>\r\n                                            <div className=\"font-medium\">{booking.listing?.title}</div>\r\n                                            <div className=\"text-xs text-muted-foreground\">ID: {booking.id.slice(0, 8)}</div>\r\n                                        </div>\r\n                                    </div>\r\n                                    <div className=\"text-sm\">\r\n                                        {new Date(booking.created_at).toLocaleDateString()}\r\n                                    </div>\r\n                                    <div>\r\n                                        <Badge variant={\r\n                                            booking.status === 'completed' ? 'default' :\r\n                                                booking.status === 'confirmed' ? 'secondary' :\r\n                                                    booking.status === 'cancelled' ? 'destructive' : 'outline'\r\n                                        } className=\"capitalize\">\r\n                                            {booking.status}\r\n                                        </Badge>\r\n                                    </div>\r\n                                    <div className=\"text-right font-medium\">\r\n                                        KSh {Number(booking.total_amount).toLocaleString()}\r\n                                    </div>\r\n                                </div>\r\n                            ))}\r\n                        </div>\r\n                    )}\r\n                </CardContent>\r\n            </Card>\r\n        </div>\r\n    )\r\n}\r\n"],"names":[],"mappings":"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","ignoreList":[1]}