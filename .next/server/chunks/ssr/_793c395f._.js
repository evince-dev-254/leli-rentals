module.exports=[37936,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"registerServerReference",{enumerable:!0,get:function(){return d.registerServerReference}});let d=a.r(11857)},13095,(a,b,c)=>{"use strict";function d(a){for(let b=0;b<a.length;b++){let c=a[b];if("function"!=typeof c)throw Object.defineProperty(Error(`A "use server" file can only export async functions, found ${typeof c}.
Read more: https://nextjs.org/docs/messages/invalid-use-server-value`),"__NEXT_ERROR_CODE",{value:"E352",enumerable:!1,configurable:!0})}}Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"ensureServerEntryExports",{enumerable:!0,get:function(){return d}})},27837,a=>{"use strict";var b=a.i(51100);let c=process.env.SUPABASE_SERVICE_ROLE_KEY,d=(0,b.createClient)("https://tdtjevpnqrwqcjnuywrn.supabase.co",c,{auth:{autoRefreshToken:!1,persistSession:!1}});a.s(["supabaseAdmin",0,d])},55515,a=>{"use strict";var b=a.i(37936),c=a.i(27837);async function d(){let{data:a,error:b}=await c.supabaseAdmin.from("affiliates").select(`
            *,
            user_profiles:user_id (
                full_name,
                email,
                avatar_url,
                account_status
            )
        `).order("created_at",{ascending:!1});return b?(console.error("Error fetching all affiliates:",b),[]):a}async function e(a,b){let{data:d,error:e}=await c.supabaseAdmin.from("affiliates").select("*").or(`user_id.eq.${a},email.eq.${b}`).single();if(d)return await c.supabaseAdmin.from("user_profiles").update({role:"affiliate"}).eq("id",a),{success:!0,data:d};let f=Math.random().toString(36).substring(2,10).toUpperCase(),g=`REF-${f}`,{data:h,error:i}=await c.supabaseAdmin.from("affiliates").insert({user_id:a,email:b,invite_code:f,referral_code:g,status:"active",commission_rate:10}).select().single();if(i)return console.error("Error joining affiliate program:",i),{success:!1,error:i.message};let{error:j}=await c.supabaseAdmin.from("user_profiles").update({role:"affiliate"}).eq("id",a);return j&&console.error("Error updating role:",j),{success:!0,data:h}}(0,a.i(13095).ensureServerEntryExports)([d,e]),(0,b.registerServerReference)(d,"000cfcf38d8ee44da2ec528fb72668c340e4ed9fb8",null),(0,b.registerServerReference)(e,"601796f08834749640eff9c7237738fe2946987897",null),a.s(["getAllAffiliates",()=>d,"joinAffiliateProgram",()=>e])},84569,a=>{"use strict";var b=a.i(55515);a.s([],95065),a.i(95065),a.s(["000cfcf38d8ee44da2ec528fb72668c340e4ed9fb8",()=>b.getAllAffiliates],84569)}];

//# sourceMappingURL=_793c395f._.js.map