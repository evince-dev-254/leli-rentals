(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,70065,e=>{"use strict";var s=e.i(43476),t=e.i(47163);function a({className:e,...a}){return(0,s.jsx)("div",{"data-slot":"card",className:(0,t.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",e),...a})}function r({className:e,...a}){return(0,s.jsx)("div",{"data-slot":"card-header",className:(0,t.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-2 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",e),...a})}function l({className:e,...a}){return(0,s.jsx)("div",{"data-slot":"card-title",className:(0,t.cn)("leading-none font-semibold",e),...a})}function i({className:e,...a}){return(0,s.jsx)("div",{"data-slot":"card-description",className:(0,t.cn)("text-muted-foreground text-sm",e),...a})}function n({className:e,...a}){return(0,s.jsx)("div",{"data-slot":"card-content",className:(0,t.cn)("px-6",e),...a})}e.s(["Card",()=>a,"CardContent",()=>n,"CardDescription",()=>i,"CardHeader",()=>r,"CardTitle",()=>l])},89393,e=>{"use strict";var s=e.i(43476),t=e.i(57688),a=e.i(47163);function r({className:e,size:r=60}){return(0,s.jsxs)("div",{className:(0,a.cn)("relative flex items-center justify-center",e),children:[(0,s.jsx)("div",{className:"absolute inset-0 bg-primary/20 rounded-full animate-ping opacity-75"}),(0,s.jsx)("div",{className:"absolute inset-0 bg-primary/10 rounded-full animate-pulse delay-75"}),(0,s.jsx)("div",{className:"relative bg-background/80 backdrop-blur-sm rounded-full p-4 shadow-xl ring-1 ring-border/50 border border-primary/10",children:(0,s.jsx)(t.default,{src:"/logo.png",alt:"Loading...",width:r,height:r,className:"h-auto w-auto object-contain dark:invert animate-pulse duration-1000",priority:!0})})]})}e.s(["LoadingLogo",()=>r])},86536,e=>{"use strict";let s=(0,e.i(75254).default)("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);e.s(["Eye",()=>s],86536)},27612,e=>{"use strict";let s=(0,e.i(75254).default)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);e.s(["Trash2",()=>s],27612)},41071,e=>{"use strict";let s=(0,e.i(75254).default)("Ellipsis",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]]);e.s(["MoreHorizontal",()=>s],41071)},19454,e=>{"use strict";var s=e.i(43476),t=e.i(71645),a=e.i(22016),r=e.i(7233),l=e.i(55436),i=e.i(41071),n=e.i(86536),c=e.i(75254);let d=(0,c.default)("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);var o=e.i(27612);let u=(0,c.default)("ToggleLeft",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"6",ry:"6",key:"f2vt7d"}],["circle",{cx:"8",cy:"12",r:"2",key:"1nvbw3"}]]),x=(0,c.default)("ToggleRight",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"6",ry:"6",key:"f2vt7d"}],["circle",{cx:"16",cy:"12",r:"2",key:"4ma0v8"}]]);var h=e.i(89393),m=e.i(70065),g=e.i(23750),j=e.i(67881),f=e.i(94179),p=e.i(63415),v=e.i(62870),y=e.i(27158),w=e.i(17927);function N(){let[e,c]=(0,t.useState)([]),[N,b]=(0,t.useState)(!0),[C,S]=(0,t.useState)(""),[k,M]=(0,t.useState)("all"),[L,T]=(0,t.useState)(null);(0,t.useEffect)(()=>{!async function(){try{let{data:{user:e}}=await w.supabase.auth.getUser();if(e){let{data:s}=await w.supabase.from("user_profiles").select("role").eq("id",e.id).single();T(s?.role||"renter");let t=await (0,y.getOwnerData)(e.id);c(t||[])}}catch(e){console.error("Error fetching listings:",e)}finally{b(!1)}}()},[]);let D=e.filter(e=>{let s=e.title.toLowerCase().includes(C.toLowerCase()),t="all"===k||e.status===k;return s&&t});return N?(0,s.jsx)("div",{className:"flex justify-center py-20",children:(0,s.jsx)(h.LoadingLogo,{size:60})}):(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-3xl font-bold",children:"My Listings"}),(0,s.jsx)("p",{className:"text-muted-foreground",children:"Manage your rental listings"})]}),"renter"!==L&&(0,s.jsx)(j.Button,{className:"bg-primary text-primary-foreground",asChild:!0,children:(0,s.jsxs)(a.default,{href:"/dashboard/listings/new",children:[(0,s.jsx)(r.Plus,{className:"h-4 w-4 mr-2"}),"New Listing"]})})]}),(0,s.jsx)(m.Card,{className:"glass-card",children:(0,s.jsx)(m.CardContent,{className:"pt-6",children:(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4",children:[(0,s.jsxs)("div",{className:"relative flex-1",children:[(0,s.jsx)(l.Search,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),(0,s.jsx)(g.Input,{placeholder:"Search listings...",className:"pl-10",value:C,onChange:e=>S(e.target.value)})]}),(0,s.jsxs)(v.Select,{value:k,onValueChange:M,children:[(0,s.jsx)(v.SelectTrigger,{className:"w-full sm:w-40",children:(0,s.jsx)(v.SelectValue,{placeholder:"Status"})}),(0,s.jsxs)(v.SelectContent,{children:[(0,s.jsx)(v.SelectItem,{value:"all",children:"All Status"}),(0,s.jsx)(v.SelectItem,{value:"active",children:"Active"}),(0,s.jsx)(v.SelectItem,{value:"paused",children:"Paused"}),(0,s.jsx)(v.SelectItem,{value:"pending",children:"Pending"})]})]})]})})}),(0,s.jsx)("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:D.map(e=>(0,s.jsxs)(m.Card,{className:"glass-card overflow-hidden",children:[(0,s.jsxs)("div",{className:"aspect-video relative",children:[(0,s.jsx)("img",{src:e.images?.[0]||"/placeholder.svg",alt:e.title,className:"w-full h-full object-cover"}),(0,s.jsx)(f.Badge,{className:`absolute top-3 right-3 ${"active"===e.status?"bg-green-500":"paused"===e.status?"bg-orange-500":"bg-gray-500"}`,children:e.status})]}),(0,s.jsxs)(m.CardContent,{className:"p-4",children:[(0,s.jsxs)("div",{className:"flex items-start justify-between mb-2",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"font-semibold line-clamp-1",children:e.title}),(0,s.jsx)(f.Badge,{variant:"outline",className:"text-xs mt-1",children:"Listing"})]}),(0,s.jsxs)(p.DropdownMenu,{children:[(0,s.jsx)(p.DropdownMenuTrigger,{asChild:!0,children:(0,s.jsx)(j.Button,{variant:"ghost",size:"icon",className:"h-8 w-8",children:(0,s.jsx)(i.MoreHorizontal,{className:"h-4 w-4"})})}),(0,s.jsxs)(p.DropdownMenuContent,{align:"end",children:[(0,s.jsxs)(p.DropdownMenuItem,{children:[(0,s.jsx)(n.Eye,{className:"h-4 w-4 mr-2"}),"View"]}),"renter"!==L&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(p.DropdownMenuItem,{children:[(0,s.jsx)(d,{className:"h-4 w-4 mr-2"}),"Edit"]}),(0,s.jsx)(p.DropdownMenuItem,{children:"active"===e.status?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(u,{className:"h-4 w-4 mr-2"}),"Pause"]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(x,{className:"h-4 w-4 mr-2"}),"Activate"]})}),(0,s.jsx)(p.DropdownMenuSeparator,{}),(0,s.jsxs)(p.DropdownMenuItem,{className:"text-destructive",children:[(0,s.jsx)(o.Trash2,{className:"h-4 w-4 mr-2"}),"Delete"]})]})]})]})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between text-sm text-muted-foreground mb-3",children:[(0,s.jsxs)("span",{children:[e.views_count||0," views"]}),(0,s.jsxs)("span",{children:[e.rating_count||0," reviews"]})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("span",{className:"font-bold text-primary",children:["KSh ",e.price_per_day?.toLocaleString(),(0,s.jsx)("span",{className:"font-normal text-muted-foreground text-sm",children:"/day"})]}),(0,s.jsx)(j.Button,{variant:"outline",size:"sm",asChild:!0,children:(0,s.jsx)(a.default,{href:`/listings/${e.id}`,children:"View"})})]})]})]},e.id))}),0===D.length&&(0,s.jsx)(m.Card,{className:"glass-card",children:(0,s.jsxs)(m.CardContent,{className:"py-12 text-center",children:[(0,s.jsx)("p",{className:"text-muted-foreground mb-4",children:"No listings found"}),"renter"!==L&&(0,s.jsx)(j.Button,{asChild:!0,children:(0,s.jsx)(a.default,{href:"/dashboard/listings/new",children:"Create Your First Listing"})})]})})]})}e.s(["MyListings",()=>N],19454)}]);