(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,26999,95926,e=>{"use strict";let t,a,r;var i=e.i(71645),s=e.i(81140),n=e.i(20783),o=e.i(30030),l=e.i(10772),d=e.i(69340),c=e.i(26330),u=e.i(65491),f=e.i(74606),m=e.i(96626),p=e.i(48425),g=e.i(3536),x=e.i(85369),h=e.i(86312),v=e.i(43476),w=Symbol("radix.slottable");function j(e){return i.isValidElement(e)&&"function"==typeof e.type&&"__radixId"in e.type&&e.type.__radixId===w}var _="Dialog",[b,y]=(0,o.createContextScope)(_),[N,C]=b(_),D=e=>{let{__scopeDialog:t,children:a,open:r,defaultOpen:s,onOpenChange:n,modal:o=!0}=e,c=i.useRef(null),u=i.useRef(null),[f,m]=(0,d.useControllableState)({prop:r,defaultProp:s??!1,onChange:n,caller:_});return(0,v.jsx)(N,{scope:t,triggerRef:c,contentRef:u,contentId:(0,l.useId)(),titleId:(0,l.useId)(),descriptionId:(0,l.useId)(),open:f,onOpenChange:m,onOpenToggle:i.useCallback(()=>m(e=>!e),[m]),modal:o,children:a})};D.displayName=_;var k="DialogTrigger",R=i.forwardRef((e,t)=>{let{__scopeDialog:a,...r}=e,i=C(k,a),o=(0,n.useComposedRefs)(t,i.triggerRef);return(0,v.jsx)(p.Primitive.button,{type:"button","aria-haspopup":"dialog","aria-expanded":i.open,"aria-controls":i.contentId,"data-state":X(i.open),...r,ref:o,onClick:(0,s.composeEventHandlers)(e.onClick,i.onOpenToggle)})});R.displayName=k;var S="DialogPortal",[P,O]=b(S,{forceMount:void 0}),I=e=>{let{__scopeDialog:t,forceMount:a,children:r,container:s}=e,n=C(S,t);return(0,v.jsx)(P,{scope:t,forceMount:a,children:i.Children.map(r,e=>(0,v.jsx)(m.Presence,{present:a||n.open,children:(0,v.jsx)(f.Portal,{asChild:!0,container:s,children:e})}))})};I.displayName=S;var A="DialogOverlay",E=i.forwardRef((e,t)=>{let a=O(A,e.__scopeDialog),{forceMount:r=a.forceMount,...i}=e,s=C(A,e.__scopeDialog);return s.modal?(0,v.jsx)(m.Presence,{present:r||s.open,children:(0,v.jsx)(T,{...i,ref:t})}):null});E.displayName=A;var q=((r=i.forwardRef((e,t)=>{let{children:a,...r}=e;if(i.isValidElement(a)){var s;let e,o,l=(s=a,(o=(e=Object.getOwnPropertyDescriptor(s.props,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning)?s.ref:(o=(e=Object.getOwnPropertyDescriptor(s,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning)?s.props.ref:s.props.ref||s.ref),d=function(e,t){let a={...t};for(let r in t){let i=e[r],s=t[r];/^on[A-Z]/.test(r)?i&&s?a[r]=(...e)=>{let t=s(...e);return i(...e),t}:i&&(a[r]=i):"style"===r?a[r]={...i,...s}:"className"===r&&(a[r]=[i,s].filter(Boolean).join(" "))}return{...e,...a}}(r,a.props);return a.type!==i.Fragment&&(d.ref=t?(0,n.composeRefs)(t,l):l),i.cloneElement(a,d)}return i.Children.count(a)>1?i.Children.only(null):null})).displayName="DialogOverlay.RemoveScroll.SlotClone",t=r,(a=i.forwardRef((e,a)=>{let{children:r,...s}=e,n=i.Children.toArray(r),o=n.find(j);if(o){let e=o.props.children,r=n.map(t=>t!==o?t:i.Children.count(e)>1?i.Children.only(null):i.isValidElement(e)?e.props.children:null);return(0,v.jsx)(t,{...s,ref:a,children:i.isValidElement(e)?i.cloneElement(e,void 0,r):null})}return(0,v.jsx)(t,{...s,ref:a,children:r})})).displayName="DialogOverlay.RemoveScroll.Slot",a),T=i.forwardRef((e,t)=>{let{__scopeDialog:a,...r}=e,i=C(A,a);return(0,v.jsx)(x.RemoveScroll,{as:q,allowPinchZoom:!0,shards:[i.contentRef],children:(0,v.jsx)(p.Primitive.div,{"data-state":X(i.open),...r,ref:t,style:{pointerEvents:"auto",...r.style}})})}),U="DialogContent",M=i.forwardRef((e,t)=>{let a=O(U,e.__scopeDialog),{forceMount:r=a.forceMount,...i}=e,s=C(U,e.__scopeDialog);return(0,v.jsx)(m.Presence,{present:r||s.open,children:s.modal?(0,v.jsx)(F,{...i,ref:t}):(0,v.jsx)(z,{...i,ref:t})})});M.displayName=U;var F=i.forwardRef((e,t)=>{let a=C(U,e.__scopeDialog),r=i.useRef(null),o=(0,n.useComposedRefs)(t,a.contentRef,r);return i.useEffect(()=>{let e=r.current;if(e)return(0,h.hideOthers)(e)},[]),(0,v.jsx)(B,{...e,ref:o,trapFocus:a.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:(0,s.composeEventHandlers)(e.onCloseAutoFocus,e=>{e.preventDefault(),a.triggerRef.current?.focus()}),onPointerDownOutside:(0,s.composeEventHandlers)(e.onPointerDownOutside,e=>{let t=e.detail.originalEvent,a=0===t.button&&!0===t.ctrlKey;(2===t.button||a)&&e.preventDefault()}),onFocusOutside:(0,s.composeEventHandlers)(e.onFocusOutside,e=>e.preventDefault())})}),z=i.forwardRef((e,t)=>{let a=C(U,e.__scopeDialog),r=i.useRef(!1),s=i.useRef(!1);return(0,v.jsx)(B,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:t=>{e.onCloseAutoFocus?.(t),t.defaultPrevented||(r.current||a.triggerRef.current?.focus(),t.preventDefault()),r.current=!1,s.current=!1},onInteractOutside:t=>{e.onInteractOutside?.(t),t.defaultPrevented||(r.current=!0,"pointerdown"===t.detail.originalEvent.type&&(s.current=!0));let i=t.target;a.triggerRef.current?.contains(i)&&t.preventDefault(),"focusin"===t.detail.originalEvent.type&&s.current&&t.preventDefault()}})}),B=i.forwardRef((e,t)=>{let{__scopeDialog:a,trapFocus:r,onOpenAutoFocus:s,onCloseAutoFocus:o,...l}=e,d=C(U,a),f=i.useRef(null),m=(0,n.useComposedRefs)(t,f);return(0,g.useFocusGuards)(),(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(u.FocusScope,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:s,onUnmountAutoFocus:o,children:(0,v.jsx)(c.DismissableLayer,{role:"dialog",id:d.contentId,"aria-describedby":d.descriptionId,"aria-labelledby":d.titleId,"data-state":X(d.open),...l,ref:m,onDismiss:()=>d.onOpenChange(!1)})}),(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(Q,{titleId:d.titleId}),(0,v.jsx)(Y,{contentRef:f,descriptionId:d.descriptionId})]})]})}),L="DialogTitle",H=i.forwardRef((e,t)=>{let{__scopeDialog:a,...r}=e,i=C(L,a);return(0,v.jsx)(p.Primitive.h2,{id:i.titleId,...r,ref:t})});H.displayName=L;var $="DialogDescription",V=i.forwardRef((e,t)=>{let{__scopeDialog:a,...r}=e,i=C($,a);return(0,v.jsx)(p.Primitive.p,{id:i.descriptionId,...r,ref:t})});V.displayName=$;var K="DialogClose",W=i.forwardRef((e,t)=>{let{__scopeDialog:a,...r}=e,i=C(K,a);return(0,v.jsx)(p.Primitive.button,{type:"button",...r,ref:t,onClick:(0,s.composeEventHandlers)(e.onClick,()=>i.onOpenChange(!1))})});function X(e){return e?"open":"closed"}W.displayName=K;var G="DialogTitleWarning",[Z,J]=(0,o.createContext)(G,{contentName:U,titleName:L,docsSlug:"dialog"}),Q=({titleId:e})=>{let t=J(G),a=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return i.useEffect(()=>{e&&(document.getElementById(e)||console.error(a))},[a,e]),null},Y=({contentRef:e,descriptionId:t})=>{let a=J("DialogDescriptionWarning"),r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${a.contentName}}.`;return i.useEffect(()=>{let a=e.current?.getAttribute("aria-describedby");t&&a&&(document.getElementById(t)||console.warn(r))},[r,e,t]),null};e.s(["Close",()=>W,"Content",()=>M,"Description",()=>V,"Overlay",()=>E,"Portal",()=>I,"Root",()=>D,"Title",()=>H,"Trigger",()=>R],26999);var ee=e.i(41947);e.s(["XIcon",()=>ee.default],95926)},84614,e=>{"use strict";let t=(0,e.i(75254).default)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);e.s(["User",()=>t],84614)},70065,e=>{"use strict";var t=e.i(43476),a=e.i(47163);function r({className:e,...r}){return(0,t.jsx)("div",{"data-slot":"card",className:(0,a.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",e),...r})}function i({className:e,...r}){return(0,t.jsx)("div",{"data-slot":"card-header",className:(0,a.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-2 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",e),...r})}function s({className:e,...r}){return(0,t.jsx)("div",{"data-slot":"card-title",className:(0,a.cn)("leading-none font-semibold",e),...r})}function n({className:e,...r}){return(0,t.jsx)("div",{"data-slot":"card-description",className:(0,a.cn)("text-muted-foreground text-sm",e),...r})}function o({className:e,...r}){return(0,t.jsx)("div",{"data-slot":"card-content",className:(0,a.cn)("px-6",e),...r})}e.s(["Card",()=>r,"CardContent",()=>o,"CardDescription",()=>n,"CardHeader",()=>i,"CardTitle",()=>s])},95187,(e,t,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0});var r={callServer:function(){return s.callServer},createServerReference:function(){return o.createServerReference},findSourceMapURL:function(){return n.findSourceMapURL}};for(var i in r)Object.defineProperty(a,i,{enumerable:!0,get:r[i]});let s=e.r(32120),n=e.r(92245),o=e.r(35326)},27158,e=>{"use strict";var t=e.i(17927),a=e.i(95187),r=(0,a.createServerReference)("7836f6554c113775f9349130d57af469f4e9914fb6",a.callServer,void 0,a.findSourceMapURL,"sendNewListingEmail");async function i(e){let{data:a,error:r}=await t.supabase.from("listings").select("*").eq("owner_id",e);if(r)throw r;return a}async function s(e){let{count:a,error:r}=await t.supabase.from("listings").select("*",{count:"exact",head:!0}).eq("owner_id",e);if(r)throw r;let{count:i,error:s}=await t.supabase.from("bookings").select("*",{count:"exact",head:!0}).eq("owner_id",e).in("status",["active","confirmed"]);if(s)throw s;let{data:n,error:o}=await t.supabase.from("bookings").select("total_amount").eq("owner_id",e).eq("status","completed");if(o)throw o;let l=n?.reduce((e,t)=>e+(Number(t.total_amount)||0),0)||0,{data:d,error:c}=await t.supabase.from("listings").select("views_count").eq("owner_id",e);if(c)throw c;return{listingsCount:a||0,activeBookingsCount:i||0,totalEarnings:l,totalViews:d?.reduce((e,t)=>e+(Number(t.views_count)||0),0)||0}}async function n(e,a="owner"){let r=t.supabase.from("bookings").select(`
            *,
            listing:listings(title, images),
            renter:user_profiles!bookings_renter_id_fkey(full_name, avatar_url),
            owner:user_profiles!bookings_owner_id_fkey(full_name, avatar_url)
        `).order("created_at",{ascending:!1});r="owner"===a?r.eq("owner_id",e):r.eq("renter_id",e);let{data:i,error:s}=await r;if(s)throw s;return i}async function o(e){let{data:a,error:r}=await t.supabase.from("conversations").select(`
            *,
            listing:listings(title),
            participant1:user_profiles!participant_1_id(full_name, avatar_url),
            participant2:user_profiles!participant_2_id(full_name, avatar_url),
            last_message:messages(content, created_at, is_read, sender_id)
        `).or(`participant_1_id.eq.${e},participant_2_id.eq.${e}`).order("last_message_at",{ascending:!1});if(r)throw r;return a.map(t=>{let a=t.participant_1_id===e?t.participant2:t.participant1,r=t.last_message?.[0]||null;return{...t,otherUser:a,lastMessage:r}})}async function l(e){let{data:a,error:r}=await t.supabase.from("messages").select("*").eq("conversation_id",e).order("created_at",{ascending:!0});if(r)throw r;return a}async function d(e,a,r){let{data:i,error:s}=await t.supabase.from("messages").insert({conversation_id:e,sender_id:a,content:r}).select().single();if(s)throw s;return i}async function c(e){let{data:a,error:r}=await t.supabase.from("verification_documents").select("*").eq("user_id",e);if(r)throw r;return a}async function u(e,a,r,i,s,n){let{data:o,error:l}=await t.supabase.from("verification_documents").insert({user_id:e,document_url:a,back_image_url:r,selfie_image_url:i,document_type:s,document_number:n,status:"pending"}).select().single();if(l)throw l;return o}async function f(e,a){let{data:r,error:i}=await t.supabase.from("user_profiles").update(a).eq("id",e).select().single();if(i)throw i;return r}async function m(e){let{data:a,error:r}=await t.supabase.from("affiliates").select("*").eq("user_id",e).single();if(r&&"PGRST116"!==r.code)throw r;return a||null}async function p(e){let{data:a,error:r}=await t.supabase.from("affiliates").select("id").eq("user_id",e).single();if(r||!a)return[];let{data:i,error:s}=await t.supabase.from("affiliate_referrals").select(`
            id,
            commission_amount,
            commission_status,
            created_at,
            referred_user:user_profiles!referred_user_id(full_name, avatar_url, email)
        `).eq("affiliate_id",a.id).order("created_at",{ascending:!1});if(s)throw s;return i}async function g(e){let{data:a,error:r}=await t.supabase.from("notifications").select("*").eq("user_id",e).order("created_at",{ascending:!1}).limit(10);if(r)throw r;return a}async function x(e){let{error:a}=await t.supabase.from("notifications").update({is_read:!0,read_at:new Date().toISOString()}).eq("id",e);if(a)throw a}async function h(e,a){console.log("Creating listing with data:",a);let{data:i,error:s}=await t.supabase.from("listings").insert({...a,owner_id:e,views_count:0,favorites_count:0,rating_average:0,rating_count:0,is_featured:!1,is_verified:!1,status:"pending"}).select().single();if(s)throw console.error("Supabase error creating listing:",s),s;console.log("Listing created successfully:",i);try{let{data:a}=await t.supabase.from("user_profiles").select("email, full_name").eq("id",e).single();a?.email&&await r(a.email,a.full_name?.split(" ")[0]||"User",i.title,i.id)}catch(e){console.error("Failed to send listing creation email:",e)}return i}async function v(e){let{data:a,error:r}=await t.supabase.from("bookings").select(`
            id,
            total_amount,
            end_date,
            listing:listings(title)
        `).eq("owner_id",e).eq("status","completed").order("end_date",{ascending:!1});if(r)throw r;return a.map(e=>({id:e.id,type:"earning",desc:e.listing?.title||"Rental",date:new Date(e.end_date).toLocaleDateString(),amount:e.total_amount}))}async function w(e,a,r){let i={status:a};r&&(i.rejection_reason=r);let{error:s}=await t.supabase.from("verification_documents").update(i).eq("id",e);if(s)throw s}async function j(){let{data:e,error:a}=await t.supabase.from("user_profiles").select("*").or("role.eq.admin,is_admin.eq.true");if(a)throw a;return e}async function _(e){let{data:a,error:r}=await t.supabase.from("user_profiles").select("*").eq("email",e).single();if(r)throw r;return a}e.s(["createListing",()=>h,"getAdmins",()=>j,"getAffiliateData",()=>m,"getAffiliateReferrals",()=>p,"getBookings",()=>n,"getConversations",()=>o,"getEarnings",()=>v,"getMessages",()=>l,"getNotifications",()=>g,"getOwnerData",()=>i,"getOwnerStats",()=>s,"getUserByEmail",()=>_,"getVerifications",()=>c,"markNotificationAsRead",()=>x,"sendMessage",()=>d,"updateDocumentStatus",()=>w,"updateProfile",()=>f,"uploadVerification",()=>u],27158)},69638,e=>{"use strict";let t=(0,e.i(75254).default)("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);e.s(["CheckCircle",()=>t],69638)},69035,e=>{"use strict";var t=e.i(43476),a=e.i(71645);e.i(74080);var r=e.i(91918),i=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((e,i)=>{let s=(0,r.createSlot)(`Primitive.${i}`),n=a.forwardRef((e,a)=>{let{asChild:r,...n}=e;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,t.jsx)(r?s:i,{...n,ref:a})});return n.displayName=`Primitive.${i}`,{...e,[i]:n}},{}),s="horizontal",n=["horizontal","vertical"],o=a.forwardRef((e,a)=>{var r;let{decorative:o,orientation:l=s,...d}=e,c=(r=l,n.includes(r))?l:s;return(0,t.jsx)(i.div,{"data-orientation":c,...o?{role:"none"}:{"aria-orientation":"vertical"===c?c:void 0,role:"separator"},...d,ref:a})});o.displayName="Separator";var l=e.i(47163);function d({className:e,orientation:a="horizontal",decorative:r=!0,...i}){return(0,t.jsx)(o,{"data-slot":"separator",decorative:r,orientation:a,className:(0,l.cn)("bg-border shrink-0 data-[orientation=horizontal]:h-px data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-px",e),...i})}e.s(["Separator",()=>d],69035)},10708,e=>{"use strict";var t=e.i(43476),a=e.i(71645);e.i(74080);var r=e.i(91918),i=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((e,i)=>{let s=(0,r.createSlot)(`Primitive.${i}`),n=a.forwardRef((e,a)=>{let{asChild:r,...n}=e;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,t.jsx)(r?s:i,{...n,ref:a})});return n.displayName=`Primitive.${i}`,{...e,[i]:n}},{}),s=a.forwardRef((e,a)=>(0,t.jsx)(i.label,{...e,ref:a,onMouseDown:t=>{t.target.closest("button, input, select, textarea")||(e.onMouseDown?.(t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));s.displayName="Label";var n=e.i(47163);function o({className:e,...a}){return(0,t.jsx)(s,{"data-slot":"label",className:(0,n.cn)("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",e),...a})}e.s(["Label",()=>o],10708)},84762,e=>{"use strict";var t=e.i(43476),a=e.i(47163);function r({className:e,...r}){return(0,t.jsx)("textarea",{"data-slot":"textarea",className:(0,a.cn)("border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),...r})}e.s(["Textarea",()=>r])},30374,e=>{"use strict";var t=e.i(43476),a=e.i(26999),r=e.i(95926),i=e.i(47163);function s({...e}){return(0,t.jsx)(a.Root,{"data-slot":"dialog",...e})}function n({...e}){return(0,t.jsx)(a.Trigger,{"data-slot":"dialog-trigger",...e})}function o({...e}){return(0,t.jsx)(a.Portal,{"data-slot":"dialog-portal",...e})}function l({className:e,...r}){return(0,t.jsx)(a.Overlay,{"data-slot":"dialog-overlay",className:(0,i.cn)("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",e),...r})}function d({className:e,children:s,showCloseButton:n=!0,...d}){return(0,t.jsxs)(o,{"data-slot":"dialog-portal",children:[(0,t.jsx)(l,{}),(0,t.jsxs)(a.Content,{"data-slot":"dialog-content",className:(0,i.cn)("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",e),...d,children:[s,n&&(0,t.jsxs)(a.Close,{"data-slot":"dialog-close",className:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",children:[(0,t.jsx)(r.XIcon,{}),(0,t.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})}function c({className:e,...a}){return(0,t.jsx)("div",{"data-slot":"dialog-header",className:(0,i.cn)("flex flex-col gap-2 text-center sm:text-left",e),...a})}function u({className:e,...a}){return(0,t.jsx)("div",{"data-slot":"dialog-footer",className:(0,i.cn)("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",e),...a})}function f({className:e,...r}){return(0,t.jsx)(a.Title,{"data-slot":"dialog-title",className:(0,i.cn)("text-lg leading-none font-semibold",e),...r})}function m({className:e,...r}){return(0,t.jsx)(a.Description,{"data-slot":"dialog-description",className:(0,i.cn)("text-muted-foreground text-sm",e),...r})}e.s(["Dialog",()=>s,"DialogContent",()=>d,"DialogDescription",()=>m,"DialogFooter",()=>u,"DialogHeader",()=>c,"DialogTitle",()=>f,"DialogTrigger",()=>n])},71689,e=>{"use strict";let t=(0,e.i(75254).default)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);e.s(["ArrowLeft",()=>t],71689)},98919,e=>{"use strict";let t=(0,e.i(75254).default)("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);e.s(["Shield",()=>t],98919)},63488,e=>{"use strict";let t=(0,e.i(75254).default)("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);e.s(["Mail",()=>t],63488)},73884,e=>{"use strict";let t=(0,e.i(75254).default)("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);e.s(["XCircle",()=>t],73884)},40160,e=>{"use strict";let t=(0,e.i(75254).default)("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);e.s(["Download",()=>t],40160)},87316,e=>{"use strict";let t=(0,e.i(75254).default)("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);e.s(["Calendar",()=>t],87316)},43432,e=>{"use strict";let t=(0,e.i(75254).default)("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);e.s(["Phone",()=>t],43432)},37317,e=>{"use strict";var t=e.i(43476),a=e.i(71645),r=e.i(18566),i=e.i(71689),s=e.i(69638),n=e.i(73884),o=e.i(40160),l=e.i(84614),d=e.i(87316),c=e.i(98919),u=e.i(31278),f=e.i(43432),m=e.i(63488),p=e.i(70065),g=e.i(67881),x=e.i(94179),h=e.i(63270),v=e.i(69035),w=e.i(10708),j=e.i(84762),_=e.i(30374),b=e.i(46696),y=e.i(17927),N=e.i(27158);function C({verificationId:e}){let C=(0,r.useRouter)(),[D,k]=(0,a.useState)(null),[R,S]=(0,a.useState)(!0),[P,O]=(0,a.useState)(!1),[I,A]=(0,a.useState)(""),[E,q]=(0,a.useState)(!1);(0,a.useEffect)(()=>{T()},[e]);let T=async()=>{try{S(!0);let{data:t,error:a}=await y.supabase.from("verification_documents").select("*").eq("id",e).single();if(a)throw a;if(!t)throw Error("Document not found");let{data:r,error:i}=await y.supabase.from("user_profiles").select("*").eq("id",t.user_id).single();if(i)throw i;let s={id:r.id,email:r.email,fullName:r.full_name??"",phone:r.phone??"",avatarUrl:r.avatar_url??null,role:r.role??"renter",accountStatus:r.account_status??"active",verificationStatus:r.verification_status??"pending",verificationDeadline:r.verification_deadline?new Date(r.verification_deadline):null,verificationDocuments:[],subscriptionPlan:r.subscription_plan??null,subscriptionExpiresAt:r.subscription_expires_at?new Date(r.subscription_expires_at):null,createdAt:r.created_at?new Date(r.created_at):new Date,updatedAt:r.updated_at?new Date(r.updated_at):new Date,lastLoginAt:r.last_login_at?new Date(r.last_login_at):null,affiliateCode:r.affiliate_code??null,referredBy:r.referred_by??null,totalReferrals:r.total_referrals??0,totalEarnings:r.total_earnings??0,dateOfBirth:r.date_of_birth,nextOfKinName:r.next_of_kin_name,nextOfKinPhone:r.next_of_kin_phone,nextOfKinRelationship:r.next_of_kin_relationship},n={id:t.id,userId:t.user_id,type:t.document_type,fileUrl:t.document_url,fileName:t.document_url?.split("/").pop()||"document",backImageUrl:t.back_image_url,selfieImageUrl:t.selfie_image_url,uploadedAt:t.created_at?new Date(t.created_at):new Date,status:t.status,reviewedBy:t.verified_by,reviewedAt:t.verified_at?new Date(t.verified_at):null,rejectionReason:t.rejection_reason,user:s,document_number:t.document_number};k(n)}catch(e){console.error("Error loading verification detail:",e),b.toast.error("Failed to load verification document"),C.push("/admin/verifications")}finally{S(!1)}},U=async(e,t)=>{if(D)try{q(!0),await (0,N.updateDocumentStatus)(D.id,e,t),b.toast.success(`Document ${e}`),O(!1),C.push("/admin/verifications")}catch(e){console.error(e),b.toast.error("Failed to update status")}finally{q(!1)}};return R?(0,t.jsx)("div",{className:"flex items-center justify-center p-12",children:(0,t.jsx)(u.Loader2,{className:"h-8 w-8 animate-spin text-primary"})}):D?(0,t.jsxs)("div",{className:"space-y-6 max-w-5xl mx-auto pb-10",children:[(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsx)(g.Button,{variant:"ghost",size:"icon",onClick:()=>C.push("/admin/verifications"),children:(0,t.jsx)(i.ArrowLeft,{className:"h-5 w-5"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-2xl font-bold",children:"Review Verification"}),(0,t.jsx)("p",{className:"text-muted-foreground",children:"Review document and approve or reject user verification"})]})]}),(0,t.jsxs)("div",{className:"grid gap-6 md:grid-cols-3",children:[(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)(p.Card,{className:"glass-card",children:[(0,t.jsx)(p.CardHeader,{children:(0,t.jsxs)(p.CardTitle,{className:"flex items-center gap-2 text-base",children:[(0,t.jsx)(l.User,{className:"h-5 w-5 text-primary"}),"User Details"]})}),(0,t.jsxs)(p.CardContent,{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsxs)(h.Avatar,{className:"h-12 w-12",children:[(0,t.jsx)(h.AvatarImage,{src:D.user.avatarUrl||void 0}),(0,t.jsx)(h.AvatarFallback,{children:D.user.fullName[0]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-medium",children:D.user.fullName}),(0,t.jsx)(x.Badge,{variant:"outline",className:"mt-1 capitalize",children:D.user.role})]})]}),(0,t.jsx)(v.Separator,{}),(0,t.jsxs)("div",{className:"space-y-3 text-sm",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(m.Mail,{className:"h-4 w-4 text-muted-foreground"}),(0,t.jsx)("span",{children:D.user.email})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(f.Phone,{className:"h-4 w-4 text-muted-foreground"}),(0,t.jsx)("span",{children:D.user.phone||"No phone"})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(d.Calendar,{className:"h-4 w-4 text-muted-foreground"}),(0,t.jsxs)("span",{children:["Joined ",D.user.createdAt.toLocaleDateString()]})]})]})]})]}),(0,t.jsxs)(p.Card,{className:"glass-card",children:[(0,t.jsx)(p.CardHeader,{children:(0,t.jsxs)(p.CardTitle,{className:"flex items-center gap-2 text-base",children:[(0,t.jsx)(c.Shield,{className:"h-5 w-5 text-primary"}),"Document Info"]})}),(0,t.jsxs)(p.CardContent,{className:"space-y-4 text-sm",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"text-muted-foreground block mb-1",children:"Type"}),(0,t.jsx)("p",{className:"font-medium capitalize",children:(D.type||"").replace("_"," ")})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"text-muted-foreground block mb-1",children:"Status"}),(0,t.jsx)(x.Badge,{variant:"approved"===D.status?"default":"rejected"===D.status?"destructive":"secondary",children:D.status})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"text-muted-foreground block mb-1",children:"Document Number"}),(0,t.jsx)("p",{className:"font-medium",children:D.document_number||"N/A"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"text-muted-foreground block mb-1",children:"Next of Kin"}),(0,t.jsx)("p",{className:"font-medium",children:D.user.nextOfKinName||"N/A"}),(0,t.jsxs)("p",{className:"text-xs text-muted-foreground",children:[D.user.nextOfKinRelationship," â€¢ ",D.user.nextOfKinPhone]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"text-muted-foreground block mb-1",children:"Uploaded"}),(0,t.jsx)("p",{className:"font-medium",children:D.uploadedAt.toLocaleString()})]})]})]}),(0,t.jsxs)(p.Card,{className:"glass-card",children:[(0,t.jsx)(p.CardHeader,{children:(0,t.jsx)(p.CardTitle,{className:"text-base",children:"Actions"})}),(0,t.jsxs)(p.CardContent,{className:"space-y-3",children:[(0,t.jsxs)(g.Button,{className:"w-full bg-green-600 hover:bg-green-700",onClick:()=>U("approved"),disabled:E||"approved"===D.status,children:[(0,t.jsx)(s.CheckCircle,{className:"h-4 w-4 mr-2"}),"Approve Document"]}),(0,t.jsxs)(g.Button,{variant:"outline",className:"w-full text-red-600 border-red-200 hover:bg-red-50",onClick:()=>O(!0),disabled:E||"approved"===D.status,children:[(0,t.jsx)(n.XCircle,{className:"h-4 w-4 mr-2"}),"Reject Document"]})]})]})]}),(0,t.jsxs)("div",{className:"md:col-span-2 space-y-6",children:[(0,t.jsxs)(p.Card,{className:"glass-card",children:[(0,t.jsxs)(p.CardHeader,{className:"flex flex-row items-center justify-between pb-2",children:[(0,t.jsx)(p.CardTitle,{children:"Front Side"}),(0,t.jsx)(g.Button,{variant:"outline",size:"sm",asChild:!0,children:(0,t.jsxs)("a",{href:D.fileUrl,target:"_blank",rel:"noopener noreferrer",children:[(0,t.jsx)(o.Download,{className:"h-4 w-4 mr-2"}),"Download"]})})]}),(0,t.jsx)(p.CardContent,{children:(0,t.jsx)("div",{className:"bg-muted/30 rounded-lg p-4 min-h-[300px] flex items-center justify-center border border-border overflow-hidden relative",children:D.fileUrl?.toLowerCase().endsWith(".pdf")?(0,t.jsx)("iframe",{src:D.fileUrl,className:"w-full h-[500px] rounded-md"}):(0,t.jsx)("img",{src:D.fileUrl,alt:"Front Preview",className:"max-w-full max-h-[500px] object-contain rounded-md shadow-lg"})})})]}),D.backImageUrl&&(0,t.jsxs)(p.Card,{className:"glass-card",children:[(0,t.jsxs)(p.CardHeader,{className:"flex flex-row items-center justify-between pb-2",children:[(0,t.jsx)(p.CardTitle,{children:"Back Side"}),(0,t.jsx)(g.Button,{variant:"outline",size:"sm",asChild:!0,children:(0,t.jsxs)("a",{href:D.backImageUrl,target:"_blank",rel:"noopener noreferrer",children:[(0,t.jsx)(o.Download,{className:"h-4 w-4 mr-2"}),"Download"]})})]}),(0,t.jsx)(p.CardContent,{children:(0,t.jsx)("div",{className:"bg-muted/30 rounded-lg p-4 min-h-[300px] flex items-center justify-center border border-border overflow-hidden relative",children:(0,t.jsx)("img",{src:D.backImageUrl,alt:"Back Preview",className:"max-w-full max-h-[500px] object-contain rounded-md shadow-lg"})})})]}),D.selfieImageUrl&&(0,t.jsxs)(p.Card,{className:"glass-card",children:[(0,t.jsxs)(p.CardHeader,{className:"flex flex-row items-center justify-between pb-2",children:[(0,t.jsx)(p.CardTitle,{children:"Selfie"}),(0,t.jsx)(g.Button,{variant:"outline",size:"sm",asChild:!0,children:(0,t.jsxs)("a",{href:D.selfieImageUrl,target:"_blank",rel:"noopener noreferrer",children:[(0,t.jsx)(o.Download,{className:"h-4 w-4 mr-2"}),"Download"]})})]}),(0,t.jsx)(p.CardContent,{children:(0,t.jsx)("div",{className:"bg-muted/30 rounded-lg p-4 min-h-[300px] flex items-center justify-center border border-border overflow-hidden relative",children:(0,t.jsx)("img",{src:D.selfieImageUrl,alt:"Selfie Preview",className:"max-w-full max-h-[500px] object-contain rounded-md shadow-lg"})})})]})]})]}),(0,t.jsx)(_.Dialog,{open:P,onOpenChange:O,children:(0,t.jsxs)(_.DialogContent,{children:[(0,t.jsxs)(_.DialogHeader,{children:[(0,t.jsx)(_.DialogTitle,{children:"Reject Document"}),(0,t.jsx)(_.DialogDescription,{children:"Please provide a reason for rejecting this document. The user will be notified."})]}),(0,t.jsx)("div",{className:"space-y-4",children:(0,t.jsxs)("div",{children:[(0,t.jsx)(w.Label,{htmlFor:"rejection-reason",children:"Rejection Reason"}),(0,t.jsx)(j.Textarea,{id:"rejection-reason",placeholder:"Enter the reason for rejection...",value:I,onChange:e=>A(e.target.value),className:"mt-2"})]})}),(0,t.jsxs)(_.DialogFooter,{children:[(0,t.jsx)(g.Button,{variant:"outline",onClick:()=>O(!1),children:"Cancel"}),(0,t.jsxs)(g.Button,{variant:"destructive",onClick:()=>U("rejected",I),disabled:E,children:[E&&(0,t.jsx)(u.Loader2,{className:"h-4 w-4 mr-2 animate-spin"}),"Confirm Rejection"]})]})]})})]}):null}e.s(["VerificationDetail",()=>C])}]);