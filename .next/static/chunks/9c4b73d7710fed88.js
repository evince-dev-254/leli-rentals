(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,70065,e=>{"use strict";var l=e.i(43476),s=e.i(47163);function a({className:e,...a}){return(0,l.jsx)("div",{"data-slot":"card",className:(0,s.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",e),...a})}function t({className:e,...a}){return(0,l.jsx)("div",{"data-slot":"card-header",className:(0,s.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-2 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",e),...a})}function r({className:e,...a}){return(0,l.jsx)("div",{"data-slot":"card-title",className:(0,s.cn)("leading-none font-semibold",e),...a})}function i({className:e,...a}){return(0,l.jsx)("div",{"data-slot":"card-description",className:(0,s.cn)("text-muted-foreground text-sm",e),...a})}function c({className:e,...a}){return(0,l.jsx)("div",{"data-slot":"card-content",className:(0,s.cn)("px-6",e),...a})}e.s(["Card",()=>a,"CardContent",()=>c,"CardDescription",()=>i,"CardHeader",()=>t,"CardTitle",()=>r])},69638,e=>{"use strict";let l=(0,e.i(75254).default)("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);e.s(["CheckCircle",()=>l],69638)},86536,e=>{"use strict";let l=(0,e.i(75254).default)("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);e.s(["Eye",()=>l],86536)},47627,e=>{"use strict";var l=e.i(43476),s=e.i(47163);function a({className:e,...a}){return(0,l.jsx)("div",{"data-slot":"table-container",className:"relative w-full overflow-x-auto",children:(0,l.jsx)("table",{"data-slot":"table",className:(0,s.cn)("w-full caption-bottom text-sm",e),...a})})}function t({className:e,...a}){return(0,l.jsx)("thead",{"data-slot":"table-header",className:(0,s.cn)("[&_tr]:border-b",e),...a})}function r({className:e,...a}){return(0,l.jsx)("tbody",{"data-slot":"table-body",className:(0,s.cn)("[&_tr:last-child]:border-0",e),...a})}function i({className:e,...a}){return(0,l.jsx)("tr",{"data-slot":"table-row",className:(0,s.cn)("hover:bg-muted/50 data-[state=selected]:bg-muted border-b transition-colors",e),...a})}function c({className:e,...a}){return(0,l.jsx)("th",{"data-slot":"table-head",className:(0,s.cn)("text-foreground h-10 px-2 text-left align-middle font-medium whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",e),...a})}function n({className:e,...a}){return(0,l.jsx)("td",{"data-slot":"table-cell",className:(0,s.cn)("p-2 align-middle whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",e),...a})}e.s(["Table",()=>a,"TableBody",()=>r,"TableCell",()=>n,"TableHead",()=>c,"TableHeader",()=>t,"TableRow",()=>i])},73884,e=>{"use strict";let l=(0,e.i(75254).default)("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);e.s(["XCircle",()=>l],73884)},97548,e=>{"use strict";let l=(0,e.i(75254).default)("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);e.s(["Filter",()=>l],97548)},41071,e=>{"use strict";let l=(0,e.i(75254).default)("Ellipsis",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]]);e.s(["MoreHorizontal",()=>l],41071)},85248,e=>{"use strict";var l=e.i(43476),s=e.i(71645),a=e.i(55436),t=e.i(97548),r=e.i(41071),i=e.i(86536),c=e.i(69638),n=e.i(73884),d=e.i(88844),o=e.i(70065),x=e.i(23750),h=e.i(67881),m=e.i(94179),u=e.i(63415),p=e.i(62870),g=e.i(47627),j=e.i(17927);function f(){let[e,f]=(0,s.useState)(""),[b,v]=(0,s.useState)("all"),[N,C]=(0,s.useState)("all"),[w,y]=(0,s.useState)([]),[T,S]=(0,s.useState)([]),[A,k]=(0,s.useState)(!0);(0,s.useEffect)(()=>{let e=!0;return async function(){k(!0);try{let{data:l,error:s}=await j.supabase.from("listings").select("*");if(s)return void console.error("Error fetching listings:",s);let a=Array.from(new Set((l||[]).map(e=>e.owner_id))),{data:t,error:r}=await j.supabase.from("user_profiles").select("*").in("id",a.length?a:["null"]);if(r&&console.error("Error fetching listing owners:",r),!e)return;y(l||[]),S(t||[])}finally{k(!1)}}(),()=>{e=!1}},[]);let D=w.map(e=>({id:e.id,ownerId:e.owner_id,title:e.title,description:e.description,category:e.category??e.category_id??"",pricePerDay:Number(e.price_per_day||0),images:e.images||[],location:e.location||"",isActive:e.is_active??!0,isApproved:e.status&&"approved"===e.status||!!e.is_verified,createdAt:e.created_at?new Date(e.created_at):new Date})),H=D.filter(l=>{let s=l.title.toLowerCase().includes(e.toLowerCase()),a="all"===b||l.category===b,t="all"===N||"approved"===N&&l.isApproved||"pending"===N&&!l.isApproved;return s&&a&&t});return(0,l.jsxs)("div",{className:"space-y-6",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("h1",{className:"text-3xl font-bold",children:"Listings"}),(0,l.jsx)("p",{className:"text-muted-foreground",children:"Manage all rental listings on the platform"})]}),(0,l.jsxs)("div",{className:"grid gap-4 md:grid-cols-3",children:[(0,l.jsx)(o.Card,{className:"glass-card",children:(0,l.jsx)(o.CardContent,{className:"pt-6",children:(0,l.jsxs)("div",{className:"flex items-center gap-4",children:[(0,l.jsx)("div",{className:"p-3 rounded-full bg-blue-500/20",children:(0,l.jsx)(d.Package,{className:"h-6 w-6 text-blue-500"})}),(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"text-2xl font-bold",children:D.length}),(0,l.jsx)("p",{className:"text-sm text-muted-foreground",children:"Total Listings"})]})]})})}),(0,l.jsx)(o.Card,{className:"glass-card",children:(0,l.jsx)(o.CardContent,{className:"pt-6",children:(0,l.jsxs)("div",{className:"flex items-center gap-4",children:[(0,l.jsx)("div",{className:"p-3 rounded-full bg-green-500/20",children:(0,l.jsx)(c.CheckCircle,{className:"h-6 w-6 text-green-500"})}),(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"text-2xl font-bold",children:D.filter(e=>e.isApproved).length}),(0,l.jsx)("p",{className:"text-sm text-muted-foreground",children:"Approved"})]})]})})}),(0,l.jsx)(o.Card,{className:"glass-card",children:(0,l.jsx)(o.CardContent,{className:"pt-6",children:(0,l.jsxs)("div",{className:"flex items-center gap-4",children:[(0,l.jsx)("div",{className:"p-3 rounded-full bg-orange-500/20",children:(0,l.jsx)(n.XCircle,{className:"h-6 w-6 text-orange-500"})}),(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"text-2xl font-bold",children:D.filter(e=>!e.isApproved).length}),(0,l.jsx)("p",{className:"text-sm text-muted-foreground",children:"Pending Approval"})]})]})})})]}),(0,l.jsx)(o.Card,{className:"glass-card",children:(0,l.jsx)(o.CardContent,{className:"pt-6",children:(0,l.jsxs)("div",{className:"flex flex-col md:flex-row gap-4",children:[(0,l.jsxs)("div",{className:"relative flex-1",children:[(0,l.jsx)(a.Search,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),(0,l.jsx)(x.Input,{placeholder:"Search listings...",className:"pl-10",value:e,onChange:e=>f(e.target.value)})]}),(0,l.jsxs)(p.Select,{value:b,onValueChange:v,children:[(0,l.jsx)(p.SelectTrigger,{className:"w-full md:w-40",children:(0,l.jsx)(p.SelectValue,{placeholder:"Category"})}),(0,l.jsxs)(p.SelectContent,{children:[(0,l.jsx)(p.SelectItem,{value:"all",children:"All Categories"}),(0,l.jsx)(p.SelectItem,{value:"vehicles",children:"Vehicles"}),(0,l.jsx)(p.SelectItem,{value:"homes",children:"Homes"}),(0,l.jsx)(p.SelectItem,{value:"equipment",children:"Equipment"}),(0,l.jsx)(p.SelectItem,{value:"electronics",children:"Electronics"})]})]}),(0,l.jsxs)(p.Select,{value:N,onValueChange:C,children:[(0,l.jsx)(p.SelectTrigger,{className:"w-full md:w-40",children:(0,l.jsx)(p.SelectValue,{placeholder:"Status"})}),(0,l.jsxs)(p.SelectContent,{children:[(0,l.jsx)(p.SelectItem,{value:"all",children:"All Status"}),(0,l.jsx)(p.SelectItem,{value:"approved",children:"Approved"}),(0,l.jsx)(p.SelectItem,{value:"pending",children:"Pending"})]})]}),(0,l.jsxs)(h.Button,{variant:"outline",children:[(0,l.jsx)(t.Filter,{className:"h-4 w-4 mr-2"}),"More Filters"]})]})})}),(0,l.jsxs)(o.Card,{className:"glass-card",children:[(0,l.jsxs)(o.CardHeader,{children:[(0,l.jsxs)(o.CardTitle,{children:["All Listings (",H.length,")"]}),(0,l.jsx)(o.CardDescription,{children:"Review and manage rental listings"})]}),(0,l.jsx)(o.CardContent,{children:(0,l.jsxs)(g.Table,{children:[(0,l.jsx)(g.TableHeader,{children:(0,l.jsxs)(g.TableRow,{children:[(0,l.jsx)(g.TableHead,{children:"Listing"}),(0,l.jsx)(g.TableHead,{children:"Owner"}),(0,l.jsx)(g.TableHead,{children:"Category"}),(0,l.jsx)(g.TableHead,{children:"Price/Day"}),(0,l.jsx)(g.TableHead,{children:"Status"}),(0,l.jsx)(g.TableHead,{children:"Created"}),(0,l.jsx)(g.TableHead,{className:"text-right",children:"Actions"})]})}),(0,l.jsx)(g.TableBody,{children:H.map(e=>{let s,a=(s=e.ownerId,T.find(e=>e.id===s));return(0,l.jsxs)(g.TableRow,{children:[(0,l.jsx)(g.TableCell,{children:(0,l.jsxs)("div",{className:"flex items-center gap-3",children:[(0,l.jsx)("img",{src:e.images[0]||"/placeholder.svg",alt:e.title,className:"h-12 w-16 object-cover rounded-lg"}),(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"font-medium",children:e.title}),(0,l.jsx)("p",{className:"text-sm text-muted-foreground",children:e.location})]})]})}),(0,l.jsx)(g.TableCell,{children:(0,l.jsx)("p",{className:"font-medium",children:a?.fullName})}),(0,l.jsx)(g.TableCell,{children:(0,l.jsx)(m.Badge,{variant:"outline",className:"capitalize",children:e.category})}),(0,l.jsxs)(g.TableCell,{children:["KSh ",e.pricePerDay.toLocaleString()]}),(0,l.jsx)(g.TableCell,{children:e.isApproved?(0,l.jsx)(m.Badge,{className:"bg-green-500/20 text-green-600",children:"Approved"}):(0,l.jsx)(m.Badge,{className:"bg-orange-500/20 text-orange-600",children:"Pending"})}),(0,l.jsx)(g.TableCell,{className:"text-muted-foreground",children:e.createdAt.toLocaleDateString()}),(0,l.jsx)(g.TableCell,{className:"text-right",children:(0,l.jsxs)(u.DropdownMenu,{children:[(0,l.jsx)(u.DropdownMenuTrigger,{asChild:!0,children:(0,l.jsx)(h.Button,{variant:"ghost",size:"icon",children:(0,l.jsx)(r.MoreHorizontal,{className:"h-4 w-4"})})}),(0,l.jsxs)(u.DropdownMenuContent,{align:"end",children:[(0,l.jsx)(u.DropdownMenuLabel,{children:"Actions"}),(0,l.jsx)(u.DropdownMenuSeparator,{}),(0,l.jsxs)(u.DropdownMenuItem,{children:[(0,l.jsx)(i.Eye,{className:"h-4 w-4 mr-2"}),"View Details"]}),!e.isApproved&&(0,l.jsxs)(u.DropdownMenuItem,{className:"text-green-600",children:[(0,l.jsx)(c.CheckCircle,{className:"h-4 w-4 mr-2"}),"Approve"]}),(0,l.jsxs)(u.DropdownMenuItem,{className:"text-destructive",children:[(0,l.jsx)(n.XCircle,{className:"h-4 w-4 mr-2"}),"Remove"]})]})]})})]},e.id)})})]})})]})]})}e.s(["ListingsManagement",()=>f])}]);