(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,70065,e=>{"use strict";var a=e.i(43476),s=e.i(47163);function t({className:e,...t}){return(0,a.jsx)("div",{"data-slot":"card",className:(0,s.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",e),...t})}function l({className:e,...t}){return(0,a.jsx)("div",{"data-slot":"card-header",className:(0,s.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-2 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",e),...t})}function r({className:e,...t}){return(0,a.jsx)("div",{"data-slot":"card-title",className:(0,s.cn)("leading-none font-semibold",e),...t})}function n({className:e,...t}){return(0,a.jsx)("div",{"data-slot":"card-description",className:(0,s.cn)("text-muted-foreground text-sm",e),...t})}function d({className:e,...t}){return(0,a.jsx)("div",{"data-slot":"card-content",className:(0,s.cn)("px-6",e),...t})}e.s(["Card",()=>t,"CardContent",()=>d,"CardDescription",()=>n,"CardHeader",()=>l,"CardTitle",()=>r])},69638,e=>{"use strict";let a=(0,e.i(75254).default)("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);e.s(["CheckCircle",()=>a],69638)},3116,e=>{"use strict";let a=(0,e.i(75254).default)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);e.s(["Clock",()=>a],3116)},12426,e=>{"use strict";let a=(0,e.i(75254).default)("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);e.s(["DollarSign",()=>a],12426)},47627,e=>{"use strict";var a=e.i(43476),s=e.i(47163);function t({className:e,...t}){return(0,a.jsx)("div",{"data-slot":"table-container",className:"relative w-full overflow-x-auto",children:(0,a.jsx)("table",{"data-slot":"table",className:(0,s.cn)("w-full caption-bottom text-sm",e),...t})})}function l({className:e,...t}){return(0,a.jsx)("thead",{"data-slot":"table-header",className:(0,s.cn)("[&_tr]:border-b",e),...t})}function r({className:e,...t}){return(0,a.jsx)("tbody",{"data-slot":"table-body",className:(0,s.cn)("[&_tr:last-child]:border-0",e),...t})}function n({className:e,...t}){return(0,a.jsx)("tr",{"data-slot":"table-row",className:(0,s.cn)("hover:bg-muted/50 data-[state=selected]:bg-muted border-b transition-colors",e),...t})}function d({className:e,...t}){return(0,a.jsx)("th",{"data-slot":"table-head",className:(0,s.cn)("text-foreground h-10 px-2 text-left align-middle font-medium whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",e),...t})}function i({className:e,...t}){return(0,a.jsx)("td",{"data-slot":"table-cell",className:(0,s.cn)("p-2 align-middle whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",e),...t})}e.s(["Table",()=>t,"TableBody",()=>r,"TableCell",()=>i,"TableHead",()=>d,"TableHeader",()=>l,"TableRow",()=>n])},41019,e=>{"use strict";var a=e.i(43476),s=e.i(51804),t=e.i(12426),l=e.i(3116),r=e.i(69638),n=e.i(70065),d=e.i(94179),i=e.i(47627),c=e.i(71645),o=e.i(17927);function x(){let[e,x]=(0,c.useState)([]),[m,h]=(0,c.useState)([]),[u,g]=(0,c.useState)([]);(0,c.useEffect)(()=>{let e=!0;return async function(){try{let{data:a,error:s}=await o.supabase.from("bookings").select("*");if(s)return void console.error("Error fetching bookings:",s);let t=Array.from(new Set((a||[]).map(e=>e.listing_id).filter(Boolean))),l=Array.from(new Set((a||[]).map(e=>e.renter_id).concat((a||[]).map(e=>e.owner_id)).filter(Boolean))),r=[],n=[];if(t.length>0||l.length>0){let e=[];t.length>0?e.push(o.supabase.from("listings").select("*").in("id",t)):e.push(Promise.resolve({data:[],error:null})),l.length>0?e.push(o.supabase.from("user_profiles").select("*").in("id",l)):e.push(Promise.resolve({data:[],error:null}));let[a,s]=await Promise.all(e);a.error&&console.error("Error fetching listings for bookings:",a.error),s.error&&console.error("Error fetching users for bookings:",s.error),r=a.data||[],n=s.data||[]}if(!e)return;x(a||[]),h(r||[]),g(n||[])}catch(e){console.error(e)}}(),()=>{e=!1}},[]);let b=e=>u.find(a=>a.id===e);return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-3xl font-bold",children:"Bookings"}),(0,a.jsx)("p",{className:"text-muted-foreground",children:"Monitor and manage all rental bookings"})]}),(0,a.jsxs)("div",{className:"grid gap-4 md:grid-cols-4",children:[(0,a.jsx)(n.Card,{className:"glass-card",children:(0,a.jsx)(n.CardContent,{className:"pt-6",children:(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)("div",{className:"p-3 rounded-full bg-blue-500/20",children:(0,a.jsx)(s.CalendarCheck,{className:"h-6 w-6 text-blue-500"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-2xl font-bold",children:e.length}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Total Bookings"})]})]})})}),(0,a.jsx)(n.Card,{className:"glass-card",children:(0,a.jsx)(n.CardContent,{className:"pt-6",children:(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)("div",{className:"p-3 rounded-full bg-green-500/20",children:(0,a.jsx)(r.CheckCircle,{className:"h-6 w-6 text-green-500"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-2xl font-bold",children:e.filter(e=>"confirmed"===e.status).length}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Confirmed"})]})]})})}),(0,a.jsx)(n.Card,{className:"glass-card",children:(0,a.jsx)(n.CardContent,{className:"pt-6",children:(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)("div",{className:"p-3 rounded-full bg-orange-500/20",children:(0,a.jsx)(l.Clock,{className:"h-6 w-6 text-orange-500"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-2xl font-bold",children:e.filter(e=>"pending"===e.status).length}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Pending"})]})]})})}),(0,a.jsx)(n.Card,{className:"glass-card",children:(0,a.jsx)(n.CardContent,{className:"pt-6",children:(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)("div",{className:"p-3 rounded-full bg-primary/20",children:(0,a.jsx)(t.DollarSign,{className:"h-6 w-6 text-primary"})}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("p",{className:"text-2xl font-bold",children:["KSh ",e.reduce((e,a)=>e+Number(a.total_amount||0),0).toLocaleString()]}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Total Revenue"})]})]})})})]}),(0,a.jsxs)(n.Card,{className:"glass-card",children:[(0,a.jsxs)(n.CardHeader,{children:[(0,a.jsx)(n.CardTitle,{children:"All Bookings"}),(0,a.jsx)(n.CardDescription,{children:"Complete list of all rental bookings"})]}),(0,a.jsx)(n.CardContent,{children:(0,a.jsxs)(i.Table,{children:[(0,a.jsx)(i.TableHeader,{children:(0,a.jsxs)(i.TableRow,{children:[(0,a.jsx)(i.TableHead,{children:"Booking ID"}),(0,a.jsx)(i.TableHead,{children:"Listing"}),(0,a.jsx)(i.TableHead,{children:"Renter"}),(0,a.jsx)(i.TableHead,{children:"Owner"}),(0,a.jsx)(i.TableHead,{children:"Dates"}),(0,a.jsx)(i.TableHead,{children:"Amount"}),(0,a.jsx)(i.TableHead,{children:"Status"}),(0,a.jsx)(i.TableHead,{children:"Payment"})]})}),(0,a.jsx)(i.TableBody,{children:e.map(e=>{let s,t=(s=e.listing_id,m.find(e=>e.id===s)),l=b(e.renter_id),r=b(e.owner_id),n=e.start_date?new Date(e.start_date):null,c=e.end_date?new Date(e.end_date):null;return(0,a.jsxs)(i.TableRow,{children:[(0,a.jsxs)(i.TableCell,{className:"font-mono text-sm",children:[e.id.substring(0,8),"..."]}),(0,a.jsx)(i.TableCell,{className:"font-medium",children:t?.title||"N/A"}),(0,a.jsx)(i.TableCell,{children:l?.full_name||"N/A"}),(0,a.jsx)(i.TableCell,{children:r?.full_name||"N/A"}),(0,a.jsx)(i.TableCell,{className:"text-sm",children:n&&c?`${n.toLocaleDateString()} - ${c.toLocaleDateString()}`:"N/A"}),(0,a.jsxs)(i.TableCell,{children:["KSh ",Number(e.total_amount||0).toLocaleString()]}),(0,a.jsx)(i.TableCell,{children:(0,a.jsx)(d.Badge,{className:"confirmed"===e.status?"bg-green-500/20 text-green-600":"pending"===e.status?"bg-orange-500/20 text-orange-600":"bg-blue-500/20 text-blue-600",children:e.status})}),(0,a.jsx)(i.TableCell,{children:(0,a.jsx)(d.Badge,{className:"paid"===e.payment_status?"bg-green-500/20 text-green-600":"bg-orange-500/20 text-orange-600",children:e.payment_status||"pending"})})]},e.id)})})]})})]})]})}e.s(["BookingsManagement",()=>x])}]);