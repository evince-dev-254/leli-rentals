(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,70065,e=>{"use strict";var s=e.i(43476),t=e.i(47163);function a({className:e,...a}){return(0,s.jsx)("div",{"data-slot":"card",className:(0,t.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",e),...a})}function r({className:e,...a}){return(0,s.jsx)("div",{"data-slot":"card-header",className:(0,t.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-2 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",e),...a})}function d({className:e,...a}){return(0,s.jsx)("div",{"data-slot":"card-title",className:(0,t.cn)("leading-none font-semibold",e),...a})}function i({className:e,...a}){return(0,s.jsx)("div",{"data-slot":"card-description",className:(0,t.cn)("text-muted-foreground text-sm",e),...a})}function l({className:e,...a}){return(0,s.jsx)("div",{"data-slot":"card-content",className:(0,t.cn)("px-6",e),...a})}e.s(["Card",()=>a,"CardContent",()=>l,"CardDescription",()=>i,"CardHeader",()=>r,"CardTitle",()=>d])},31278,e=>{"use strict";let s=(0,e.i(75254).default)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);e.s(["Loader2",()=>s],31278)},26143,e=>{"use strict";var s=e.i(43476),t=e.i(71645),a=e.i(17927),r=e.i(27158),d=e.i(70065),i=e.i(94179),l=e.i(31278),c=e.i(50627),n=e.i(55436),o=e.i(23750);function m(){let[e,m]=(0,t.useState)(!0),[x,u]=(0,t.useState)([]),[h,j]=(0,t.useState)("");(0,t.useEffect)(()=>{!async function(){let{data:{user:e}}=await a.supabase.auth.getUser();e&&u(await (0,r.getBookings)(e.id,"renter")||[]),m(!1)}()},[]);let f=x.filter(e=>e.listing?.title?.toLowerCase().includes(h.toLowerCase()));return e?(0,s.jsx)("div",{className:"flex justify-center p-20",children:(0,s.jsx)(l.Loader2,{className:"animate-spin h-8 w-8 text-primary"})}):(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-3xl font-bold",children:"Payments Record"}),(0,s.jsx)("p",{className:"text-muted-foreground",children:"Track all payments made for your rentals"})]}),(0,s.jsxs)("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-4",children:[(0,s.jsxs)(d.Card,{className:"glass-card",children:[(0,s.jsxs)(d.CardHeader,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,s.jsx)(d.CardTitle,{className:"text-sm font-medium",children:"Total Spent"}),(0,s.jsx)(c.Receipt,{className:"h-4 w-4 text-muted-foreground"})]}),(0,s.jsxs)(d.CardContent,{children:[(0,s.jsxs)("div",{className:"text-2xl font-bold",children:["KSh ",f.filter(e=>"completed"===e.status||"confirmed"===e.status).reduce((e,s)=>e+(Number(s.total_amount)||0),0).toLocaleString()]}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground",children:"On confirmed/completed bookings"})]})]}),(0,s.jsxs)(d.Card,{className:"glass-card",children:[(0,s.jsxs)(d.CardHeader,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,s.jsx)(d.CardTitle,{className:"text-sm font-medium",children:"Total Transactions"}),(0,s.jsx)(c.Receipt,{className:"h-4 w-4 text-muted-foreground"})]}),(0,s.jsxs)(d.CardContent,{children:[(0,s.jsx)("div",{className:"text-2xl font-bold",children:x.length}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground",children:"Lifetime bookings"})]})]})]}),(0,s.jsxs)(d.Card,{className:"glass-card",children:[(0,s.jsx)(d.CardHeader,{children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(d.CardTitle,{children:"Transaction History"}),(0,s.jsx)(d.CardDescription,{children:"Detailed list of your rental payments"})]}),(0,s.jsxs)("div",{className:"relative w-64",children:[(0,s.jsx)(n.Search,{className:"absolute left-2 top-2.5 h-4 w-4 text-muted-foreground"}),(0,s.jsx)(o.Input,{placeholder:"Search rentals...",className:"pl-8",value:h,onChange:e=>j(e.target.value)})]})]})}),(0,s.jsx)(d.CardContent,{children:0===f.length?(0,s.jsx)("div",{className:"text-center py-12 text-muted-foreground",children:"No payment records found."}):(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"grid grid-cols-5 font-medium text-sm text-muted-foreground border-b pb-2",children:[(0,s.jsx)("div",{className:"col-span-2",children:"Item / Service"}),(0,s.jsx)("div",{children:"Date"}),(0,s.jsx)("div",{children:"Status"}),(0,s.jsx)("div",{className:"text-right",children:"Amount"})]}),f.map(e=>(0,s.jsxs)("div",{className:"grid grid-cols-5 items-center py-4 border-b last:border-0 hover:bg-muted/10 transition-colors",children:[(0,s.jsxs)("div",{className:"col-span-2 flex items-center gap-3",children:[(0,s.jsx)("div",{className:"h-10 w-10 rounded-md bg-muted overflow-hidden",children:(0,s.jsx)("img",{src:e.listing?.images?.[0]||"/placeholder.svg",alt:e.listing?.title,className:"h-full w-full object-cover"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"font-medium",children:e.listing?.title}),(0,s.jsxs)("div",{className:"text-xs text-muted-foreground",children:["ID: ",e.id.slice(0,8)]})]})]}),(0,s.jsx)("div",{className:"text-sm",children:new Date(e.created_at).toLocaleDateString()}),(0,s.jsx)("div",{children:(0,s.jsx)(i.Badge,{variant:"completed"===e.status?"default":"confirmed"===e.status?"secondary":"cancelled"===e.status?"destructive":"outline",className:"capitalize",children:e.status})}),(0,s.jsxs)("div",{className:"text-right font-medium",children:["KSh ",Number(e.total_amount).toLocaleString()]})]},e.id))]})})]})]})}e.s(["PaymentsPage",()=>m])}]);