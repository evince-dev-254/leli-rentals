(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,70065,e=>{"use strict";var t=e.i(43476),a=e.i(47163);function s({className:e,...s}){return(0,t.jsx)("div",{"data-slot":"card",className:(0,a.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",e),...s})}function r({className:e,...s}){return(0,t.jsx)("div",{"data-slot":"card-header",className:(0,a.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-2 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",e),...s})}function i({className:e,...s}){return(0,t.jsx)("div",{"data-slot":"card-title",className:(0,a.cn)("leading-none font-semibold",e),...s})}function n({className:e,...s}){return(0,t.jsx)("div",{"data-slot":"card-description",className:(0,a.cn)("text-muted-foreground text-sm",e),...s})}function l({className:e,...s}){return(0,t.jsx)("div",{"data-slot":"card-content",className:(0,a.cn)("px-6",e),...s})}e.s(["Card",()=>s,"CardContent",()=>l,"CardDescription",()=>n,"CardHeader",()=>r,"CardTitle",()=>i])},95187,(e,t,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0});var s={callServer:function(){return i.callServer},createServerReference:function(){return l.createServerReference},findSourceMapURL:function(){return n.findSourceMapURL}};for(var r in s)Object.defineProperty(a,r,{enumerable:!0,get:s[r]});let i=e.r(32120),n=e.r(92245),l=e.r(35326)},27158,e=>{"use strict";var t=e.i(17927),a=e.i(95187),s=(0,a.createServerReference)("7836f6554c113775f9349130d57af469f4e9914fb6",a.callServer,void 0,a.findSourceMapURL,"sendNewListingEmail");async function r(e){let{data:a,error:s}=await t.supabase.from("listings").select("*").eq("owner_id",e);if(s)throw s;return a}async function i(e){let{count:a,error:s}=await t.supabase.from("listings").select("*",{count:"exact",head:!0}).eq("owner_id",e);if(s)throw s;let{count:r,error:i}=await t.supabase.from("bookings").select("*",{count:"exact",head:!0}).eq("owner_id",e).in("status",["active","confirmed"]);if(i)throw i;let{data:n,error:l}=await t.supabase.from("bookings").select("total_amount").eq("owner_id",e).eq("status","completed");if(l)throw l;let o=n?.reduce((e,t)=>e+(Number(t.total_amount)||0),0)||0,{data:d,error:c}=await t.supabase.from("listings").select("views_count").eq("owner_id",e);if(c)throw c;return{listingsCount:a||0,activeBookingsCount:r||0,totalEarnings:o,totalViews:d?.reduce((e,t)=>e+(Number(t.views_count)||0),0)||0}}async function n(e,a="owner"){let s=t.supabase.from("bookings").select(`
            *,
            listing:listings(title, images),
            renter:user_profiles!bookings_renter_id_fkey(full_name, avatar_url),
            owner:user_profiles!bookings_owner_id_fkey(full_name, avatar_url)
        `).order("created_at",{ascending:!1});s="owner"===a?s.eq("owner_id",e):s.eq("renter_id",e);let{data:r,error:i}=await s;if(i)throw i;return r}async function l(e){let{data:a,error:s}=await t.supabase.from("conversations").select(`
            *,
            listing:listings(title),
            participant1:user_profiles!participant_1_id(full_name, avatar_url),
            participant2:user_profiles!participant_2_id(full_name, avatar_url),
            last_message:messages(content, created_at, is_read, sender_id)
        `).or(`participant_1_id.eq.${e},participant_2_id.eq.${e}`).order("last_message_at",{ascending:!1});if(s)throw s;return a.map(t=>{let a=t.participant_1_id===e?t.participant2:t.participant1,s=t.last_message?.[0]||null;return{...t,otherUser:a,lastMessage:s}})}async function o(e){let{data:a,error:s}=await t.supabase.from("messages").select("*").eq("conversation_id",e).order("created_at",{ascending:!0});if(s)throw s;return a}async function d(e,a,s){let{data:r,error:i}=await t.supabase.from("messages").insert({conversation_id:e,sender_id:a,content:s}).select().single();if(i)throw i;return r}async function c(e){let{data:a,error:s}=await t.supabase.from("verification_documents").select("*").eq("user_id",e);if(s)throw s;return a}async function u(e,a,s,r,i,n){let{data:l,error:o}=await t.supabase.from("verification_documents").insert({user_id:e,document_url:a,back_image_url:s,selfie_image_url:r,document_type:i,document_number:n,status:"pending"}).select().single();if(o)throw o;return l}async function m(e,a){let{data:s,error:r}=await t.supabase.from("user_profiles").update(a).eq("id",e).select().single();if(r)throw r;return s}async function f(e){let{data:a,error:s}=await t.supabase.from("affiliates").select("*").eq("user_id",e).single();if(s&&"PGRST116"!==s.code)throw s;return a||null}async function p(e){let{data:a,error:s}=await t.supabase.from("affiliates").select("id").eq("user_id",e).single();if(s||!a)return[];let{data:r,error:i}=await t.supabase.from("affiliate_referrals").select(`
            id,
            commission_amount,
            commission_status,
            created_at,
            referred_user:user_profiles!referred_user_id(full_name, avatar_url, email)
        `).eq("affiliate_id",a.id).order("created_at",{ascending:!1});if(i)throw i;return r}async function g(e){let{data:a,error:s}=await t.supabase.from("notifications").select("*").eq("user_id",e).order("created_at",{ascending:!1}).limit(10);if(s)throw s;return a}async function x(e){let{error:a}=await t.supabase.from("notifications").update({is_read:!0,read_at:new Date().toISOString()}).eq("id",e);if(a)throw a}async function h(e,a){console.log("Creating listing with data:",a);let{data:r,error:i}=await t.supabase.from("listings").insert({...a,owner_id:e,views_count:0,favorites_count:0,rating_average:0,rating_count:0,is_featured:!1,is_verified:!1,status:"pending"}).select().single();if(i)throw console.error("Supabase error creating listing:",i),i;console.log("Listing created successfully:",r);try{let{data:a}=await t.supabase.from("user_profiles").select("email, full_name").eq("id",e).single();a?.email&&await s(a.email,a.full_name?.split(" ")[0]||"User",r.title,r.id)}catch(e){console.error("Failed to send listing creation email:",e)}return r}async function v(e){let{data:a,error:s}=await t.supabase.from("bookings").select(`
            id,
            total_amount,
            end_date,
            listing:listings(title)
        `).eq("owner_id",e).eq("status","completed").order("end_date",{ascending:!1});if(s)throw s;return a.map(e=>({id:e.id,type:"earning",desc:e.listing?.title||"Rental",date:new Date(e.end_date).toLocaleDateString(),amount:e.total_amount}))}async function j(e,a,s){let r={status:a};s&&(r.rejection_reason=s);let{error:i}=await t.supabase.from("verification_documents").update(r).eq("id",e);if(i)throw i}async function b(){let{data:e,error:a}=await t.supabase.from("user_profiles").select("*").or("role.eq.admin,is_admin.eq.true");if(a)throw a;return e}async function N(e){let{data:a,error:s}=await t.supabase.from("user_profiles").select("*").eq("email",e).single();if(s)throw s;return a}e.s(["createListing",()=>h,"getAdmins",()=>b,"getAffiliateData",()=>f,"getAffiliateReferrals",()=>p,"getBookings",()=>n,"getConversations",()=>l,"getEarnings",()=>v,"getMessages",()=>o,"getNotifications",()=>g,"getOwnerData",()=>r,"getOwnerStats",()=>i,"getUserByEmail",()=>N,"getVerifications",()=>c,"markNotificationAsRead",()=>x,"sendMessage",()=>d,"updateDocumentStatus",()=>j,"updateProfile",()=>m,"uploadVerification",()=>u],27158)},26999,95926,e=>{"use strict";let t,a,s;var r=e.i(71645),i=e.i(81140),n=e.i(20783),l=e.i(30030),o=e.i(10772),d=e.i(69340),c=e.i(26330),u=e.i(65491),m=e.i(74606),f=e.i(96626),p=e.i(48425),g=e.i(3536),x=e.i(85369),h=e.i(86312),v=e.i(43476),j=Symbol("radix.slottable");function b(e){return r.isValidElement(e)&&"function"==typeof e.type&&"__radixId"in e.type&&e.type.__radixId===j}var N="Dialog",[w,y]=(0,l.createContextScope)(N),[_,C]=w(N),D=e=>{let{__scopeDialog:t,children:a,open:s,defaultOpen:i,onOpenChange:n,modal:l=!0}=e,c=r.useRef(null),u=r.useRef(null),[m,f]=(0,d.useControllableState)({prop:s,defaultProp:i??!1,onChange:n,caller:N});return(0,v.jsx)(_,{scope:t,triggerRef:c,contentRef:u,contentId:(0,o.useId)(),titleId:(0,o.useId)(),descriptionId:(0,o.useId)(),open:m,onOpenChange:f,onOpenToggle:r.useCallback(()=>f(e=>!e),[f]),modal:l,children:a})};D.displayName=N;var k="DialogTrigger",R=r.forwardRef((e,t)=>{let{__scopeDialog:a,...s}=e,r=C(k,a),l=(0,n.useComposedRefs)(t,r.triggerRef);return(0,v.jsx)(p.Primitive.button,{type:"button","aria-haspopup":"dialog","aria-expanded":r.open,"aria-controls":r.contentId,"data-state":X(r.open),...s,ref:l,onClick:(0,i.composeEventHandlers)(e.onClick,r.onOpenToggle)})});R.displayName=k;var A="DialogPortal",[S,T]=w(A,{forceMount:void 0}),P=e=>{let{__scopeDialog:t,forceMount:a,children:s,container:i}=e,n=C(A,t);return(0,v.jsx)(S,{scope:t,forceMount:a,children:r.Children.map(s,e=>(0,v.jsx)(f.Presence,{present:a||n.open,children:(0,v.jsx)(m.Portal,{asChild:!0,container:i,children:e})}))})};P.displayName=A;var E="DialogOverlay",I=r.forwardRef((e,t)=>{let a=T(E,e.__scopeDialog),{forceMount:s=a.forceMount,...r}=e,i=C(E,e.__scopeDialog);return i.modal?(0,v.jsx)(f.Presence,{present:s||i.open,children:(0,v.jsx)(q,{...r,ref:t})}):null});I.displayName=E;var O=((s=r.forwardRef((e,t)=>{let{children:a,...s}=e;if(r.isValidElement(a)){var i;let e,l,o=(i=a,(l=(e=Object.getOwnPropertyDescriptor(i.props,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning)?i.ref:(l=(e=Object.getOwnPropertyDescriptor(i,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning)?i.props.ref:i.props.ref||i.ref),d=function(e,t){let a={...t};for(let s in t){let r=e[s],i=t[s];/^on[A-Z]/.test(s)?r&&i?a[s]=(...e)=>{let t=i(...e);return r(...e),t}:r&&(a[s]=r):"style"===s?a[s]={...r,...i}:"className"===s&&(a[s]=[r,i].filter(Boolean).join(" "))}return{...e,...a}}(s,a.props);return a.type!==r.Fragment&&(d.ref=t?(0,n.composeRefs)(t,o):o),r.cloneElement(a,d)}return r.Children.count(a)>1?r.Children.only(null):null})).displayName="DialogOverlay.RemoveScroll.SlotClone",t=s,(a=r.forwardRef((e,a)=>{let{children:s,...i}=e,n=r.Children.toArray(s),l=n.find(b);if(l){let e=l.props.children,s=n.map(t=>t!==l?t:r.Children.count(e)>1?r.Children.only(null):r.isValidElement(e)?e.props.children:null);return(0,v.jsx)(t,{...i,ref:a,children:r.isValidElement(e)?r.cloneElement(e,void 0,s):null})}return(0,v.jsx)(t,{...i,ref:a,children:s})})).displayName="DialogOverlay.RemoveScroll.Slot",a),q=r.forwardRef((e,t)=>{let{__scopeDialog:a,...s}=e,r=C(E,a);return(0,v.jsx)(x.RemoveScroll,{as:O,allowPinchZoom:!0,shards:[r.contentRef],children:(0,v.jsx)(p.Primitive.div,{"data-state":X(r.open),...s,ref:t,style:{pointerEvents:"auto",...s.style}})})}),B="DialogContent",F=r.forwardRef((e,t)=>{let a=T(B,e.__scopeDialog),{forceMount:s=a.forceMount,...r}=e,i=C(B,e.__scopeDialog);return(0,v.jsx)(f.Presence,{present:s||i.open,children:i.modal?(0,v.jsx)(M,{...r,ref:t}):(0,v.jsx)(z,{...r,ref:t})})});F.displayName=B;var M=r.forwardRef((e,t)=>{let a=C(B,e.__scopeDialog),s=r.useRef(null),l=(0,n.useComposedRefs)(t,a.contentRef,s);return r.useEffect(()=>{let e=s.current;if(e)return(0,h.hideOthers)(e)},[]),(0,v.jsx)(H,{...e,ref:l,trapFocus:a.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:(0,i.composeEventHandlers)(e.onCloseAutoFocus,e=>{e.preventDefault(),a.triggerRef.current?.focus()}),onPointerDownOutside:(0,i.composeEventHandlers)(e.onPointerDownOutside,e=>{let t=e.detail.originalEvent,a=0===t.button&&!0===t.ctrlKey;(2===t.button||a)&&e.preventDefault()}),onFocusOutside:(0,i.composeEventHandlers)(e.onFocusOutside,e=>e.preventDefault())})}),z=r.forwardRef((e,t)=>{let a=C(B,e.__scopeDialog),s=r.useRef(!1),i=r.useRef(!1);return(0,v.jsx)(H,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:t=>{e.onCloseAutoFocus?.(t),t.defaultPrevented||(s.current||a.triggerRef.current?.focus(),t.preventDefault()),s.current=!1,i.current=!1},onInteractOutside:t=>{e.onInteractOutside?.(t),t.defaultPrevented||(s.current=!0,"pointerdown"===t.detail.originalEvent.type&&(i.current=!0));let r=t.target;a.triggerRef.current?.contains(r)&&t.preventDefault(),"focusin"===t.detail.originalEvent.type&&i.current&&t.preventDefault()}})}),H=r.forwardRef((e,t)=>{let{__scopeDialog:a,trapFocus:s,onOpenAutoFocus:i,onCloseAutoFocus:l,...o}=e,d=C(B,a),m=r.useRef(null),f=(0,n.useComposedRefs)(t,m);return(0,g.useFocusGuards)(),(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(u.FocusScope,{asChild:!0,loop:!0,trapped:s,onMountAutoFocus:i,onUnmountAutoFocus:l,children:(0,v.jsx)(c.DismissableLayer,{role:"dialog",id:d.contentId,"aria-describedby":d.descriptionId,"aria-labelledby":d.titleId,"data-state":X(d.open),...o,ref:f,onDismiss:()=>d.onOpenChange(!1)})}),(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(Q,{titleId:d.titleId}),(0,v.jsx)(Y,{contentRef:m,descriptionId:d.descriptionId})]})]})}),V="DialogTitle",L=r.forwardRef((e,t)=>{let{__scopeDialog:a,...s}=e,r=C(V,a);return(0,v.jsx)(p.Primitive.h2,{id:r.titleId,...s,ref:t})});L.displayName=V;var U="DialogDescription",$=r.forwardRef((e,t)=>{let{__scopeDialog:a,...s}=e,r=C(U,a);return(0,v.jsx)(p.Primitive.p,{id:r.descriptionId,...s,ref:t})});$.displayName=U;var K="DialogClose",W=r.forwardRef((e,t)=>{let{__scopeDialog:a,...s}=e,r=C(K,a);return(0,v.jsx)(p.Primitive.button,{type:"button",...s,ref:t,onClick:(0,i.composeEventHandlers)(e.onClick,()=>r.onOpenChange(!1))})});function X(e){return e?"open":"closed"}W.displayName=K;var G="DialogTitleWarning",[Z,J]=(0,l.createContext)(G,{contentName:B,titleName:V,docsSlug:"dialog"}),Q=({titleId:e})=>{let t=J(G),a=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return r.useEffect(()=>{e&&(document.getElementById(e)||console.error(a))},[a,e]),null},Y=({contentRef:e,descriptionId:t})=>{let a=J("DialogDescriptionWarning"),s=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${a.contentName}}.`;return r.useEffect(()=>{let a=e.current?.getAttribute("aria-describedby");t&&a&&(document.getElementById(t)||console.warn(s))},[s,e,t]),null};e.s(["Close",()=>W,"Content",()=>F,"Description",()=>$,"Overlay",()=>I,"Portal",()=>P,"Root",()=>D,"Title",()=>L,"Trigger",()=>R],26999);var ee=e.i(41947);e.s(["XIcon",()=>ee.default],95926)},10708,e=>{"use strict";var t=e.i(43476),a=e.i(71645);e.i(74080);var s=e.i(91918),r=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((e,r)=>{let i=(0,s.createSlot)(`Primitive.${r}`),n=a.forwardRef((e,a)=>{let{asChild:s,...n}=e;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,t.jsx)(s?i:r,{...n,ref:a})});return n.displayName=`Primitive.${r}`,{...e,[r]:n}},{}),i=a.forwardRef((e,a)=>(0,t.jsx)(r.label,{...e,ref:a,onMouseDown:t=>{t.target.closest("button, input, select, textarea")||(e.onMouseDown?.(t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));i.displayName="Label";var n=e.i(47163);function l({className:e,...a}){return(0,t.jsx)(i,{"data-slot":"label",className:(0,n.cn)("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",e),...a})}e.s(["Label",()=>l],10708)},69638,e=>{"use strict";let t=(0,e.i(75254).default)("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);e.s(["CheckCircle",()=>t],69638)},3116,e=>{"use strict";let t=(0,e.i(75254).default)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);e.s(["Clock",()=>t],3116)},86536,e=>{"use strict";let t=(0,e.i(75254).default)("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);e.s(["Eye",()=>t],86536)},27341,e=>{"use strict";var t=e.i(43476),a=e.i(71645),s=e.i(81140),r=e.i(30030),i=e.i(42727),n=e.i(96626),l=e.i(48425),o=e.i(86318),d=e.i(69340),c=e.i(10772),u="Tabs",[m,f]=(0,r.createContextScope)(u,[i.createRovingFocusGroupScope]),p=(0,i.createRovingFocusGroupScope)(),[g,x]=m(u),h=a.forwardRef((e,a)=>{let{__scopeTabs:s,value:r,onValueChange:i,defaultValue:n,orientation:m="horizontal",dir:f,activationMode:p="automatic",...x}=e,h=(0,o.useDirection)(f),[v,j]=(0,d.useControllableState)({prop:r,onChange:i,defaultProp:n??"",caller:u});return(0,t.jsx)(g,{scope:s,baseId:(0,c.useId)(),value:v,onValueChange:j,orientation:m,dir:h,activationMode:p,children:(0,t.jsx)(l.Primitive.div,{dir:h,"data-orientation":m,...x,ref:a})})});h.displayName=u;var v="TabsList",j=a.forwardRef((e,a)=>{let{__scopeTabs:s,loop:r=!0,...n}=e,o=x(v,s),d=p(s);return(0,t.jsx)(i.Root,{asChild:!0,...d,orientation:o.orientation,dir:o.dir,loop:r,children:(0,t.jsx)(l.Primitive.div,{role:"tablist","aria-orientation":o.orientation,...n,ref:a})})});j.displayName=v;var b="TabsTrigger",N=a.forwardRef((e,a)=>{let{__scopeTabs:r,value:n,disabled:o=!1,...d}=e,c=x(b,r),u=p(r),m=_(c.baseId,n),f=C(c.baseId,n),g=n===c.value;return(0,t.jsx)(i.Item,{asChild:!0,...u,focusable:!o,active:g,children:(0,t.jsx)(l.Primitive.button,{type:"button",role:"tab","aria-selected":g,"aria-controls":f,"data-state":g?"active":"inactive","data-disabled":o?"":void 0,disabled:o,id:m,...d,ref:a,onMouseDown:(0,s.composeEventHandlers)(e.onMouseDown,e=>{o||0!==e.button||!1!==e.ctrlKey?e.preventDefault():c.onValueChange(n)}),onKeyDown:(0,s.composeEventHandlers)(e.onKeyDown,e=>{[" ","Enter"].includes(e.key)&&c.onValueChange(n)}),onFocus:(0,s.composeEventHandlers)(e.onFocus,()=>{let e="manual"!==c.activationMode;g||o||!e||c.onValueChange(n)})})})});N.displayName=b;var w="TabsContent",y=a.forwardRef((e,s)=>{let{__scopeTabs:r,value:i,forceMount:o,children:d,...c}=e,u=x(w,r),m=_(u.baseId,i),f=C(u.baseId,i),p=i===u.value,g=a.useRef(p);return a.useEffect(()=>{let e=requestAnimationFrame(()=>g.current=!1);return()=>cancelAnimationFrame(e)},[]),(0,t.jsx)(n.Presence,{present:o||p,children:({present:a})=>(0,t.jsx)(l.Primitive.div,{"data-state":p?"active":"inactive","data-orientation":u.orientation,role:"tabpanel","aria-labelledby":m,hidden:!a,id:f,tabIndex:0,...c,ref:s,style:{...e.style,animationDuration:g.current?"0s":void 0},children:a&&d})})});function _(e,t){return`${e}-trigger-${t}`}function C(e,t){return`${e}-content-${t}`}y.displayName=w;var D=e.i(47163);function k({className:e,...a}){return(0,t.jsx)(h,{"data-slot":"tabs",className:(0,D.cn)("flex flex-col gap-2",e),...a})}function R({className:e,...a}){return(0,t.jsx)(j,{"data-slot":"tabs-list",className:(0,D.cn)("bg-muted text-muted-foreground inline-flex h-9 w-fit items-center justify-center rounded-lg p-[3px]",e),...a})}function A({className:e,...a}){return(0,t.jsx)(N,{"data-slot":"tabs-trigger",className:(0,D.cn)("data-[state=active]:bg-background dark:data-[state=active]:text-foreground focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:outline-ring dark:data-[state=active]:border-input dark:data-[state=active]:bg-input/30 text-foreground dark:text-muted-foreground inline-flex h-[calc(100%-1px)] flex-1 items-center justify-center gap-1.5 rounded-md border border-transparent px-2 py-1 text-sm font-medium whitespace-nowrap transition-[color,box-shadow] focus-visible:ring-[3px] focus-visible:outline-1 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:shadow-sm [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",e),...a})}function S({className:e,...a}){return(0,t.jsx)(y,{"data-slot":"tabs-content",className:(0,D.cn)("flex-1 outline-none",e),...a})}e.s(["Tabs",()=>k,"TabsContent",()=>S,"TabsList",()=>R,"TabsTrigger",()=>A],27341)},84762,e=>{"use strict";var t=e.i(43476),a=e.i(47163);function s({className:e,...s}){return(0,t.jsx)("textarea",{"data-slot":"textarea",className:(0,a.cn)("border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),...s})}e.s(["Textarea",()=>s])},30374,e=>{"use strict";var t=e.i(43476),a=e.i(26999),s=e.i(95926),r=e.i(47163);function i({...e}){return(0,t.jsx)(a.Root,{"data-slot":"dialog",...e})}function n({...e}){return(0,t.jsx)(a.Trigger,{"data-slot":"dialog-trigger",...e})}function l({...e}){return(0,t.jsx)(a.Portal,{"data-slot":"dialog-portal",...e})}function o({className:e,...s}){return(0,t.jsx)(a.Overlay,{"data-slot":"dialog-overlay",className:(0,r.cn)("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",e),...s})}function d({className:e,children:i,showCloseButton:n=!0,...d}){return(0,t.jsxs)(l,{"data-slot":"dialog-portal",children:[(0,t.jsx)(o,{}),(0,t.jsxs)(a.Content,{"data-slot":"dialog-content",className:(0,r.cn)("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",e),...d,children:[i,n&&(0,t.jsxs)(a.Close,{"data-slot":"dialog-close",className:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",children:[(0,t.jsx)(s.XIcon,{}),(0,t.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})}function c({className:e,...a}){return(0,t.jsx)("div",{"data-slot":"dialog-header",className:(0,r.cn)("flex flex-col gap-2 text-center sm:text-left",e),...a})}function u({className:e,...a}){return(0,t.jsx)("div",{"data-slot":"dialog-footer",className:(0,r.cn)("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",e),...a})}function m({className:e,...s}){return(0,t.jsx)(a.Title,{"data-slot":"dialog-title",className:(0,r.cn)("text-lg leading-none font-semibold",e),...s})}function f({className:e,...s}){return(0,t.jsx)(a.Description,{"data-slot":"dialog-description",className:(0,r.cn)("text-muted-foreground text-sm",e),...s})}e.s(["Dialog",()=>i,"DialogContent",()=>d,"DialogDescription",()=>f,"DialogFooter",()=>u,"DialogHeader",()=>c,"DialogTitle",()=>m,"DialogTrigger",()=>n])},73884,e=>{"use strict";let t=(0,e.i(75254).default)("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);e.s(["XCircle",()=>t],73884)},40160,e=>{"use strict";let t=(0,e.i(75254).default)("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);e.s(["Download",()=>t],40160)},78583,e=>{"use strict";let t=(0,e.i(75254).default)("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);e.s(["FileText",()=>t],78583)},78894,e=>{"use strict";let t=(0,e.i(75254).default)("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);e.s(["AlertTriangle",()=>t],78894)},51737,e=>{"use strict";let t=(0,e.i(75254).default)("ShieldAlert",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M12 16h.01",key:"1drbdi"}]]);e.s(["ShieldAlert",()=>t],51737)},42722,e=>{"use strict";var t=e.i(43476),a=e.i(71645),s=e.i(81418),r=e.i(51737);let i=(0,e.i(75254).default)("ShieldX",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m14.5 9.5-5 5",key:"17q4r4"}],["path",{d:"m9.5 9.5 5 5",key:"18nt4w"}]]);var n=e.i(3116),l=e.i(78583),o=e.i(86536),d=e.i(69638),c=e.i(73884),u=e.i(40160),m=e.i(78894),f=e.i(88844),p=e.i(70065),g=e.i(67881),x=e.i(94179),h=e.i(63270),v=e.i(27341),j=e.i(30374),b=e.i(84762),N=e.i(10708),w=e.i(17927),y=e.i(27158),_=e.i(46696);function C(){let[e,C]=(0,a.useState)(null),[D,k]=(0,a.useState)(!1),[R,A]=(0,a.useState)(""),[S,T]=(0,a.useState)([]),[P,E]=(0,a.useState)([]),[I,O]=(0,a.useState)([]),[q,B]=(0,a.useState)(!0);(0,a.useEffect)(()=>{let e=!0;return async function(){B(!0);try{let{data:t,error:a}=await w.supabase.from("verification_documents").select("*");if(a)return void console.error("Error fetching verification_documents:",a);let{data:s,error:r}=await w.supabase.from("listings").select("*").eq("status","pending");r&&console.error("Error fetching pending listings:",r);let i=(t||[]).map(e=>e.user_id),n=(s||[]).map(e=>e.owner_id),l=Array.from(new Set([...i,...n])),{data:o,error:d}=await w.supabase.from("user_profiles").select("*").in("id",l.length?l:["null"]);if(d&&console.error("Error fetching user_profiles:",d),!e)return;let c=(t||[]).map(e=>({id:e.id,userId:e.user_id,type:e.document_type,fileUrl:e.document_url,fileName:e.document_url?.split("/").pop()||"document",uploadedAt:e.created_at?new Date(e.created_at):new Date,status:e.status,reviewedBy:e.verified_by,reviewedAt:e.verified_at?new Date(e.verified_at):null,rejectionReason:e.rejection_reason,document_number:e.document_number}));T(c),E(s||[]);let u=(o||[]).map(e=>({id:e.id,email:e.email,fullName:e.full_name??"",phone:e.phone??"",avatarUrl:e.avatar_url??null,role:e.role??"renter",accountStatus:e.account_status??"active",verificationStatus:e.verification_status??"pending",verificationDeadline:e.verification_deadline?new Date(e.verification_deadline):null,verificationDocuments:[],subscriptionPlan:e.subscription_plan??null,subscriptionExpiresAt:e.subscription_expires_at?new Date(e.subscription_expires_at):null,createdAt:e.created_at?new Date(e.created_at):new Date,updatedAt:e.updated_at?new Date(e.updated_at):new Date,lastLoginAt:e.last_login_at?new Date(e.last_login_at):null,affiliateCode:e.affiliate_code??null,referredBy:e.referred_by??null,totalReferrals:e.total_referrals??0,totalEarnings:e.total_earnings??0,dateOfBirth:e.date_of_birth,nextOfKinName:e.next_of_kin_name,nextOfKinPhone:e.next_of_kin_phone,nextOfKinRelationship:e.next_of_kin_relationship}));O(u)}finally{B(!1)}}(),()=>{e=!1}},[]);let F=S.filter(e=>"pending"===e.status).map(e=>{let t=I.find(t=>t.id===e.userId);return{...e,user:t}}).filter(e=>e.user),M=I.filter(e=>{if("owner"!==e.role&&"affiliate"!==e.role)return!1;let t=S.filter(t=>t.userId===e.id);return 0===t.length||t.every(e=>"approved"!==e.status)});I.filter(e=>("owner"===e.role||"affiliate"===e.role)&&S.filter(t=>t.userId===e.id).some(e=>"pending"===e.status));let z=async e=>{try{let{error:t}=await w.supabase.from("listings").update({status:"approved"}).eq("id",e);if(t)throw t;E(t=>t.filter(t=>t.id!==e))}catch(e){console.error("Error approving listing:",e)}},H=async e=>{try{let{error:t}=await w.supabase.from("listings").update({status:"rejected"}).eq("id",e);if(t)throw t;E(t=>t.filter(t=>t.id!==e))}catch(e){console.error("Error rejecting listing:",e)}},V=async(t,a)=>{if(e)try{await (0,y.updateDocumentStatus)(e.id,t,a),T(a=>a.map(a=>a.id===e.id?{...a,status:t}:a)),k(!1),C(null),_.toast.success(`Document ${t}`)}catch(e){console.error(e),_.toast.error("Failed to update status")}};return(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-3xl font-bold",children:"Verifications"}),(0,t.jsx)("p",{className:"text-muted-foreground",children:"Review and manage user verification documents"})]}),(0,t.jsxs)("div",{className:"grid gap-4 md:grid-cols-4",children:[(0,t.jsx)(p.Card,{className:"glass-card",children:(0,t.jsx)(p.CardContent,{className:"pt-6",children:(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsx)("div",{className:"p-3 rounded-full bg-orange-500/20",children:(0,t.jsx)(n.Clock,{className:"h-6 w-6 text-orange-500"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-2xl font-bold",children:M.length}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"Awaiting Documents"})]})]})})}),(0,t.jsx)(p.Card,{className:"glass-card",children:(0,t.jsx)(p.CardContent,{className:"pt-6",children:(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsx)("div",{className:"p-3 rounded-full bg-blue-500/20",children:(0,t.jsx)(r.ShieldAlert,{className:"h-6 w-6 text-blue-500"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-2xl font-bold",children:F.length}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"Documents to Review"})]})]})})}),(0,t.jsx)(p.Card,{className:"glass-card",children:(0,t.jsx)(p.CardContent,{className:"pt-6",children:(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsx)("div",{className:"p-3 rounded-full bg-purple-500/20",children:(0,t.jsx)(f.Package,{className:"h-6 w-6 text-purple-500"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-2xl font-bold",children:P.length}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"Listings to Review"})]})]})})}),(0,t.jsx)(p.Card,{className:"glass-card",children:(0,t.jsx)(p.CardContent,{className:"pt-6",children:(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsx)("div",{className:"p-3 rounded-full bg-red-500/20",children:(0,t.jsx)(i,{className:"h-6 w-6 text-red-500"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-2xl font-bold",children:I.filter(e=>"suspended"===e.accountStatus).length}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"Suspended (Deadline Passed)"})]})]})})})]}),(0,t.jsxs)(v.Tabs,{defaultValue:"documents",className:"space-y-4",children:[(0,t.jsxs)(v.TabsList,{children:[(0,t.jsxs)(v.TabsTrigger,{value:"documents",children:["Documents to Review",F.length>0&&(0,t.jsx)(x.Badge,{className:"ml-2 bg-primary",children:F.length})]}),(0,t.jsxs)(v.TabsTrigger,{value:"pending",children:["Awaiting Documents",M.length>0&&(0,t.jsx)(x.Badge,{className:"ml-2",variant:"secondary",children:M.length})]}),(0,t.jsxs)(v.TabsTrigger,{value:"listings",children:["Listing Verifications",P.length>0&&(0,t.jsx)(x.Badge,{className:"ml-2 bg-purple-600",children:P.length})]}),(0,t.jsx)(v.TabsTrigger,{value:"all",children:"All Verifications"})]}),(0,t.jsx)(v.TabsContent,{value:"documents",children:(0,t.jsxs)(p.Card,{className:"glass-card",children:[(0,t.jsxs)(p.CardHeader,{children:[(0,t.jsx)(p.CardTitle,{children:"Documents Pending Review"}),(0,t.jsx)(p.CardDescription,{children:"Review submitted verification documents"})]}),(0,t.jsx)(p.CardContent,{children:0===F.length?(0,t.jsxs)("div",{className:"text-center py-12",children:[(0,t.jsx)(s.ShieldCheck,{className:"h-12 w-12 mx-auto text-green-500 mb-4"}),(0,t.jsx)("h3",{className:"text-lg font-medium",children:"All caught up!"}),(0,t.jsx)("p",{className:"text-muted-foreground",children:"No documents pending review"})]}):(0,t.jsx)("div",{className:"space-y-4",children:F.map(e=>(0,t.jsxs)("div",{className:"flex items-center justify-between p-4 rounded-lg bg-background/50 border border-border",children:[(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsxs)(h.Avatar,{children:[(0,t.jsx)(h.AvatarImage,{src:e.user.avatarUrl||void 0}),(0,t.jsx)(h.AvatarFallback,{children:e.user.fullName.split(" ").map(e=>e[0]).join("")})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-medium",children:e.user.fullName}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(x.Badge,{variant:"outline",className:"text-xs",children:e.user.role}),(0,t.jsx)("span",{className:"text-sm text-muted-foreground",children:e.user.email})]})]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsxs)("div",{className:"text-right",children:[(0,t.jsxs)("p",{className:"font-medium flex items-center gap-2",children:[(0,t.jsx)(l.FileText,{className:"h-4 w-4"}),(e.type||"Document").replace("_"," ")]}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:e.fileName})]}),(0,t.jsx)(g.Button,{variant:"outline",size:"sm",asChild:!0,children:(0,t.jsxs)("a",{href:`/admin/verifications/${e.id}`,children:[(0,t.jsx)(o.Eye,{className:"h-4 w-4 mr-2"}),"Review"]})})]})]},e.id))})})]})}),(0,t.jsx)(v.TabsContent,{value:"pending",children:(0,t.jsxs)(p.Card,{className:"glass-card",children:[(0,t.jsxs)(p.CardHeader,{children:[(0,t.jsx)(p.CardTitle,{children:"Users Awaiting Document Submission"}),(0,t.jsx)(p.CardDescription,{children:"Owners and affiliates who have not submitted verification documents"})]}),(0,t.jsx)(p.CardContent,{children:0===M.length?(0,t.jsxs)("div",{className:"text-center py-12",children:[(0,t.jsx)(d.CheckCircle,{className:"h-12 w-12 mx-auto text-green-500 mb-4"}),(0,t.jsx)("h3",{className:"text-lg font-medium",children:"No pending users"}),(0,t.jsx)("p",{className:"text-muted-foreground",children:"All users have submitted their documents"})]}):(0,t.jsx)("div",{className:"space-y-4",children:M.map(e=>{var a;let s=(a=e.verificationDeadline)?Math.ceil((a.getTime()-Date.now())/864e5):null,r=null!==s&&s<=2;return(0,t.jsxs)("div",{className:`flex items-center justify-between p-4 rounded-lg border ${r?"bg-red-500/10 border-red-500/30":"bg-background/50 border-border"}`,children:[(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsxs)(h.Avatar,{children:[(0,t.jsx)(h.AvatarImage,{src:e.avatarUrl||void 0}),(0,t.jsx)(h.AvatarFallback,{children:e.fullName.split(" ").map(e=>e[0]).join("")})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-medium",children:e.fullName}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(x.Badge,{variant:"outline",className:"text-xs",children:e.role}),(0,t.jsx)("span",{className:"text-sm text-muted-foreground",children:e.email})]})]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[null!==s&&(0,t.jsxs)(x.Badge,{variant:r?"destructive":"secondary",className:"flex items-center gap-1",children:[r&&(0,t.jsx)(m.AlertTriangle,{className:"h-3 w-3"}),(0,t.jsx)(n.Clock,{className:"h-3 w-3"}),s>0?`${s} days left`:"Deadline passed"]}),(0,t.jsx)(g.Button,{variant:"outline",size:"sm",children:"Send Reminder"})]})]},e.id)})})})]})}),(0,t.jsx)(v.TabsContent,{value:"listings",children:(0,t.jsxs)(p.Card,{className:"glass-card",children:[(0,t.jsxs)(p.CardHeader,{children:[(0,t.jsx)(p.CardTitle,{children:"Listings Pending Review"}),(0,t.jsx)(p.CardDescription,{children:"Review and approve new rental listings"})]}),(0,t.jsx)(p.CardContent,{children:0===P.length?(0,t.jsxs)("div",{className:"text-center py-12",children:[(0,t.jsx)(d.CheckCircle,{className:"h-12 w-12 mx-auto text-green-500 mb-4"}),(0,t.jsx)("h3",{className:"text-lg font-medium",children:"No pending listings"}),(0,t.jsx)("p",{className:"text-muted-foreground",children:"All listings have been reviewed"})]}):(0,t.jsx)("div",{className:"space-y-4",children:P.map(e=>{let a=I.find(t=>t.id===e.owner_id);return(0,t.jsxs)("div",{className:"flex items-center justify-between p-4 rounded-lg bg-background/50 border border-border",children:[(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[e.images&&e.images[0]&&(0,t.jsx)("img",{src:e.images[0],alt:e.title,className:"h-16 w-24 object-cover rounded-md"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-medium text-lg",children:e.title}),(0,t.jsxs)("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[(0,t.jsx)("span",{children:a?.fullName||"Unknown Owner"}),(0,t.jsx)("span",{children:"•"}),(0,t.jsxs)("span",{children:["KSh ",e.price_per_day,"/day"]}),(0,t.jsx)("span",{children:"•"}),(0,t.jsx)(x.Badge,{variant:"outline",className:"capitalize",children:e.category_id})]})]})]}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)(g.Button,{variant:"outline",className:"text-green-600 hover:text-green-700 hover:bg-green-50 border-green-200",onClick:()=>z(e.id),children:"Approve"}),(0,t.jsx)(g.Button,{variant:"outline",className:"text-red-600 hover:text-red-700 hover:bg-red-50 border-red-200",onClick:()=>H(e.id),children:"Reject"})]})]},e.id)})})})]})}),(0,t.jsx)(v.TabsContent,{value:"all",children:(0,t.jsxs)(p.Card,{className:"glass-card",children:[(0,t.jsxs)(p.CardHeader,{children:[(0,t.jsx)(p.CardTitle,{children:"All Verification Records"}),(0,t.jsx)(p.CardDescription,{children:"History of all verification documents"})]}),(0,t.jsx)(p.CardContent,{children:(0,t.jsx)("div",{className:"space-y-4",children:0===S.length?(0,t.jsx)("div",{className:"text-center py-8 text-muted-foreground",children:"No verification documents found."}):S.map(e=>{let a=I.find(t=>t.id===e.userId);return a?(0,t.jsxs)("div",{className:"flex items-center justify-between p-4 rounded-lg bg-background/50 border border-border",children:[(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsxs)(h.Avatar,{children:[(0,t.jsx)(h.AvatarImage,{src:a.avatarUrl||void 0}),(0,t.jsx)(h.AvatarFallback,{children:a.fullName.split(" ").map(e=>e[0]).join("")})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-medium",children:a.fullName}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(x.Badge,{variant:"outline",className:"text-xs",children:a.role}),(0,t.jsx)("span",{className:"text-sm text-muted-foreground",children:a.email})]})]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsxs)("div",{className:"text-right hidden md:block",children:[(0,t.jsx)("p",{className:"font-medium capitalize text-sm",children:(e.type||"Document").replace("_"," ")}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:new Date(e.uploadedAt).toLocaleDateString()})]}),(0,t.jsx)(x.Badge,{variant:"approved"===e.status?"default":"rejected"===e.status?"destructive":"secondary",className:"approved"===e.status?"bg-green-500/20 text-green-600 border-green-500/30":"",children:e.status}),(0,t.jsx)(g.Button,{variant:"ghost",size:"sm",asChild:!0,children:(0,t.jsxs)("a",{href:`/admin/verifications/${e.id}`,children:[(0,t.jsx)(o.Eye,{className:"h-4 w-4 mr-2"}),"View"]})})]})]},e.id):null})})})]})})]}),(0,t.jsx)(j.Dialog,{open:!!e,onOpenChange:()=>C(null),children:(0,t.jsxs)(j.DialogContent,{className:"max-w-3xl",children:[(0,t.jsxs)(j.DialogHeader,{children:[(0,t.jsx)(j.DialogTitle,{children:"Review Verification Document"}),(0,t.jsx)(j.DialogDescription,{children:"Review the submitted document and approve or reject it"})]}),e&&(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"flex items-center gap-4 p-4 rounded-lg bg-secondary/50",children:[(0,t.jsxs)(h.Avatar,{className:"h-12 w-12",children:[(0,t.jsx)(h.AvatarImage,{src:e.user.avatarUrl||void 0}),(0,t.jsx)(h.AvatarFallback,{children:e.user.fullName.split(" ").map(e=>e[0]).join("")})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-medium",children:e.user.fullName}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:e.user.email})]}),(0,t.jsx)(x.Badge,{className:"ml-auto",children:e.user.role})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"p-4 rounded-lg bg-secondary/50",children:[(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"Document Type"}),(0,t.jsx)("p",{className:"font-medium capitalize",children:(e.type||"").replace("_"," ")})]}),(0,t.jsxs)("div",{className:"p-4 rounded-lg bg-secondary/50",children:[(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"Document Number"}),(0,t.jsx)("p",{className:"font-medium uppercase",children:e.document_number||"N/A"})]}),(0,t.jsxs)("div",{className:"p-4 rounded-lg bg-secondary/50",children:[(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"Date of Birth"}),(0,t.jsx)("p",{className:"font-medium",children:e.user.dateOfBirth||"N/A"})]}),(0,t.jsxs)("div",{className:"p-4 rounded-lg bg-secondary/50",children:[(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"File Name"}),(0,t.jsx)("p",{className:"font-medium",children:e.fileName})]}),(0,t.jsxs)("div",{className:"p-4 rounded-lg bg-secondary/50",children:[(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"Uploaded"}),(0,t.jsx)("p",{className:"font-medium",children:e.uploadedAt.toLocaleDateString()})]}),(0,t.jsxs)("div",{className:"p-4 rounded-lg bg-secondary/50",children:[(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"Status"}),(0,t.jsx)(x.Badge,{variant:"secondary",children:e.status})]})]}),(0,t.jsxs)("div",{className:"p-4 rounded-lg bg-secondary/50",children:[(0,t.jsx)("h4",{className:"font-semibold mb-2",children:"Next of Kin"}),(0,t.jsxs)("div",{className:"grid grid-cols-3 gap-4 text-sm",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"text-muted-foreground",children:"Name:"})," ",(0,t.jsx)("span",{className:"font-medium",children:e.user.nextOfKinName||"N/A"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"text-muted-foreground",children:"Relation:"})," ",(0,t.jsx)("span",{className:"font-medium",children:e.user.nextOfKinRelationship||"N/A"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"text-muted-foreground",children:"Phone:"})," ",(0,t.jsx)("span",{className:"font-medium",children:e.user.nextOfKinPhone||"N/A"})]})]})]}),(0,t.jsxs)("div",{className:"border border-border rounded-lg p-4",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,t.jsx)("p",{className:"font-medium",children:"Document Preview"}),(0,t.jsxs)(g.Button,{variant:"outline",size:"sm",children:[(0,t.jsx)(u.Download,{className:"h-4 w-4 mr-2"}),"Download"]})]}),(0,t.jsx)("div",{className:"aspect-video bg-muted rounded-lg flex items-center justify-center",children:(0,t.jsx)("img",{src:e.fileUrl||"/placeholder.svg",alt:"Document preview",className:"max-h-full max-w-full object-contain rounded-lg"})})]}),(0,t.jsxs)("div",{className:"flex gap-3 justify-end",children:[(0,t.jsxs)(g.Button,{variant:"outline",className:"text-red-600 border-red-600 hover:bg-red-600/10 bg-transparent",onClick:()=>k(!0),children:[(0,t.jsx)(c.XCircle,{className:"h-4 w-4 mr-2"}),"Reject"]}),(0,t.jsxs)(g.Button,{className:"bg-green-600 hover:bg-green-700",onClick:()=>V("approved"),children:[(0,t.jsx)(d.CheckCircle,{className:"h-4 w-4 mr-2"}),"Approve"]})]})]})]})}),(0,t.jsx)(j.Dialog,{open:D,onOpenChange:k,children:(0,t.jsxs)(j.DialogContent,{children:[(0,t.jsxs)(j.DialogHeader,{children:[(0,t.jsx)(j.DialogTitle,{children:"Reject Document"}),(0,t.jsx)(j.DialogDescription,{children:"Please provide a reason for rejecting this document. The user will be notified."})]}),(0,t.jsx)("div",{className:"space-y-4",children:(0,t.jsxs)("div",{children:[(0,t.jsx)(N.Label,{htmlFor:"rejection-reason",children:"Rejection Reason"}),(0,t.jsx)(b.Textarea,{id:"rejection-reason",placeholder:"Enter the reason for rejection...",value:R,onChange:e=>A(e.target.value),className:"mt-2"})]})}),(0,t.jsxs)(j.DialogFooter,{children:[(0,t.jsx)(g.Button,{variant:"outline",onClick:()=>k(!1),children:"Cancel"}),(0,t.jsx)(g.Button,{variant:"destructive",onClick:()=>V("rejected",R),children:"Confirm Rejection"})]})]})})]})}e.s(["VerificationsManagement",()=>C],42722)}]);