(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,70065,e=>{"use strict";var r=e.i(43476),a=e.i(47163);function t({className:e,...t}){return(0,r.jsx)("div",{"data-slot":"card",className:(0,a.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",e),...t})}function s({className:e,...t}){return(0,r.jsx)("div",{"data-slot":"card-header",className:(0,a.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-2 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",e),...t})}function i({className:e,...t}){return(0,r.jsx)("div",{"data-slot":"card-title",className:(0,a.cn)("leading-none font-semibold",e),...t})}function n({className:e,...t}){return(0,r.jsx)("div",{"data-slot":"card-description",className:(0,a.cn)("text-muted-foreground text-sm",e),...t})}function l({className:e,...t}){return(0,r.jsx)("div",{"data-slot":"card-content",className:(0,a.cn)("px-6",e),...t})}e.s(["Card",()=>t,"CardContent",()=>l,"CardDescription",()=>n,"CardHeader",()=>s,"CardTitle",()=>i])},61911,e=>{"use strict";let r=(0,e.i(75254).default)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);e.s(["Users",()=>r],61911)},99682,e=>{"use strict";var r=e.i(71645);function a(e){let a=r.useRef({value:e,previous:e});return r.useMemo(()=>(a.current.value!==e&&(a.current.previous=a.current.value,a.current.value=e),a.current.previous),[e])}e.s(["usePrevious",()=>a])},31278,e=>{"use strict";let r=(0,e.i(75254).default)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);e.s(["Loader2",()=>r],31278)},10708,e=>{"use strict";var r=e.i(43476),a=e.i(71645);e.i(74080);var t=e.i(91918),s=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((e,s)=>{let i=(0,t.createSlot)(`Primitive.${s}`),n=a.forwardRef((e,a)=>{let{asChild:t,...n}=e;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,r.jsx)(t?i:s,{...n,ref:a})});return n.displayName=`Primitive.${s}`,{...e,[s]:n}},{}),i=a.forwardRef((e,a)=>(0,r.jsx)(s.label,{...e,ref:a,onMouseDown:r=>{r.target.closest("button, input, select, textarea")||(e.onMouseDown?.(r),!r.defaultPrevented&&r.detail>1&&r.preventDefault())}}));i.displayName="Label";var n=e.i(47163);function l({className:e,...a}){return(0,r.jsx)(i,{"data-slot":"label",className:(0,n.cn)("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",e),...a})}e.s(["Label",()=>l],10708)},25652,e=>{"use strict";let r=(0,e.i(75254).default)("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);e.s(["TrendingUp",()=>r],25652)},16540,e=>{"use strict";var r=e.i(43476),a=e.i(71645),t=e.i(81140),s=e.i(20783),i=e.i(30030),n=e.i(48425),l=e.i(42727),o=e.i(69340),d=e.i(86318),c=e.i(35804),u=e.i(99682),p=e.i(96626),m="Radio",[f,h]=(0,i.createContextScope)(m),[v,x]=f(m),g=a.forwardRef((e,i)=>{let{__scopeRadio:l,name:o,checked:d=!1,required:c,disabled:u,value:p="on",onCheck:m,form:f,...h}=e,[x,g]=a.useState(null),y=(0,s.useComposedRefs)(i,e=>g(e)),b=a.useRef(!1),k=!x||f||!!x.closest("form");return(0,r.jsxs)(v,{scope:l,checked:d,disabled:u,children:[(0,r.jsx)(n.Primitive.button,{type:"button",role:"radio","aria-checked":d,"data-state":w(d),"data-disabled":u?"":void 0,disabled:u,value:p,...h,ref:y,onClick:(0,t.composeEventHandlers)(e.onClick,e=>{d||m?.(),k&&(b.current=e.isPropagationStopped(),b.current||e.stopPropagation())})}),k&&(0,r.jsx)(j,{control:x,bubbles:!b.current,name:o,value:p,checked:d,required:c,disabled:u,form:f,style:{transform:"translateX(-100%)"}})]})});g.displayName=m;var y="RadioIndicator",b=a.forwardRef((e,a)=>{let{__scopeRadio:t,forceMount:s,...i}=e,l=x(y,t);return(0,r.jsx)(p.Presence,{present:s||l.checked,children:(0,r.jsx)(n.Primitive.span,{"data-state":w(l.checked),"data-disabled":l.disabled?"":void 0,...i,ref:a})})});b.displayName=y;var j=a.forwardRef(({__scopeRadio:e,control:t,checked:i,bubbles:l=!0,...o},d)=>{let p=a.useRef(null),m=(0,s.useComposedRefs)(p,d),f=(0,u.usePrevious)(i),h=(0,c.useSize)(t);return a.useEffect(()=>{let e=p.current;if(!e)return;let r=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"checked").set;if(f!==i&&r){let a=new Event("click",{bubbles:l});r.call(e,i),e.dispatchEvent(a)}},[f,i,l]),(0,r.jsx)(n.Primitive.input,{type:"radio","aria-hidden":!0,defaultChecked:i,...o,tabIndex:-1,ref:m,style:{...o.style,...h,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});function w(e){return e?"checked":"unchecked"}j.displayName="RadioBubbleInput";var k=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],N="RadioGroup",[C,R]=(0,i.createContextScope)(N,[l.createRovingFocusGroupScope,h]),S=(0,l.createRovingFocusGroupScope)(),E=h(),[M,P]=C(N),L=a.forwardRef((e,a)=>{let{__scopeRadioGroup:t,name:s,defaultValue:i,value:c,required:u=!1,disabled:p=!1,orientation:m,dir:f,loop:h=!0,onValueChange:v,...x}=e,g=S(t),y=(0,d.useDirection)(f),[b,j]=(0,o.useControllableState)({prop:c,defaultProp:i??null,onChange:v,caller:N});return(0,r.jsx)(M,{scope:t,name:s,required:u,disabled:p,value:b,onValueChange:j,children:(0,r.jsx)(l.Root,{asChild:!0,...g,orientation:m,dir:y,loop:h,children:(0,r.jsx)(n.Primitive.div,{role:"radiogroup","aria-required":u,"aria-orientation":m,"data-disabled":p?"":void 0,dir:y,...x,ref:a})})})});L.displayName=N;var T="RadioGroupItem",U=a.forwardRef((e,i)=>{let{__scopeRadioGroup:n,disabled:o,...d}=e,c=P(T,n),u=c.disabled||o,p=S(n),m=E(n),f=a.useRef(null),h=(0,s.useComposedRefs)(i,f),v=c.value===d.value,x=a.useRef(!1);return a.useEffect(()=>{let e=e=>{k.includes(e.key)&&(x.current=!0)},r=()=>x.current=!1;return document.addEventListener("keydown",e),document.addEventListener("keyup",r),()=>{document.removeEventListener("keydown",e),document.removeEventListener("keyup",r)}},[]),(0,r.jsx)(l.Item,{asChild:!0,...p,focusable:!u,active:v,children:(0,r.jsx)(g,{disabled:u,required:c.required,checked:v,...m,...d,name:c.name,ref:h,onCheck:()=>c.onValueChange(d.value),onKeyDown:(0,t.composeEventHandlers)(e=>{"Enter"===e.key&&e.preventDefault()}),onFocus:(0,t.composeEventHandlers)(d.onFocus,()=>{x.current&&f.current?.click()})})})});U.displayName=T;var q=a.forwardRef((e,a)=>{let{__scopeRadioGroup:t,...s}=e,i=E(t);return(0,r.jsx)(b,{...i,...s,ref:a})});q.displayName="RadioGroupIndicator";var D=e.i(33498),I=e.i(47163);function G({className:e,...a}){return(0,r.jsx)(L,{"data-slot":"radio-group",className:(0,I.cn)("grid gap-3",e),...a})}function H({className:e,...a}){return(0,r.jsx)(U,{"data-slot":"radio-group-item",className:(0,I.cn)("border-input text-primary focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 aspect-square size-4 shrink-0 rounded-full border shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",e),...a,children:(0,r.jsx)(q,{"data-slot":"radio-group-indicator",className:"relative flex items-center justify-center",children:(0,r.jsx)(D.CircleIcon,{className:"fill-primary absolute top-1/2 left-1/2 size-2 -translate-x-1/2 -translate-y-1/2"})})})}e.s(["RadioGroup",()=>G,"RadioGroupItem",()=>H],16540)},14948,e=>{"use strict";var r=e.i(43476),a=e.i(71645),t=e.i(18566),s=e.i(17927),i=e.i(67881),n=e.i(70065),l=e.i(16540),o=e.i(10708),d=e.i(49786),c=e.i(61911);let u=(0,e.i(75254).default)("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);var p=e.i(25652),m=e.i(31278),f=e.i(57688);let h=[{value:"renter",label:"Renter",description:"Browse and rent items from verified owners",icon:c.Users,features:["Browse all categories","Book items instantly","Rate and review","Save favorites"]},{value:"owner",label:"Owner",description:"List your items and earn money",icon:u,features:["List unlimited items","Set your own prices","Manage bookings","Subscription required"]},{value:"affiliate",label:"Affiliate",description:"Earn commissions by referring users",icon:p.TrendingUp,features:["Unique referral link","Track earnings","Monthly payouts","Marketing materials"]}];function v(){let[e,c]=(0,a.useState)("renter"),[u,p]=(0,a.useState)(!1),[v,g]=(0,a.useState)(null),y=(0,t.useRouter)();(0,a.useEffect)(()=>{(async()=>{let{data:{user:e}}=await s.supabase.auth.getUser();if(!e)return y.push("/signin");g(e);let{data:r}=await s.supabase.from("user_profiles").select("role").eq("id",e.id).single();if(r&&r.role&&"renter"!==r.role){let e=x(r.role);y.push(e)}})()},[y]);let b=async()=>{if(v){p(!0);try{let r=await s.supabase.from("user_profiles").upsert({id:v.id,role:e,email:v.email},{onConflict:"id"}).select().single();if(console.debug("Role update response:",r),r.error){let e={message:r.error.message,details:r.error.details??null,hint:r.error.hint??null};console.error("Error updating role:",e),alert("Failed to update account type. "+(r.error.message||"Please try again."));return}let a=x(e);y.push(a)}catch(e){console.error("Exception while updating role:",e),alert("Failed to update account type due to a network error. Please try again.")}finally{p(!1)}}};return(0,r.jsxs)("div",{className:"min-h-screen flex flex-col",children:[(0,r.jsx)(d.Header,{}),(0,r.jsx)("main",{className:"flex-1 flex items-center justify-center py-12 px-4",children:(0,r.jsx)("div",{className:"w-full max-w-4xl",children:(0,r.jsxs)(n.Card,{className:"glass-card",children:[(0,r.jsxs)(n.CardHeader,{className:"text-center",children:[(0,r.jsx)("div",{className:"flex justify-center mb-4",children:(0,r.jsx)(f.default,{src:"/logo.png",alt:"Leli Rentals",width:150,height:40,className:"h-10 w-auto dark:invert"})}),(0,r.jsx)(n.CardTitle,{className:"text-2xl",children:"Choose Your Account Type"}),(0,r.jsx)(n.CardDescription,{children:"Select how you want to use Leli Rentals. You can change this later in settings."})]}),(0,r.jsxs)(n.CardContent,{className:"space-y-6",children:[(0,r.jsx)(l.RadioGroup,{value:e,onValueChange:c,children:(0,r.jsx)("div",{className:"grid gap-4",children:h.map(a=>{let t=a.icon;return(0,r.jsx)("label",{className:`cursor-pointer transition-all ${e===a.value?"ring-2 ring-primary":""}`,children:(0,r.jsx)(n.Card,{className:e===a.value?"border-primary":"",children:(0,r.jsx)(n.CardContent,{className:"p-6",children:(0,r.jsxs)("div",{className:"flex items-start gap-4",children:[(0,r.jsx)(l.RadioGroupItem,{value:a.value,id:a.value,className:"mt-1"}),(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,r.jsx)(t,{className:"h-6 w-6 text-primary"}),(0,r.jsxs)("div",{children:[(0,r.jsx)(o.Label,{htmlFor:a.value,className:"text-lg font-semibold cursor-pointer",children:a.label}),(0,r.jsx)("p",{className:"text-sm text-muted-foreground",children:a.description})]})]}),(0,r.jsx)("ul",{className:"mt-3 space-y-1",children:a.features.map((e,a)=>(0,r.jsxs)("li",{className:"text-sm text-muted-foreground flex items-center gap-2",children:[(0,r.jsx)("span",{className:"text-primary",children:"âœ“"}),e]},a))})]})]})})})},a.value)})})}),(0,r.jsx)(i.Button,{onClick:b,disabled:u,className:"w-full h-12",size:"lg",children:u?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(m.Loader2,{className:"h-5 w-5 mr-2 animate-spin"}),"Setting up your account..."]}):"Continue"})]})]})})})]})}function x(e){switch(e){case"renter":default:return"/categories";case"owner":return"/dashboard/owner";case"affiliate":return"/dashboard/affiliate";case"admin":return"/dashboard/admin"}}e.s(["default",()=>v],14948)}]);