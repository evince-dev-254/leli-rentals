{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/evince/Downloads/greeting%20%281%29/components/ui/loading-logo.tsx"],"sourcesContent":["\"use client\"\r\n\r\nimport Image from \"next/image\"\r\nimport { cn } from \"@/lib/utils\"\r\n\r\ninterface LoadingLogoProps {\r\n    className?: string\r\n    size?: number\r\n}\r\n\r\nexport function LoadingLogo({ className, size = 60 }: LoadingLogoProps) {\r\n    return (\r\n        <div className={cn(\"relative flex items-center justify-center\", className)}>\r\n            {/* Pulse Rings */}\r\n            <div className=\"absolute inset-0 bg-primary/20 rounded-full animate-ping opacity-75\" />\r\n            <div className=\"absolute inset-0 bg-primary/10 rounded-full animate-pulse delay-75\" />\r\n\r\n            {/* Logo Container */}\r\n            <div className=\"relative bg-background/80 backdrop-blur-sm rounded-full p-4 shadow-xl ring-1 ring-border/50 border border-primary/10\">\r\n                <Image\r\n                    src=\"/logo.png\"\r\n                    alt=\"Loading...\"\r\n                    width={size}\r\n                    height={size}\r\n                    className=\"h-auto w-auto object-contain dark:invert animate-pulse duration-1000\"\r\n                    priority\r\n                />\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AAHA;;;;AAUO,SAAS,YAAY,EAAE,SAAS,EAAE,OAAO,EAAE,EAAoB;IAClE,qBACI,8OAAC;QAAI,WAAW,IAAA,kHAAE,EAAC,6CAA6C;;0BAE5D,8OAAC;gBAAI,WAAU;;;;;;0BACf,8OAAC;gBAAI,WAAU;;;;;;0BAGf,8OAAC;gBAAI,WAAU;0BACX,cAAA,8OAAC,wIAAK;oBACF,KAAI;oBACJ,KAAI;oBACJ,OAAO;oBACP,QAAQ;oBACR,WAAU;oBACV,QAAQ;;;;;;;;;;;;;;;;;AAK5B"}},
    {"offset": {"line": 63, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/evince/Downloads/greeting%20%281%29/app/dashboard/page.tsx"],"sourcesContent":["\"use client\"\r\n\r\nimport { useEffect, useState } from \"react\"\r\nimport { useRouter } from \"next/navigation\"\r\nimport { supabase } from \"@/lib/supabase\"\r\nimport AdminDashboard from \"@/components/dashboard/admin-dashboard\"\r\nimport { LoadingLogo } from \"@/components/ui/loading-logo\"\r\nimport { Loader2 } from \"lucide-react\"\r\n\r\nexport default function DashboardPage() {\r\n  const [user, setUser] = useState<any>(null)\r\n  const [profile, setProfile] = useState<any>(null)\r\n  const [loading, setLoading] = useState(true)\r\n  const router = useRouter()\r\n\r\n  useEffect(() => {\r\n    const getUser = async () => {\r\n      try {\r\n        const { data: { user }, error: userError } = await supabase.auth.getUser()\r\n\r\n        if (userError || !user) {\r\n          router.push('/sign-in')\r\n          return\r\n        }\r\n\r\n        setUser(user)\r\n\r\n        // Fetch user profile from user_profiles table\r\n        const { data: profileData, error: profileError } = await supabase\r\n          .from(\"user_profiles\")\r\n          .select(\"*\")\r\n          .eq(\"id\", user.id)\r\n          .single()\r\n\r\n        if (profileError) {\r\n          if (profileError.code !== 'PGRST116') {\r\n            console.error('Profile fetch error:', profileError)\r\n          }\r\n          router.push('/select-role')\r\n          return\r\n        }\r\n\r\n        setProfile(profileData)\r\n\r\n        setProfile(profileData)\r\n\r\n        // Redirect logic\r\n        // If user is conceptually an admin (either role=='admin' OR is_admin==true), send to Admin Dashboard.\r\n        // NOTE: If an owner is also an admin, usually they want the Admin dashboard more prominent or a choice.\r\n        // For now, we prioritize Admin access if they visit the generic /dashboard.\r\n        if (profileData.role === 'admin' || profileData.is_admin) {\r\n          router.push('/admin')\r\n        }\r\n        // Otherwise, send to specific role dashboard\r\n        else if (profileData.role === 'renter') {\r\n          router.push('/dashboard/renter')\r\n        } else if (profileData.role === 'owner') {\r\n          router.push('/dashboard/owner')\r\n        } else if (profileData.role === 'affiliate') {\r\n          router.push('/dashboard/affiliate')\r\n        }\r\n\r\n      } catch (error) {\r\n        console.error('Dashboard error:', error)\r\n      } finally {\r\n        setLoading(false)\r\n      }\r\n    }\r\n\r\n    getUser()\r\n  }, [router])\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"min-h-screen flex items-center justify-center\">\r\n        <div className=\"flex flex-col items-center\">\r\n          <LoadingLogo size={80} />\r\n          <p className=\"mt-6 text-muted-foreground animate-pulse font-medium\">Loading dashboard...</p>\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n\r\n  // If redirecting, we might show a flash. Return null or loader.\r\n  return (\r\n    <div className=\"min-h-screen flex items-center justify-center\">\r\n      <LoadingLogo size={60} />\r\n    </div>\r\n  )\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AAEA;AANA;;;;;;AASe,SAAS;IACtB,MAAM,CAAC,MAAM,QAAQ,GAAG,IAAA,iNAAQ,EAAM;IACtC,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,iNAAQ,EAAM;IAC5C,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,iNAAQ,EAAC;IACvC,MAAM,SAAS,IAAA,+IAAS;IAExB,IAAA,kNAAS,EAAC;QACR,MAAM,UAAU;YACd,IAAI;gBACF,MAAM,EAAE,MAAM,EAAE,IAAI,EAAE,EAAE,OAAO,SAAS,EAAE,GAAG,MAAM,2HAAQ,CAAC,IAAI,CAAC,OAAO;gBAExE,IAAI,aAAa,CAAC,MAAM;oBACtB,OAAO,IAAI,CAAC;oBACZ;gBACF;gBAEA,QAAQ;gBAER,8CAA8C;gBAC9C,MAAM,EAAE,MAAM,WAAW,EAAE,OAAO,YAAY,EAAE,GAAG,MAAM,2HAAQ,CAC9D,IAAI,CAAC,iBACL,MAAM,CAAC,KACP,EAAE,CAAC,MAAM,KAAK,EAAE,EAChB,MAAM;gBAET,IAAI,cAAc;oBAChB,IAAI,aAAa,IAAI,KAAK,YAAY;wBACpC,QAAQ,KAAK,CAAC,wBAAwB;oBACxC;oBACA,OAAO,IAAI,CAAC;oBACZ;gBACF;gBAEA,WAAW;gBAEX,WAAW;gBAEX,iBAAiB;gBACjB,sGAAsG;gBACtG,wGAAwG;gBACxG,4EAA4E;gBAC5E,IAAI,YAAY,IAAI,KAAK,WAAW,YAAY,QAAQ,EAAE;oBACxD,OAAO,IAAI,CAAC;gBACd,OAEK,IAAI,YAAY,IAAI,KAAK,UAAU;oBACtC,OAAO,IAAI,CAAC;gBACd,OAAO,IAAI,YAAY,IAAI,KAAK,SAAS;oBACvC,OAAO,IAAI,CAAC;gBACd,OAAO,IAAI,YAAY,IAAI,KAAK,aAAa;oBAC3C,OAAO,IAAI,CAAC;gBACd;YAEF,EAAE,OAAO,OAAO;gBACd,QAAQ,KAAK,CAAC,oBAAoB;YACpC,SAAU;gBACR,WAAW;YACb;QACF;QAEA;IACF,GAAG;QAAC;KAAO;IAEX,IAAI,SAAS;QACX,qBACE,8OAAC;YAAI,WAAU;sBACb,cAAA,8OAAC;gBAAI,WAAU;;kCACb,8OAAC,mJAAW;wBAAC,MAAM;;;;;;kCACnB,8OAAC;wBAAE,WAAU;kCAAuD;;;;;;;;;;;;;;;;;IAI5E;IAEA,gEAAgE;IAChE,qBACE,8OAAC;QAAI,WAAU;kBACb,cAAA,8OAAC,mJAAW;YAAC,MAAM;;;;;;;;;;;AAGzB"}}]
}